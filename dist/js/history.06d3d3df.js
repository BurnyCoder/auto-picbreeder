(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["history"],{"65f1":function(e,s,t){"use strict";t("7445")},7445:function(e,s,t){},e4bb:function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e._self._c;return s("div",{staticClass:"history"},[s("NavBar"),s("div",{staticClass:"history-container"},[s("h2",[e._v("Evolution History")]),e.stats.sessionCount>0?s("p",{staticClass:"history-stats"},[e._v(" "+e._s(e.stats.sessionCount)+" mutation sessions, "+e._s(e.stats.imageCount)+" total images ("+e._s(e.stats.sizeKB)+"KB used) ")]):e._e(),e.sessions.length>0?s("div",{staticClass:"history-controls"},[s("button",{staticClass:"btn btn-danger btn-sm",on:{click:e.confirmClearAll}},[e._v(" Clear All History ")])]):e._e(),e.sessions.length>0?s("div",{staticClass:"sessions-list"},e._l(e.sessions,(function(t){return s("div",{key:t.id,staticClass:"session-card"},[s("div",{staticClass:"session-header"},[s("span",{staticClass:"session-date"},[e._v(e._s(e.formatDateTime(t.timestamp)))]),s("span",{staticClass:"session-count"},[e._v(e._s(t.images.length)+" parent"+e._s(t.images.length>1?"s":""))]),s("button",{staticClass:"delete-session-btn",on:{click:function(s){return e.deleteSession(t.id)}}},[e._v("Delete Session")])]),s("div",{staticClass:"session-images"},e._l(t.images,(function(i){return s("div",{key:i.id,staticClass:"session-image",on:{click:function(s){return e.selectImage(t,i)}}},[s("img",{attrs:{src:i.thumbnail,alt:"Parent image"}}),s("button",{staticClass:"delete-img-btn",on:{click:function(s){return s.stopPropagation(),e.deleteImage(t.id,i.id)}}},[e._v("x")])])})),0)])})),0):s("div",{staticClass:"history-empty"},[s("p",[e._v("No saved images yet.")]),s("p",[e._v("Select images in the "),s("router-link",{attrs:{to:"/evolve"}},[e._v("Evolve")]),e._v(' page and click "mutate" to save them automatically.')],1)]),e.selectedImage?s("div",{staticClass:"history-modal",on:{click:function(s){return s.target!==s.currentTarget?null:e.closeModal.apply(null,arguments)}}},[s("div",{staticClass:"modal-content"},[s("button",{staticClass:"close-btn",on:{click:e.closeModal}},[e._v("x")]),s("img",{staticClass:"modal-image",attrs:{src:e.selectedImage.thumbnail}}),s("div",{staticClass:"modal-info"},[s("p",[s("strong",[e._v("Session:")]),e._v(" "+e._s(e.formatDateTime(e.selectedSession.timestamp)))]),s("p",[s("strong",[e._v("Image ID:")]),e._v(" "+e._s(e.selectedImage.id))])]),s("div",{staticClass:"modal-actions"},[s("button",{staticClass:"btn btn-success",on:{click:e.loadIntoEvolve}},[e._v(" Load into Evolve ")]),s("button",{staticClass:"btn btn-info",on:{click:e.downloadImage}},[e._v(" Download PNG ")]),s("button",{staticClass:"btn btn-secondary",on:{click:e.copyGenome}},[e._v(" Copy Genome JSON ")]),s("button",{staticClass:"btn btn-danger",on:{click:e.deleteAndClose}},[e._v(" Delete ")])])])]):e._e()]),s("Footer")],1)},a=[],o=(t("14d9"),t("e9c4"),t("d000")),n=t("fd2d"),l=t("05e5"),c={name:"History",components:{NavBar:o["a"],Footer:n["a"]},data(){return{sessions:[],stats:{sessionCount:0,imageCount:0,sizeKB:0},selectedSession:null,selectedImage:null}},mounted(){this.loadSessions()},methods:{loadSessions(){this.sessions=l["a"].getAll(),this.stats=l["a"].getStats()},formatDate(e){return new Date(e).toLocaleDateString()},formatDateTime(e){return new Date(e).toLocaleString()},selectImage(e,s){this.selectedSession=e,this.selectedImage=s},closeModal(){this.selectedSession=null,this.selectedImage=null},deleteSession(e){confirm("Delete this entire mutation session?")&&(l["a"].deleteSession(e),this.loadSessions())},deleteImage(e,s){confirm("Delete this image?")&&(l["a"].deleteImage(e,s),this.loadSessions())},deleteAndClose(){this.selectedImage&&this.selectedSession&&(l["a"].deleteImage(this.selectedSession.id,this.selectedImage.id),this.closeModal(),this.loadSessions())},confirmClearAll(){confirm("Delete ALL saved images? This cannot be undone.")&&(l["a"].clearAll(),this.loadSessions())},loadIntoEvolve(){sessionStorage.setItem("picbreeder_load_genome",JSON.stringify(this.selectedImage.genome)),this.$router.push("/evolve")},downloadImage(){const e=document.createElement("a");e.download=`picbreeder-${this.selectedImage.id}.png`,e.href=this.selectedImage.thumbnail,e.click()},copyGenome(){const e=JSON.stringify(this.selectedImage.genome,null,2);navigator.clipboard.writeText(e).then(()=>{alert("Genome JSON copied to clipboard!")})}}},d=c,r=(t("65f1"),t("2877")),m=Object(r["a"])(d,i,a,!1,null,"768f4ee7",null);s["default"]=m.exports}}]);
//# sourceMappingURL=history.06d3d3df.js.map