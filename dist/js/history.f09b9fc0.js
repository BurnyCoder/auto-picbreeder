(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["history"],{"1e5a":function(e,t,s){"use strict";var n=s("23e7"),r=s("9961"),i=s("5320"),o=s("dad2"),a=!o("symmetricDifference")||!i("symmetricDifference");n({target:"Set",proto:!0,real:!0,forced:a},{symmetricDifference:r})},"1e70":function(e,t,s){"use strict";var n=s("23e7"),r=s("a5f7"),i=s("d039"),o=s("dad2"),a=!o("difference",(function(e){return 0===e.size})),c=a||i((function(){var e={size:1,has:function(){return!0},keys:function(){var e=0;return{next:function(){var s=e++>1;return t.has(1)&&t.clear(),{done:s,value:2}}}}},t=new Set([1,2,3,4]);return 3!==t.difference(e).size}));n({target:"Set",proto:!0,real:!0,forced:c},{difference:r})},"24e0":function(e,t,s){"use strict";s("83cf")},"271a":function(e,t,s){"use strict";var n=s("cb2d"),r=s("e330"),i=s("577e"),o=s("d6d6"),a=URLSearchParams,c=a.prototype,u=r(c.getAll),l=r(c.has),d=new a("a=1");!d.has("a",2)&&d.has("a",void 0)||n(c,"has",(function(e){var t=arguments.length,s=t<2?void 0:arguments[1];if(t&&void 0===s)return l(this,e);var n=u(this,e);o(t,1);var r=i(s),a=0;while(a<n.length)if(n[a++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},"384f":function(e,t,s){"use strict";var n=s("e330"),r=s("5388"),i=s("cb27"),o=i.Set,a=i.proto,c=n(a.forEach),u=n(a.keys),l=u(new o).next;e.exports=function(e,t,s){return s?r({iterator:u(e),next:l},t):c(e,t)}},"395e":function(e,t,s){"use strict";var n=s("dc19"),r=s("cb27").has,i=s("8e16"),o=s("7f65"),a=s("5388"),c=s("2a62");e.exports=function(e){var t=n(this),s=o(e);if(i(t)<s.size)return!1;var u=s.getIterator();return!1!==a(u,(function(e){if(!r(t,e))return c(u,"normal",!1)}))}},5320:function(e,t,s){"use strict";e.exports=function(e){try{var t=new Set,s={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return t.clear(),t.add(4),function(){return{done:!0}}}})}},n=t[e](s);return 1===n.size&&4===n.values().next().value}catch(r){return!1}}},5388:function(e,t,s){"use strict";var n=s("c65b");e.exports=function(e,t,s){var r,i,o=s?e:e.iterator,a=e.next;while(!(r=n(a,o)).done)if(i=t(r.value),void 0!==i)return i}},5494:function(e,t,s){"use strict";var n=s("83ab"),r=s("e330"),i=s("edd0"),o=URLSearchParams.prototype,a=r(o.forEach);n&&!("size"in o)&&i(o,"size",{get:function(){var e=0;return a(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"68df":function(e,t,s){"use strict";var n=s("dc19"),r=s("8e16"),i=s("384f"),o=s("7f65");e.exports=function(e){var t=n(this),s=o(e);return!(r(t)>s.size)&&!1!==i(t,(function(e){if(!s.includes(e))return!1}),!0)}},"72c3":function(e,t,s){"use strict";var n=s("23e7"),r=s("e9bc"),i=s("5320"),o=s("dad2"),a=!o("union")||!i("union");n({target:"Set",proto:!0,real:!0,forced:a},{union:r})},"79a4":function(e,t,s){"use strict";var n=s("23e7"),r=s("d039"),i=s("953b"),o=s("dad2"),a=!o("intersection",(function(e){return 2===e.size&&e.has(1)&&e.has(2)}))||r((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));n({target:"Set",proto:!0,real:!0,forced:a},{intersection:i})},"7f65":function(e,t,s){"use strict";var n=s("59ed"),r=s("825a"),i=s("c65b"),o=s("5926"),a=s("46c4"),c="Invalid size",u=RangeError,l=TypeError,d=Math.max,f=function(e,t){this.set=e,this.size=d(t,0),this.has=n(e.has),this.keys=n(e.keys)};f.prototype={getIterator:function(){return a(r(i(this.keys,this.set)))},includes:function(e){return i(this.has,this.set,e)}},e.exports=function(e){r(e);var t=+e.size;if(t!==t)throw new l(c);var s=o(t);if(s<0)throw new u(c);return new f(e,s)}},"83b9":function(e,t,s){"use strict";var n=s("cb27"),r=s("384f"),i=n.Set,o=n.add;e.exports=function(e){var t=new i;return r(e,(function(e){o(t,e)})),t}},"83cf":function(e,t,s){},"88a7":function(e,t,s){"use strict";var n=s("cb2d"),r=s("e330"),i=s("577e"),o=s("d6d6"),a=URLSearchParams,c=a.prototype,u=r(c.append),l=r(c["delete"]),d=r(c.forEach),f=r([].push),v=new a("a=1&a=2&b=3");v["delete"]("a",1),v["delete"]("b",void 0),v+""!=="a=2"&&n(c,"delete",(function(e){var t=arguments.length,s=t<2?void 0:arguments[1];if(t&&void 0===s)return l(this,e);var n=[];d(this,(function(e,t){f(n,{key:t,value:e})})),o(t,1);var r,a=i(e),c=i(s),v=0,m=0,h=!1,g=n.length;while(v<g)r=n[v++],h||r.key===a?(h=!0,l(this,r.key)):m++;while(m<g)r=n[m++],r.key===a&&r.value===c||u(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},"8b00":function(e,t,s){"use strict";var n=s("23e7"),r=s("68df"),i=s("dad2"),o=!i("isSubsetOf",(function(e){return e}));n({target:"Set",proto:!0,real:!0,forced:o},{isSubsetOf:r})},"8e16":function(e,t,s){"use strict";var n=s("7282"),r=s("cb27");e.exports=n(r.proto,"size","get")||function(e){return e.size}},"953b":function(e,t,s){"use strict";var n=s("dc19"),r=s("cb27"),i=s("8e16"),o=s("7f65"),a=s("384f"),c=s("5388"),u=r.Set,l=r.add,d=r.has;e.exports=function(e){var t=n(this),s=o(e),r=new u;return i(t)>s.size?c(s.getIterator(),(function(e){d(t,e)&&l(r,e)})):a(t,(function(e){s.includes(e)&&l(r,e)})),r}},9961:function(e,t,s){"use strict";var n=s("dc19"),r=s("cb27"),i=s("83b9"),o=s("7f65"),a=s("5388"),c=r.add,u=r.has,l=r.remove;e.exports=function(e){var t=n(this),s=o(e).getIterator(),r=i(t);return a(s,(function(e){u(t,e)?l(r,e):c(r,e)})),r}},a4e7:function(e,t,s){"use strict";var n=s("23e7"),r=s("395e"),i=s("dad2"),o=!i("isSupersetOf",(function(e){return!e}));n({target:"Set",proto:!0,real:!0,forced:o},{isSupersetOf:r})},a5f7:function(e,t,s){"use strict";var n=s("dc19"),r=s("cb27"),i=s("83b9"),o=s("8e16"),a=s("7f65"),c=s("384f"),u=s("5388"),l=r.has,d=r.remove;e.exports=function(e){var t=n(this),s=a(e),r=i(t);return o(t)<=s.size?c(t,(function(e){s.includes(e)&&d(r,e)})):u(s.getIterator(),(function(e){l(r,e)&&d(r,e)})),r}},b4bc:function(e,t,s){"use strict";var n=s("dc19"),r=s("cb27").has,i=s("8e16"),o=s("7f65"),a=s("384f"),c=s("5388"),u=s("2a62");e.exports=function(e){var t=n(this),s=o(e);if(i(t)<=s.size)return!1!==a(t,(function(e){if(s.includes(e))return!1}),!0);var l=s.getIterator();return!1!==c(l,(function(e){if(r(t,e))return u(l,"normal",!1)}))}},c1a18:function(e,t,s){"use strict";var n=s("23e7"),r=s("b4bc"),i=s("dad2"),o=!i("isDisjointFrom",(function(e){return!e}));n({target:"Set",proto:!0,real:!0,forced:o},{isDisjointFrom:r})},cb27:function(e,t,s){"use strict";var n=s("e330"),r=Set.prototype;e.exports={Set:Set,add:n(r.add),has:n(r.has),remove:n(r["delete"]),proto:r}},d6d6:function(e,t,s){"use strict";var n=TypeError;e.exports=function(e,t){if(e<t)throw new n("Not enough arguments");return e}},dad2:function(e,t,s){"use strict";var n=s("d066"),r=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},i=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};e.exports=function(e,t){var s=n("Set");try{(new s)[e](r(0));try{return(new s)[e](r(-1)),!1}catch(a){if(!t)return!0;try{return(new s)[e](i(-1/0)),!1}catch(c){var o=new s([1,2]);return t(o[e](i(1/0)))}}}catch(c){return!1}}},dc19:function(e,t,s){"use strict";var n=s("cb27").has;e.exports=function(e){return n(e),e}},e4bb:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"history"},[t("NavBar"),t("div",{staticClass:"history-container"},[t("h2",[e._v("Evolution History")]),e.stats.sessionCount>0?t("p",{staticClass:"history-stats"},[e._v(" "+e._s(e.stats.sessionCount)+" mutation sessions, "+e._s(e.stats.imageCount)+" total images ("+e._s(e.stats.sizeKB)+"KB used) ")]):e._e(),t("div",{staticClass:"history-controls"},[t("button",{staticClass:"btn btn-primary btn-sm",on:{click:e.exportToFile}},[e._v(" Export to File ")]),t("label",{staticClass:"btn btn-secondary btn-sm import-btn"},[e._v(" Import from File "),t("input",{attrs:{type:"file",accept:".json",hidden:""},on:{change:e.importFromFile}})]),e.sessions.length>0?t("button",{staticClass:"btn btn-danger btn-sm",on:{click:e.confirmClearAll}},[e._v(" Clear All History ")]):e._e()]),e.sessions.length>0?t("div",{staticClass:"sessions-list"},e._l(e.sessions,(function(s){return t("div",{key:s.id,staticClass:"session-card"},[t("div",{staticClass:"session-header"},[t("span",{staticClass:"session-date"},[e._v(e._s(e.formatDateTime(s.timestamp)))]),t("span",{staticClass:"session-count"},[e._v(e._s(s.images.length)+" parent"+e._s(s.images.length>1?"s":""))]),t("button",{staticClass:"delete-session-btn",on:{click:function(t){return e.deleteSession(s.id)}}},[e._v("Delete Session")])]),t("div",{staticClass:"session-images"},e._l(s.images,(function(n){return t("div",{key:n.id,staticClass:"session-image",on:{click:function(t){return e.selectImage(s,n)}}},[t("img",{attrs:{src:n.thumbnail,alt:"Parent image"}}),t("button",{staticClass:"delete-img-btn",on:{click:function(t){return t.stopPropagation(),e.deleteImage(s.id,n.id)}}},[e._v("x")])])})),0)])})),0):t("div",{staticClass:"history-empty"},[t("p",[e._v("No saved images yet.")]),t("p",[e._v("Select images in the "),t("router-link",{attrs:{to:"/evolve"}},[e._v("Evolve")]),e._v(' page and click "mutate" to save them automatically.')],1)]),e.selectedImage?t("div",{staticClass:"history-modal",on:{click:function(t){return t.target!==t.currentTarget?null:e.closeModal.apply(null,arguments)}}},[t("div",{staticClass:"modal-content"},[t("button",{staticClass:"close-btn",on:{click:e.closeModal}},[e._v("x")]),t("img",{staticClass:"modal-image",attrs:{src:e.selectedImage.thumbnail}}),t("div",{staticClass:"modal-info"},[t("p",[t("strong",[e._v("Session:")]),e._v(" "+e._s(e.formatDateTime(e.selectedSession.timestamp)))]),t("p",[t("strong",[e._v("Image ID:")]),e._v(" "+e._s(e.selectedImage.id))])]),t("div",{staticClass:"modal-actions"},[t("button",{staticClass:"btn btn-success",on:{click:e.loadIntoEvolve}},[e._v(" Load into Evolve ")]),t("button",{staticClass:"btn btn-info",on:{click:e.downloadImage}},[e._v(" Download PNG ")]),t("button",{staticClass:"btn btn-secondary",on:{click:e.copyGenome}},[e._v(" Copy Genome JSON ")]),t("button",{staticClass:"btn btn-danger",on:{click:e.deleteAndClose}},[e._v(" Delete ")])])])]):e._e()]),t("Footer")],1)},r=[],i=(s("14d9"),s("e9f5"),s("910d"),s("ab43"),s("e9c4"),s("1e70"),s("79a4"),s("c1a18"),s("8b00"),s("a4e7"),s("1e5a"),s("72c3"),s("5087"),s("88a7"),s("271a"),s("5494"),s("d000")),o=s("fd2d"),a=s("05e5"),c={name:"History",components:{NavBar:i["a"],Footer:o["a"]},data(){return{sessions:[],stats:{sessionCount:0,imageCount:0,sizeKB:0},selectedSession:null,selectedImage:null}},mounted(){this.loadSessions()},methods:{loadSessions(){this.sessions=a["a"].getAll(),this.stats=a["a"].getStats()},formatDate(e){return new Date(e).toLocaleDateString()},formatDateTime(e){return new Date(e).toLocaleString()},selectImage(e,t){this.selectedSession=e,this.selectedImage=t},closeModal(){this.selectedSession=null,this.selectedImage=null},deleteSession(e){confirm("Delete this entire mutation session?")&&(a["a"].deleteSession(e),this.loadSessions())},deleteImage(e,t){confirm("Delete this image?")&&(a["a"].deleteImage(e,t),this.loadSessions())},deleteAndClose(){this.selectedImage&&this.selectedSession&&(a["a"].deleteImage(this.selectedSession.id,this.selectedImage.id),this.closeModal(),this.loadSessions())},confirmClearAll(){confirm("Delete ALL saved images? This cannot be undone.")&&(a["a"].clearAll(),this.loadSessions())},loadIntoEvolve(){sessionStorage.setItem("picbreeder_load_genome",JSON.stringify(this.selectedImage.genome)),this.$router.push("/evolve")},downloadImage(){const e=document.createElement("a");e.download=`picbreeder-${this.selectedImage.id}.png`,e.href=this.selectedImage.thumbnail,e.click()},copyGenome(){const e=JSON.stringify(this.selectedImage.genome,null,2);navigator.clipboard.writeText(e).then(()=>{alert("Genome JSON copied to clipboard!")})},exportToFile(){const e=a["a"].getAll(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),n=document.createElement("a");n.download=`picbreeder-history-${(new Date).toISOString().slice(0,10)}.json`,n.href=s,n.click(),URL.revokeObjectURL(s)},importFromFile(e){const t=e.target.files[0];if(!t)return;const s=new FileReader;s.onload=e=>{try{const t=JSON.parse(e.target.result);if(!Array.isArray(t))return void alert("Invalid file format");const s=t.filter(e=>e&&e.id&&e.timestamp&&Array.isArray(e.images));if(0===s.length)return void alert("No valid sessions found in file");const n=a["a"].getAll(),r=new Set(n.map(e=>e.id)),i=s.filter(e=>!r.has(e.id)),o=[...i,...n];o.sort((e,t)=>t.timestamp-e.timestamp),localStorage.setItem("picbreeder_history",JSON.stringify(o)),this.loadSessions(),alert(`Imported ${i.length} new session(s)`)}catch(t){alert("Error reading file: "+t.message)}},s.readAsText(t),e.target.value=""}}},u=c,l=(s("24e0"),s("2877")),d=Object(l["a"])(u,n,r,!1,null,"e031ea14",null);t["default"]=d.exports},e9bc:function(e,t,s){"use strict";var n=s("dc19"),r=s("cb27").add,i=s("83b9"),o=s("7f65"),a=s("5388");e.exports=function(e){var t=n(this),s=o(e).getIterator(),c=i(t);return a(s,(function(e){r(c,e)})),c}}}]);
//# sourceMappingURL=history.f09b9fc0.js.map