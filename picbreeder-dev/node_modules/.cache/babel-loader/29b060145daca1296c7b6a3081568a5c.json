{"remainingRequest":"/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/node_modules/babel-loader/lib/index.js!/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/src/lib/recurrent.js","dependencies":[{"path":"/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/src/lib/recurrent.js","mtime":1766857470851},{"path":"/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/babel.config.js","mtime":1766857498915},{"path":"/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/node_modules/cache-loader/dist/cjs.js","mtime":1766857611540},{"path":"/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/node_modules/babel-loader/lib/index.js","mtime":1766857611782}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuZGV0YWNoZWQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LWJ1ZmZlci50cmFuc2Zlci5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXktYnVmZmVyLnRyYW5zZmVyLXRvLWZpeGVkLWxlbmd0aC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuYXQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtbGFzdC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1sYXN0LWluZGV4LmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXJldmVyc2VkLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1zb3J0ZWQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LndpdGguanMiKTsKLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi8KLy8gTUlUIExpY2Vuc2UKCi8vIGhlYXZpbHkgbW9kaWZpZWQgcmVjdXJyZW50LmpzIGxpYnJhcnkgZm9yIHVzZSBpbiBnZW5ldGljIGFydAovLyB3aXRoIERDVCBjb21wcmVzc2lvbiwgQ29TeU5lIG5ldXJvZXZvbHV0aW9uCi8vIHNpbiwgY29zLCBnYXVzc2lhbiwgYWJzIGFjdGl2YXRpb25zCnZhciBSID0ge307CihmdW5jdGlvbiAoZ2xvYmFsKSB7CiAgInVzZSBzdHJpY3QiOwoKICAvLyBVdGlsaXR5IGZ1bgogIGZ1bmN0aW9uIGFzc2VydChjb25kaXRpb24sIG1lc3NhZ2UpIHsKICAgIC8vIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNTMxMzQxOC9qYXZhc2NyaXB0LWFzc2VydAogICAgaWYgKCFjb25kaXRpb24pIHsKICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgfHwgIkFzc2VydGlvbiBmYWlsZWQiOwogICAgICBpZiAodHlwZW9mIEVycm9yICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTsKICAgICAgfQogICAgICB0aHJvdyBtZXNzYWdlOyAvLyBGYWxsYmFjawogICAgfQogIH0KCiAgLy8gUmFuZG9tIG51bWJlcnMgdXRpbHMKICB2YXIgcmV0dXJuX3YgPSBmYWxzZTsKICB2YXIgdl92YWwgPSAwLjA7CiAgdmFyIGdhdXNzUmFuZG9tID0gZnVuY3Rpb24gKCkgewogICAgaWYgKHJldHVybl92KSB7CiAgICAgIHJldHVybl92ID0gZmFsc2U7CiAgICAgIHJldHVybiB2X3ZhbDsKICAgIH0KICAgIHZhciB1ID0gMiAqIE1hdGgucmFuZG9tKCkgLSAxOwogICAgdmFyIHYgPSAyICogTWF0aC5yYW5kb20oKSAtIDE7CiAgICB2YXIgciA9IHUgKiB1ICsgdiAqIHY7CiAgICBpZiAociA9PT0gMCB8fCByID4gMSkgcmV0dXJuIGdhdXNzUmFuZG9tKCk7CiAgICB2YXIgYyA9IE1hdGguc3FydCgtMiAqIE1hdGgubG9nKHIpIC8gcik7CiAgICB2X3ZhbCA9IHYgKiBjOyAvLyBjYWNoZSB0aGlzCiAgICByZXR1cm5fdiA9IHRydWU7CiAgICByZXR1cm4gdSAqIGM7CiAgfTsKICB2YXIgcmFuZGYgPSBmdW5jdGlvbiAoYSwgYikgewogICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAoYiAtIGEpICsgYTsKICB9OwogIHZhciByYW5kaSA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGIgLSBhKSArIGEpOwogIH07CiAgdmFyIHJhbmRuID0gZnVuY3Rpb24gKG11LCBzdGQpIHsKICAgIHJldHVybiBtdSArIGdhdXNzUmFuZG9tKCkgKiBzdGQ7CiAgfTsKCiAgLy8gaGVscGVyIGZ1bmN0aW9uIHJldHVybnMgYXJyYXkgb2YgemVyb3Mgb2YgbGVuZ3RoIG4KICAvLyBhbmQgdXNlcyB0eXBlZCBhcnJheXMgaWYgYXZhaWxhYmxlCiAgdmFyIHplcm9zID0gZnVuY3Rpb24gKG4pIHsKICAgIGlmICh0eXBlb2YgbiA9PT0gJ3VuZGVmaW5lZCcgfHwgaXNOYU4obikpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgLy8gbGFja2luZyBicm93c2VyIHN1cHBvcnQKICAgICAgdmFyIGFyciA9IG5ldyBBcnJheShuKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICBhcnJbaV0gPSAwOwogICAgICB9CiAgICAgIHJldHVybiBhcnI7CiAgICB9IGVsc2UgewogICAgICBpZiAobiA+IDE1MDAwMCkgY29uc29sZS5sb2coJ2NyZWF0aW5nIGEgZmxvYXQgYXJyYXkgb2YgbGVuZ3RoID0gJyArIG4pOwogICAgICAvL3JldHVybiBuZXcgRmxvYXQ2NEFycmF5KG4pOwogICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShuKTsKICAgIH0KICB9OwogIHZhciBjb3B5ID0gZnVuY3Rpb24gKGZsb2F0QXJyYXkpIHsKICAgIC8vIHJldHVybnMgYSBjb3B5IG9mIGZsb2F0QXJyYXkKICAgIHZhciBuID0gZmxvYXRBcnJheS5sZW5ndGg7CiAgICB2YXIgcmVzdWx0ID0gemVyb3Mobik7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICByZXN1bHRbaV0gPSBmbG9hdEFycmF5W2ldOwogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9OwogIHZhciBzaHVmZmxlID0gZnVuY3Rpb24gKG9yaWdBcnJheSkgewogICAgLy8gcmV0dXJucyBhIG5ld0FycmF5IHdoaWNoIGlzIGEgc2h1ZmZsZWQgdmVyc2lvbiBvZiBvcmlnQXJyYXkKICAgIHZhciBpLCByYW5kb21JbmRleDsKICAgIHZhciB0ZW1wOwogICAgdmFyIE4gPSBvcmlnQXJyYXkubGVuZ3RoOwogICAgdmFyIHJlc3VsdCA9IHplcm9zKE4pOwogICAgZm9yIChpID0gMDsgaSA8IE47IGkrKykgewogICAgICByZXN1bHRbaV0gPSBvcmlnQXJyYXlbaV07CiAgICB9CiAgICBmb3IgKGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgIC8vIHN3YXBzIGkgd2l0aCByYW5kb21JbmRleAogICAgICByYW5kb21JbmRleCA9IHJhbmRpKDAsIE4pOwogICAgICB0ZW1wID0gcmVzdWx0W3JhbmRvbUluZGV4XTsKICAgICAgcmVzdWx0W3JhbmRvbUluZGV4XSA9IHJlc3VsdFtpXTsKICAgICAgcmVzdWx0W2ldID0gdGVtcDsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgLy8gTWF0IGhvbGRzIGEgbWF0cml4CiAgdmFyIE1hdCA9IGZ1bmN0aW9uIChuLCBkKSB7CiAgICAvLyBuIGlzIG51bWJlciBvZiByb3dzIGQgaXMgbnVtYmVyIG9mIGNvbHVtbnMKICAgIHRoaXMubiA9IG47CiAgICB0aGlzLmQgPSBkOwogICAgdGhpcy53ID0gemVyb3MobiAqIGQpOwogICAgdGhpcy5kdyA9IHplcm9zKG4gKiBkKTsKICB9OwogIE1hdC5wcm90b3R5cGUgPSB7CiAgICBnZXQ6IGZ1bmN0aW9uIChyb3csIGNvbCkgewogICAgICAvLyBzbG93IGJ1dCBjYXJlZnVsIGFjY2Vzc29yIGZ1bmN0aW9uCiAgICAgIC8vIHdlIHdhbnQgcm93LW1ham9yIG9yZGVyCiAgICAgIHZhciBpeCA9IHRoaXMuZCAqIHJvdyArIGNvbDsKICAgICAgYXNzZXJ0KGl4ID49IDAgJiYgaXggPCB0aGlzLncubGVuZ3RoKTsKICAgICAgcmV0dXJuIHRoaXMud1tpeF07CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiAocm93LCBjb2wsIHYpIHsKICAgICAgLy8gc2xvdyBidXQgY2FyZWZ1bCBhY2Nlc3NvciBmdW5jdGlvbgogICAgICB2YXIgaXggPSB0aGlzLmQgKiByb3cgKyBjb2w7CiAgICAgIGFzc2VydChpeCA+PSAwICYmIGl4IDwgdGhpcy53Lmxlbmd0aCk7CiAgICAgIHRoaXMud1tpeF0gPSB2OwogICAgfSwKICAgIHNldEZyb21BcnJheTogZnVuY3Rpb24gKGEpIHsKICAgICAgdmFyIGksIGo7CiAgICAgIGFzc2VydCh0aGlzLm4gPT09IGEubGVuZ3RoICYmIHRoaXMuZCA9PT0gYVswXS5sZW5ndGgpOwogICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5uOyBpKyspIHsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGhpcy5kOyBqKyspIHsKICAgICAgICAgIHRoaXMuc2V0KGksIGosIGFbaV1bal0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNvcHk6IGZ1bmN0aW9uICgpIHsKICAgICAgLy8gcmV0dXJuIGEgY29weSBvZiBNYXQKICAgICAgdmFyIHJlc3VsdCA9IG5ldyBNYXQodGhpcy5uLCB0aGlzLmQpOwogICAgICB2YXIgaSwgbGVuOwogICAgICBsZW4gPSB0aGlzLm4gKiB0aGlzLmQ7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIHJlc3VsdC53W2ldID0gdGhpcy53W2ldOwogICAgICAgIHJlc3VsdC5kd1tpXSA9IHRoaXMuZHdbaV07CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICB0b1N0cmluZzogZnVuY3Rpb24gKHByZWNpc2lvbl8pIHsKICAgICAgdmFyIHJlc3VsdF93ID0gJ1snOwogICAgICB2YXIgaSwgajsKICAgICAgdmFyIG4sIGQ7CiAgICAgIHZhciBpeDsKICAgICAgdmFyIHByZWNpc2lvbiA9IDEwZS00IHx8IHByZWNpc2lvbl87CiAgICAgIHByZWNpc2lvbiA9IDEgLyBwcmVjaXNpb247CiAgICAgIG4gPSB0aGlzLm47CiAgICAgIGQgPSB0aGlzLmQ7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgZDsgaisrKSB7CiAgICAgICAgICBpeCA9IGkgKiBkICsgajsKICAgICAgICAgIGFzc2VydChpeCA+PSAwICYmIGl4IDwgdGhpcy53Lmxlbmd0aCk7CiAgICAgICAgICByZXN1bHRfdyArPSAnJyArIE1hdGgucm91bmQocHJlY2lzaW9uICogdGhpcy53W2l4XSkgLyBwcmVjaXNpb24gKyAnLFx0JzsKICAgICAgICB9CiAgICAgICAgcmVzdWx0X3cgKz0gJ1xuJzsKICAgICAgfQogICAgICByZXN1bHRfdyArPSAnXSc7CiAgICAgIHJldHVybiByZXN1bHRfdzsKICAgIH0sCiAgICBwcmludDogZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLnRvU3RyaW5nKCkpOwogICAgfSwKICAgIGRjdDI6IGZ1bmN0aW9uICgpIHsKICAgICAgLy8gaW5lZmZpY2llbnQgaW1wbGVtZW50YXRpb24gb2YgZGlzY3JldGUgY29zaW5lIHRyYW5zZm9ybSAoMmQpCiAgICAgIC8vIHJlZjogaHR0cDovL3d3dy5tYXRod29ya3MuY29tL2hlbHAvaW1hZ2VzL3JlZi9kY3QyLmh0bWwKICAgICAgdmFyIG4gPSB0aGlzLm47CiAgICAgIHZhciBkID0gdGhpcy5kOwogICAgICB2YXIgQiA9IG5ldyBNYXQobiwgZCk7IC8vIHJlc3VsdGluZyBtYXRyaXgKICAgICAgdmFyIGksIGosIGssIGw7CiAgICAgIHZhciB0ZW1wOwogICAgICBmb3IgKGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IGQ7IGorKykgewogICAgICAgICAgdGVtcCA9IDA7CiAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICAgIGZvciAobCA9IDA7IGwgPCBkOyBsKyspIHsKICAgICAgICAgICAgICB0ZW1wID0gdGVtcCArIHRoaXMud1trICogZCArIGxdICogTWF0aC5jb3MoaSAqIE1hdGguUEkgKiAoMiAqIGsgKyAxKSAvICgyICogbikpICogTWF0aC5jb3MoaiAqIE1hdGguUEkgKiAoMiAqIGwgKyAxKSAvICgyICogZCkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaSA9PT0gMCAmJiBqICE9PSAwKSB0ZW1wICo9IDEgLyBNYXRoLlNRUlQyOwogICAgICAgICAgaWYgKGogPT09IDAgJiYgaSAhPT0gMCkgdGVtcCAqPSAxIC8gTWF0aC5TUVJUMjsKICAgICAgICAgIGlmIChqID09PSAwICYmIGkgPT09IDApIHRlbXAgKj0gMC41OwogICAgICAgICAgQi53W2kgKiBkICsgal0gPSB0ZW1wICogMiAvIE1hdGguc3FydChuICogZCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBCOwogICAgfSwKICAgIGlkY3QyOiBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIGluZWZmaWNpZW50IGltcGxlbWVudGF0aW9uIG9mIGludmVyc2UgZGlzY3JldGUgY29zaW5lIHRyYW5zZm9ybSAoMmQpCiAgICAgIC8vIHJlZjogaHR0cDovL3d3dy5tYXRod29ya3MuY29tL2hlbHAvaW1hZ2VzL3JlZi9pZGN0Mi5odG1sCiAgICAgIHZhciBuID0gdGhpcy5uOwogICAgICB2YXIgZCA9IHRoaXMuZDsKICAgICAgdmFyIEEgPSBuZXcgTWF0KG4sIGQpOyAvLyByZXN1bHRpbmcgbWF0cml4CiAgICAgIHZhciBpLCBqLCBrLCBsOwogICAgICB2YXIgdGVtcDsKICAgICAgZm9yIChpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCBkOyBqKyspIHsKICAgICAgICAgIEEud1tpICogZCArIGpdID0gMDsKICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgICAgZm9yIChsID0gMDsgbCA8IGQ7IGwrKykgewogICAgICAgICAgICAgIHRlbXAgPSB0aGlzLndbayAqIGQgKyBsXSAqIE1hdGguY29zKCgyICogaSArIDEpICogayAqIE1hdGguUEkgLyAoMiAqIG4pKSAqIE1hdGguY29zKCgyICogaiArIDEpICogbCAqIE1hdGguUEkgLyAoMiAqIGQpKTsKICAgICAgICAgICAgICBpZiAoayA9PT0gMCAmJiBsID09PSAwKSB0ZW1wICo9IDAuNTsKICAgICAgICAgICAgICBpZiAoayAhPT0gMCAmJiBsID09PSAwKSB0ZW1wICo9IDEgLyBNYXRoLlNRUlQyOwogICAgICAgICAgICAgIGlmIChrID09PSAwICYmIGwgIT09IDApIHRlbXAgKj0gMSAvIE1hdGguU1FSVDI7CiAgICAgICAgICAgICAgQS53W2kgKiBkICsgal0gKz0gdGVtcCAqIDIgLyBNYXRoLnNxcnQobiAqIGQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBBOwogICAgfSwKICAgIHRvSlNPTjogZnVuY3Rpb24gKCkgewogICAgICB2YXIganNvbiA9IHt9OwogICAgICBqc29uLm4gPSB0aGlzLm47CiAgICAgIGpzb24uZCA9IHRoaXMuZDsKICAgICAganNvbi53ID0gdGhpcy53OwogICAgICByZXR1cm4ganNvbjsKICAgIH0sCiAgICBmcm9tSlNPTjogZnVuY3Rpb24gKGpzb24pIHsKICAgICAgdGhpcy5uID0ganNvbi5uOwogICAgICB0aGlzLmQgPSBqc29uLmQ7CiAgICAgIHRoaXMudyA9IHplcm9zKHRoaXMubiAqIHRoaXMuZCk7CiAgICAgIHRoaXMuZHcgPSB6ZXJvcyh0aGlzLm4gKiB0aGlzLmQpOwogICAgICBmb3IgKHZhciBpID0gMCwgbiA9IHRoaXMubiAqIHRoaXMuZDsgaSA8IG47IGkrKykgewogICAgICAgIHRoaXMud1tpXSA9IGpzb24ud1tpXTsgLy8gY29weSBvdmVyIHdlaWdodHMKICAgICAgfQogICAgfQogIH07CgogIC8vIHJldHVybiBNYXQgYnV0IGZpbGxlZCB3aXRoIHJhbmRvbSBudW1iZXJzIGZyb20gZ2F1c3NpYW4KICB2YXIgUmFuZE1hdCA9IGZ1bmN0aW9uIChuLCBkLCBtdSwgc3RkKSB7CiAgICB2YXIgbSA9IG5ldyBNYXQobiwgZCk7CiAgICBmaWxsUmFuZG4obSwgbXUgfHwgMCwgc3RkIHx8IDAuMDgpOyAvLyBraW5kIG9mIDpQCiAgICByZXR1cm4gbTsKICB9OwoKICAvLyBNYXQgdXRpbHMKICAvLyBmaWxsIG1hdHJpeCB3aXRoIHJhbmRvbSBnYXVzc2lhbiBudW1iZXJzCiAgdmFyIGZpbGxSYW5kbiA9IGZ1bmN0aW9uIChtLCBtdSwgc3RkKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbiA9IG0udy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgbS53W2ldID0gcmFuZG4obXUsIHN0ZCk7CiAgICB9CiAgfTsKICB2YXIgZmlsbFJhbmQgPSBmdW5jdGlvbiAobSwgbG8sIGhpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbiA9IG0udy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgbS53W2ldID0gcmFuZGYobG8sIGhpKTsKICAgIH0KICB9OwoKICAvLyBUcmFuc2Zvcm1lciBkZWZpbml0aW9ucwogIHZhciBHcmFwaCA9IGZ1bmN0aW9uIChuZWVkc19iYWNrcHJvcCkgewogICAgaWYgKHR5cGVvZiBuZWVkc19iYWNrcHJvcCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgbmVlZHNfYmFja3Byb3AgPSB0cnVlOwogICAgfQogICAgdGhpcy5uZWVkc19iYWNrcHJvcCA9IG5lZWRzX2JhY2twcm9wOwoKICAgIC8vIHRoaXMgd2lsbCBzdG9yZSBhIGxpc3Qgb2YgZnVuY3Rpb25zIHRoYXQgcGVyZm9ybSBiYWNrcHJvcCwKICAgIC8vIGluIHRoZWlyIGZvcndhcmQgcGFzcyBvcmRlci4gU28gaW4gYmFja3Byb3Agd2Ugd2lsbCBnbwogICAgLy8gYmFja3dhcmRzIGFuZCBldm9rZSBlYWNoIG9uZQogICAgdGhpcy5iYWNrcHJvcCA9IFtdOwogIH07CiAgR3JhcGgucHJvdG90eXBlID0gewogICAgYmFja3dhcmQ6IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIgaSA9IHRoaXMuYmFja3Byb3AubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLmJhY2twcm9wW2ldKCk7IC8vIHRpY2shCiAgICAgIH0KICAgIH0sCiAgICByb3dQbHVjazogZnVuY3Rpb24gKG0sIGl4KSB7CiAgICAgIC8vIHBsdWNrIGEgcm93IG9mIG0gd2l0aCBpbmRleCBpeCBhbmQgcmV0dXJuIGl0IGFzIGNvbCB2ZWN0b3IKICAgICAgYXNzZXJ0KGl4ID49IDAgJiYgaXggPCBtLm4pOwogICAgICB2YXIgZCA9IG0uZDsKICAgICAgdmFyIG91dCA9IG5ldyBNYXQoZCwgMSk7CiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gZDsgaSA8IG47IGkrKykgewogICAgICAgIG91dC53W2ldID0gbS53W2QgKiBpeCArIGldOwogICAgICB9IC8vIGNvcHkgb3ZlciB0aGUgZGF0YQoKICAgICAgaWYgKHRoaXMubmVlZHNfYmFja3Byb3ApIHsKICAgICAgICB2YXIgYmFja3dhcmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGQ7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgbS5kd1tkICogaXggKyBpXSArPSBvdXQuZHdbaV07CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0aGlzLmJhY2twcm9wLnB1c2goYmFja3dhcmQpOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgc2luOiBmdW5jdGlvbiAobSkgewogICAgICAvLyB0YW5oIG5vbmxpbmVhcml0eQogICAgICB2YXIgb3V0ID0gbmV3IE1hdChtLm4sIG0uZCk7CiAgICAgIHZhciBuID0gbS53Lmxlbmd0aDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICBvdXQud1tpXSA9IE1hdGguc2luKG0ud1tpXSk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmVlZHNfYmFja3Byb3ApIHsKICAgICAgICB2YXIgYmFja3dhcmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICAvLyBncmFkIGZvciB6ID0gc2luKHgpIGlzIGNvcyh4KQogICAgICAgICAgICB2YXIgbXdpID0gb3V0LndbaV07CiAgICAgICAgICAgIG0uZHdbaV0gKz0gTWF0aC5jb3MobS53W2ldKSAqIG91dC5kd1tpXTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRoaXMuYmFja3Byb3AucHVzaChiYWNrd2FyZCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICBjb3M6IGZ1bmN0aW9uIChtKSB7CiAgICAgIC8vIHRhbmggbm9ubGluZWFyaXR5CiAgICAgIHZhciBvdXQgPSBuZXcgTWF0KG0ubiwgbS5kKTsKICAgICAgdmFyIG4gPSBtLncubGVuZ3RoOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgIG91dC53W2ldID0gTWF0aC5jb3MobS53W2ldKTsKICAgICAgfQogICAgICBpZiAodGhpcy5uZWVkc19iYWNrcHJvcCkgewogICAgICAgIHZhciBiYWNrd2FyZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIC8vIGdyYWQgZm9yIHogPSBzaW4oeCkgaXMgY29zKHgpCiAgICAgICAgICAgIHZhciBtd2kgPSBvdXQud1tpXTsKICAgICAgICAgICAgbS5kd1tpXSArPSAtTWF0aC5zaW4obS53W2ldKSAqIG91dC5kd1tpXTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRoaXMuYmFja3Byb3AucHVzaChiYWNrd2FyZCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICBnYXVzc2lhbjogZnVuY3Rpb24gKG0pIHsKICAgICAgLy8gdGFuaCBub25saW5lYXJpdHkKICAgICAgdmFyIG91dCA9IG5ldyBNYXQobS5uLCBtLmQpOwogICAgICB2YXIgbiA9IG0udy5sZW5ndGg7CiAgICAgIC8vdmFyIGMgPSAoMS4wL01hdGguc3FydCgyKk1hdGguUEkpKTsgLy8gY29uc3RhbnQgb2YgMSAvIHNxcnQoMipwaSkKICAgICAgdmFyIGMgPSAxLjA7IC8vIG1ha2UgYW1wbGl0dWRlIGJpZ2dlciB0aGFuIG5vcm1hbCBnYXVzc2lhbgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgIG91dC53W2ldID0gYyAqIE1hdGguZXhwKC1tLndbaV0gKiBtLndbaV0gLyAyKTsKICAgICAgfQogICAgICBpZiAodGhpcy5uZWVkc19iYWNrcHJvcCkgewogICAgICAgIHZhciBiYWNrd2FyZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIC8vIGdyYWQgZm9yIHogPSBzaW4oeCkgaXMgY29zKHgpCiAgICAgICAgICAgIHZhciBtd2kgPSBvdXQud1tpXTsKICAgICAgICAgICAgbS5kd1tpXSArPSAtbS53W2ldICogbXdpICogb3V0LmR3W2ldOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdGhpcy5iYWNrcHJvcC5wdXNoKGJhY2t3YXJkKTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfSwKICAgIHRhbmg6IGZ1bmN0aW9uIChtKSB7CiAgICAgIC8vIHRhbmggbm9ubGluZWFyaXR5CiAgICAgIHZhciBvdXQgPSBuZXcgTWF0KG0ubiwgbS5kKTsKICAgICAgdmFyIG4gPSBtLncubGVuZ3RoOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgIG91dC53W2ldID0gTWF0aC50YW5oKG0ud1tpXSk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmVlZHNfYmFja3Byb3ApIHsKICAgICAgICB2YXIgYmFja3dhcmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICAvLyBncmFkIGZvciB6ID0gdGFuaCh4KSBpcyAoMSAtIHpeMikKICAgICAgICAgICAgdmFyIG13aSA9IG91dC53W2ldOwogICAgICAgICAgICBtLmR3W2ldICs9ICgxLjAgLSBtd2kgKiBtd2kpICogb3V0LmR3W2ldOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdGhpcy5iYWNrcHJvcC5wdXNoKGJhY2t3YXJkKTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfSwKICAgIHNpZ21vaWQ6IGZ1bmN0aW9uIChtKSB7CiAgICAgIC8vIHNpZ21vaWQgbm9ubGluZWFyaXR5CiAgICAgIHZhciBvdXQgPSBuZXcgTWF0KG0ubiwgbS5kKTsKICAgICAgdmFyIG4gPSBtLncubGVuZ3RoOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgIG91dC53W2ldID0gc2lnKG0ud1tpXSk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmVlZHNfYmFja3Byb3ApIHsKICAgICAgICB2YXIgYmFja3dhcmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICAvLyBncmFkIGZvciB6ID0gc2lnbW9pZCh4KSBpcyB6KDEgLSB6KQogICAgICAgICAgICB2YXIgbXdpID0gb3V0LndbaV07CiAgICAgICAgICAgIG0uZHdbaV0gKz0gbXdpICogKDEuMCAtIG13aSkgKiBvdXQuZHdbaV07CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0aGlzLmJhY2twcm9wLnB1c2goYmFja3dhcmQpOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgcmVsdTogZnVuY3Rpb24gKG0pIHsKICAgICAgdmFyIG91dCA9IG5ldyBNYXQobS5uLCBtLmQpOwogICAgICB2YXIgbiA9IG0udy5sZW5ndGg7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgb3V0LndbaV0gPSBNYXRoLm1heCgwLCBtLndbaV0pOyAvLyByZWx1CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmVlZHNfYmFja3Byb3ApIHsKICAgICAgICB2YXIgYmFja3dhcmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBtLmR3W2ldICs9IG0ud1tpXSA+IDAgPyBvdXQuZHdbaV0gOiAwLjA7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0aGlzLmJhY2twcm9wLnB1c2goYmFja3dhcmQpOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgYWJzOiBmdW5jdGlvbiAobSkgewogICAgICB2YXIgb3V0ID0gbmV3IE1hdChtLm4sIG0uZCk7CiAgICAgIHZhciBuID0gbS53Lmxlbmd0aDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICBvdXQud1tpXSA9IE1hdGguYWJzKG0ud1tpXSk7IC8vIHJlbHUKICAgICAgfQogICAgICBpZiAodGhpcy5uZWVkc19iYWNrcHJvcCkgewogICAgICAgIHZhciBiYWNrd2FyZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIG0uZHdbaV0gKz0gbS53W2ldID4gMCA/IG91dC5kd1tpXSA6IC1vdXQuZHdbaV07CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0aGlzLmJhY2twcm9wLnB1c2goYmFja3dhcmQpOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgbXVsOiBmdW5jdGlvbiAobTEsIG0yKSB7CiAgICAgIC8vIG11bHRpcGx5IG1hdHJpY2VzIG0xICogbTIKICAgICAgYXNzZXJ0KG0xLmQgPT09IG0yLm4sICdtYXRtdWwgZGltZW5zaW9ucyBtaXNhbGlnbmVkJyk7CiAgICAgIHZhciBuID0gbTEubjsKICAgICAgdmFyIGQgPSBtMi5kOwogICAgICB2YXIgb3V0ID0gbmV3IE1hdChuLCBkKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtMS5uOyBpKyspIHsKICAgICAgICAvLyBsb29wIG92ZXIgcm93cyBvZiBtMQogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbTIuZDsgaisrKSB7CiAgICAgICAgICAvLyBsb29wIG92ZXIgY29scyBvZiBtMgogICAgICAgICAgdmFyIGRvdCA9IDAuMDsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbTEuZDsgaysrKSB7CiAgICAgICAgICAgIC8vIGRvdCBwcm9kdWN0IGxvb3AKICAgICAgICAgICAgZG90ICs9IG0xLndbbTEuZCAqIGkgKyBrXSAqIG0yLndbbTIuZCAqIGsgKyBqXTsKICAgICAgICAgIH0KICAgICAgICAgIG91dC53W2QgKiBpICsgal0gPSBkb3Q7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLm5lZWRzX2JhY2twcm9wKSB7CiAgICAgICAgdmFyIGJhY2t3YXJkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtMS5uOyBpKyspIHsKICAgICAgICAgICAgLy8gbG9vcCBvdmVyIHJvd3Mgb2YgbTEKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtMi5kOyBqKyspIHsKICAgICAgICAgICAgICAvLyBsb29wIG92ZXIgY29scyBvZiBtMgogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbTEuZDsgaysrKSB7CiAgICAgICAgICAgICAgICAvLyBkb3QgcHJvZHVjdCBsb29wCiAgICAgICAgICAgICAgICB2YXIgYiA9IG91dC5kd1tkICogaSArIGpdOwogICAgICAgICAgICAgICAgbTEuZHdbbTEuZCAqIGkgKyBrXSArPSBtMi53W20yLmQgKiBrICsgal0gKiBiOwogICAgICAgICAgICAgICAgbTIuZHdbbTIuZCAqIGsgKyBqXSArPSBtMS53W20xLmQgKiBpICsga10gKiBiOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdGhpcy5iYWNrcHJvcC5wdXNoKGJhY2t3YXJkKTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfSwKICAgIGFkZDogZnVuY3Rpb24gKG0xLCBtMikgewogICAgICBhc3NlcnQobTEudy5sZW5ndGggPT09IG0yLncubGVuZ3RoKTsKICAgICAgdmFyIG91dCA9IG5ldyBNYXQobTEubiwgbTEuZCk7CiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gbTEudy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgICBvdXQud1tpXSA9IG0xLndbaV0gKyBtMi53W2ldOwogICAgICB9CiAgICAgIGlmICh0aGlzLm5lZWRzX2JhY2twcm9wKSB7CiAgICAgICAgdmFyIGJhY2t3YXJkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBtMS53Lmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBtMS5kd1tpXSArPSBvdXQuZHdbaV07CiAgICAgICAgICAgIG0yLmR3W2ldICs9IG91dC5kd1tpXTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRoaXMuYmFja3Byb3AucHVzaChiYWNrd2FyZCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICBlbHRtdWw6IGZ1bmN0aW9uIChtMSwgbTIpIHsKICAgICAgYXNzZXJ0KG0xLncubGVuZ3RoID09PSBtMi53Lmxlbmd0aCk7CiAgICAgIHZhciBvdXQgPSBuZXcgTWF0KG0xLm4sIG0xLmQpOwogICAgICBmb3IgKHZhciBpID0gMCwgbiA9IG0xLncubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgb3V0LndbaV0gPSBtMS53W2ldICogbTIud1tpXTsKICAgICAgfQogICAgICBpZiAodGhpcy5uZWVkc19iYWNrcHJvcCkgewogICAgICAgIHZhciBiYWNrd2FyZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gbTEudy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgbTEuZHdbaV0gKz0gbTIud1tpXSAqIG91dC5kd1tpXTsKICAgICAgICAgICAgbTIuZHdbaV0gKz0gbTEud1tpXSAqIG91dC5kd1tpXTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRoaXMuYmFja3Byb3AucHVzaChiYWNrd2FyZCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KICB9OwogIHZhciBzb2Z0bWF4ID0gZnVuY3Rpb24gKG0pIHsKICAgIHZhciBvdXQgPSBuZXcgTWF0KG0ubiwgbS5kKTsgLy8gcHJvYmFiaWxpdHkgdm9sdW1lCiAgICB2YXIgbWF4dmFsID0gLTk5OTk5OTsKICAgIHZhciBpLCBuOwogICAgZm9yIChpID0gMCwgbiA9IG0udy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgaWYgKG0ud1tpXSA+IG1heHZhbCkgbWF4dmFsID0gbS53W2ldOwogICAgfQogICAgdmFyIHMgPSAwLjA7CiAgICBmb3IgKGkgPSAwLCBuID0gbS53Lmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICBvdXQud1tpXSA9IE1hdGguZXhwKG0ud1tpXSAtIG1heHZhbCk7CiAgICAgIHMgKz0gb3V0LndbaV07CiAgICB9CiAgICBmb3IgKGkgPSAwLCBuID0gbS53Lmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICBvdXQud1tpXSAvPSBzOwogICAgfQoKICAgIC8vIG5vIGJhY2t3YXJkIHBhc3MgaGVyZSBuZWVkZWQKICAgIC8vIHNpbmNlIHdlIHdpbGwgdXNlIHRoZSBjb21wdXRlZCBwcm9iYWJpbGl0aWVzIG91dHNpZGUKICAgIC8vIHRvIHNldCBncmFkaWVudHMgZGlyZWN0bHkgb24gbQogICAgcmV0dXJuIG91dDsKICB9OwogIHZhciBTb2x2ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmRlY2F5X3JhdGUgPSAwLjk5OTsKICAgIHRoaXMuc21vb3RoX2VwcyA9IDFlLTg7CiAgICB0aGlzLnN0ZXBfY2FjaGUgPSB7fTsKICB9OwogIFNvbHZlci5wcm90b3R5cGUgPSB7CiAgICBzdGVwOiBmdW5jdGlvbiAobW9kZWwsIHN0ZXBfc2l6ZSwgcmVnYywgY2xpcHZhbCkgewogICAgICAvLyBwZXJmb3JtIHBhcmFtZXRlciB1cGRhdGUKICAgICAgdmFyIHNvbHZlcl9zdGF0cyA9IHt9OwogICAgICB2YXIgbnVtX2NsaXBwZWQgPSAwOwogICAgICB2YXIgbnVtX3RvdCA9IDA7CiAgICAgIGZvciAodmFyIGsgaW4gbW9kZWwpIHsKICAgICAgICBpZiAobW9kZWwuaGFzT3duUHJvcGVydHkoaykpIHsKICAgICAgICAgIHZhciBtID0gbW9kZWxba107IC8vIG1hdCByZWYKICAgICAgICAgIGlmICghKGsgaW4gdGhpcy5zdGVwX2NhY2hlKSkgewogICAgICAgICAgICB0aGlzLnN0ZXBfY2FjaGVba10gPSBuZXcgTWF0KG0ubiwgbS5kKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBzID0gdGhpcy5zdGVwX2NhY2hlW2tdOwogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBtLncubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIC8vIHJtc3Byb3AgYWRhcHRpdmUgbGVhcm5pbmcgcmF0ZQogICAgICAgICAgICB2YXIgbWR3aSA9IG0uZHdbaV07CiAgICAgICAgICAgIHMud1tpXSA9IHMud1tpXSAqIHRoaXMuZGVjYXlfcmF0ZSArICgxLjAgLSB0aGlzLmRlY2F5X3JhdGUpICogbWR3aSAqIG1kd2k7CgogICAgICAgICAgICAvLyBncmFkaWVudCBjbGlwCiAgICAgICAgICAgIGlmIChtZHdpID4gY2xpcHZhbCkgewogICAgICAgICAgICAgIG1kd2kgPSBjbGlwdmFsOwogICAgICAgICAgICAgIG51bV9jbGlwcGVkKys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1kd2kgPCAtY2xpcHZhbCkgewogICAgICAgICAgICAgIG1kd2kgPSAtY2xpcHZhbDsKICAgICAgICAgICAgICBudW1fY2xpcHBlZCsrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG51bV90b3QrKzsKCiAgICAgICAgICAgIC8vIHVwZGF0ZSAoYW5kIHJlZ3VsYXJpemUpCiAgICAgICAgICAgIG0ud1tpXSArPSAtc3RlcF9zaXplICogbWR3aSAvIE1hdGguc3FydChzLndbaV0gKyB0aGlzLnNtb290aF9lcHMpIC0gcmVnYyAqIG0ud1tpXTsKICAgICAgICAgICAgbS5kd1tpXSA9IDA7IC8vIHJlc2V0IGdyYWRpZW50cyBmb3IgbmV4dCBpdGVyYXRpb24KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgc29sdmVyX3N0YXRzLnJhdGlvX2NsaXBwZWQgPSBudW1fY2xpcHBlZCAqIDEuMCAvIG51bV90b3Q7CiAgICAgIHJldHVybiBzb2x2ZXJfc3RhdHM7CiAgICB9CiAgfTsKICB2YXIgaW5pdExTVE0gPSBmdW5jdGlvbiAoaW5wdXRfc2l6ZSwgaGlkZGVuX3NpemVzLCBvdXRwdXRfc2l6ZSkgewogICAgLy8gaGlkZGVuIHNpemUgc2hvdWxkIGJlIGEgbGlzdAoKICAgIHZhciBtb2RlbCA9IHt9OwogICAgdmFyIGhpZGRlbl9zaXplOwogICAgdmFyIHByZXZfc2l6ZTsKICAgIGZvciAodmFyIGQgPSAwOyBkIDwgaGlkZGVuX3NpemVzLmxlbmd0aDsgZCsrKSB7CiAgICAgIC8vIGxvb3Agb3ZlciBkZXB0aHMKICAgICAgcHJldl9zaXplID0gZCA9PT0gMCA/IGlucHV0X3NpemUgOiBoaWRkZW5fc2l6ZXNbZCAtIDFdOwogICAgICBoaWRkZW5fc2l6ZSA9IGhpZGRlbl9zaXplc1tkXTsKCiAgICAgIC8vIGdhdGVzIHBhcmFtZXRlcnMKICAgICAgbW9kZWxbJ1dpeCcgKyBkXSA9IG5ldyBSYW5kTWF0KGhpZGRlbl9zaXplLCBwcmV2X3NpemUsIDAsIDAuMDgpOwogICAgICBtb2RlbFsnV2loJyArIGRdID0gbmV3IFJhbmRNYXQoaGlkZGVuX3NpemUsIGhpZGRlbl9zaXplLCAwLCAwLjA4KTsKICAgICAgbW9kZWxbJ2JpJyArIGRdID0gbmV3IE1hdChoaWRkZW5fc2l6ZSwgMSk7CiAgICAgIG1vZGVsWydXZngnICsgZF0gPSBuZXcgUmFuZE1hdChoaWRkZW5fc2l6ZSwgcHJldl9zaXplLCAwLCAwLjA4KTsKICAgICAgbW9kZWxbJ1dmaCcgKyBkXSA9IG5ldyBSYW5kTWF0KGhpZGRlbl9zaXplLCBoaWRkZW5fc2l6ZSwgMCwgMC4wOCk7CiAgICAgIG1vZGVsWydiZicgKyBkXSA9IG5ldyBNYXQoaGlkZGVuX3NpemUsIDEpOwogICAgICBtb2RlbFsnV294JyArIGRdID0gbmV3IFJhbmRNYXQoaGlkZGVuX3NpemUsIHByZXZfc2l6ZSwgMCwgMC4wOCk7CiAgICAgIG1vZGVsWydXb2gnICsgZF0gPSBuZXcgUmFuZE1hdChoaWRkZW5fc2l6ZSwgaGlkZGVuX3NpemUsIDAsIDAuMDgpOwogICAgICBtb2RlbFsnYm8nICsgZF0gPSBuZXcgTWF0KGhpZGRlbl9zaXplLCAxKTsKICAgICAgLy8gY2VsbCB3cml0ZSBwYXJhbXMKICAgICAgbW9kZWxbJ1djeCcgKyBkXSA9IG5ldyBSYW5kTWF0KGhpZGRlbl9zaXplLCBwcmV2X3NpemUsIDAsIDAuMDgpOwogICAgICBtb2RlbFsnV2NoJyArIGRdID0gbmV3IFJhbmRNYXQoaGlkZGVuX3NpemUsIGhpZGRlbl9zaXplLCAwLCAwLjA4KTsKICAgICAgbW9kZWxbJ2JjJyArIGRdID0gbmV3IE1hdChoaWRkZW5fc2l6ZSwgMSk7CiAgICB9CiAgICAvLyBkZWNvZGVyIHBhcmFtcwogICAgbW9kZWwuV2hkID0gbmV3IFJhbmRNYXQob3V0cHV0X3NpemUsIGhpZGRlbl9zaXplLCAwLCAwLjA4KTsKICAgIG1vZGVsLmJkID0gbmV3IE1hdChvdXRwdXRfc2l6ZSwgMSk7CiAgICByZXR1cm4gbW9kZWw7CiAgfTsKICB2YXIgZm9yd2FyZExTVE0gPSBmdW5jdGlvbiAoRywgbW9kZWwsIGhpZGRlbl9zaXplcywgeCwgcHJldikgewogICAgLy8gZm9yd2FyZCBwcm9wIGZvciBhIHNpbmdsZSB0aWNrIG9mIExTVE0KICAgIC8vIEcgaXMgZ3JhcGggdG8gYXBwZW5kIG9wcyB0bwogICAgLy8gbW9kZWwgY29udGFpbnMgTFNUTSBwYXJhbWV0ZXJzCiAgICAvLyB4IGlzIDFEIGNvbHVtbiB2ZWN0b3Igd2l0aCBvYnNlcnZhdGlvbgogICAgLy8gcHJldiBpcyBhIHN0cnVjdCBjb250YWluaW5nIGhpZGRlbiBhbmQgY2VsbAogICAgLy8gZnJvbSBwcmV2aW91cyBpdGVyYXRpb24KCiAgICB2YXIgaGlkZGVuX3ByZXZzOwogICAgdmFyIGNlbGxfcHJldnM7CiAgICB2YXIgZDsKICAgIGlmICh0eXBlb2YgcHJldi5oID09PSAndW5kZWZpbmVkJykgewogICAgICBoaWRkZW5fcHJldnMgPSBbXTsKICAgICAgY2VsbF9wcmV2cyA9IFtdOwogICAgICBmb3IgKGQgPSAwOyBkIDwgaGlkZGVuX3NpemVzLmxlbmd0aDsgZCsrKSB7CiAgICAgICAgaGlkZGVuX3ByZXZzLnB1c2gobmV3IFIuTWF0KGhpZGRlbl9zaXplc1tkXSwgMSkpOwogICAgICAgIGNlbGxfcHJldnMucHVzaChuZXcgUi5NYXQoaGlkZGVuX3NpemVzW2RdLCAxKSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGhpZGRlbl9wcmV2cyA9IHByZXYuaDsKICAgICAgY2VsbF9wcmV2cyA9IHByZXYuYzsKICAgIH0KICAgIHZhciBoaWRkZW4gPSBbXTsKICAgIHZhciBjZWxsID0gW107CiAgICBmb3IgKGQgPSAwOyBkIDwgaGlkZGVuX3NpemVzLmxlbmd0aDsgZCsrKSB7CiAgICAgIHZhciBpbnB1dF92ZWN0b3IgPSBkID09PSAwID8geCA6IGhpZGRlbltkIC0gMV07CiAgICAgIHZhciBoaWRkZW5fcHJldiA9IGhpZGRlbl9wcmV2c1tkXTsKICAgICAgdmFyIGNlbGxfcHJldiA9IGNlbGxfcHJldnNbZF07CgogICAgICAvLyBpbnB1dCBnYXRlCiAgICAgIHZhciBoMCA9IEcubXVsKG1vZGVsWydXaXgnICsgZF0sIGlucHV0X3ZlY3Rvcik7CiAgICAgIHZhciBoMSA9IEcubXVsKG1vZGVsWydXaWgnICsgZF0sIGhpZGRlbl9wcmV2KTsKICAgICAgdmFyIGlucHV0X2dhdGUgPSBHLnNpZ21vaWQoRy5hZGQoRy5hZGQoaDAsIGgxKSwgbW9kZWxbJ2JpJyArIGRdKSk7CgogICAgICAvLyBmb3JnZXQgZ2F0ZQogICAgICB2YXIgaDIgPSBHLm11bChtb2RlbFsnV2Z4JyArIGRdLCBpbnB1dF92ZWN0b3IpOwogICAgICB2YXIgaDMgPSBHLm11bChtb2RlbFsnV2ZoJyArIGRdLCBoaWRkZW5fcHJldik7CiAgICAgIHZhciBmb3JnZXRfZ2F0ZSA9IEcuc2lnbW9pZChHLmFkZChHLmFkZChoMiwgaDMpLCBtb2RlbFsnYmYnICsgZF0pKTsKCiAgICAgIC8vIG91dHB1dCBnYXRlCiAgICAgIHZhciBoNCA9IEcubXVsKG1vZGVsWydXb3gnICsgZF0sIGlucHV0X3ZlY3Rvcik7CiAgICAgIHZhciBoNSA9IEcubXVsKG1vZGVsWydXb2gnICsgZF0sIGhpZGRlbl9wcmV2KTsKICAgICAgdmFyIG91dHB1dF9nYXRlID0gRy5zaWdtb2lkKEcuYWRkKEcuYWRkKGg0LCBoNSksIG1vZGVsWydibycgKyBkXSkpOwoKICAgICAgLy8gd3JpdGUgb3BlcmF0aW9uIG9uIGNlbGxzCiAgICAgIHZhciBoNiA9IEcubXVsKG1vZGVsWydXY3gnICsgZF0sIGlucHV0X3ZlY3Rvcik7CiAgICAgIHZhciBoNyA9IEcubXVsKG1vZGVsWydXY2gnICsgZF0sIGhpZGRlbl9wcmV2KTsKICAgICAgdmFyIGNlbGxfd3JpdGUgPSBHLnRhbmgoRy5hZGQoRy5hZGQoaDYsIGg3KSwgbW9kZWxbJ2JjJyArIGRdKSk7CgogICAgICAvLyBjb21wdXRlIG5ldyBjZWxsIGFjdGl2YXRpb24KICAgICAgdmFyIHJldGFpbl9jZWxsID0gRy5lbHRtdWwoZm9yZ2V0X2dhdGUsIGNlbGxfcHJldik7IC8vIHdoYXQgZG8gd2Uga2VlcCBmcm9tIGNlbGwKICAgICAgdmFyIHdyaXRlX2NlbGwgPSBHLmVsdG11bChpbnB1dF9nYXRlLCBjZWxsX3dyaXRlKTsgLy8gd2hhdCBkbyB3ZSB3cml0ZSB0byBjZWxsCiAgICAgIHZhciBjZWxsX2QgPSBHLmFkZChyZXRhaW5fY2VsbCwgd3JpdGVfY2VsbCk7IC8vIG5ldyBjZWxsIGNvbnRlbnRzCgogICAgICAvLyBjb21wdXRlIGhpZGRlbiBzdGF0ZSBhcyBnYXRlZCwgc2F0dXJhdGVkIGNlbGwgYWN0aXZhdGlvbnMKICAgICAgdmFyIGhpZGRlbl9kID0gRy5lbHRtdWwob3V0cHV0X2dhdGUsIEcudGFuaChjZWxsX2QpKTsKICAgICAgaGlkZGVuLnB1c2goaGlkZGVuX2QpOwogICAgICBjZWxsLnB1c2goY2VsbF9kKTsKICAgIH0KCiAgICAvLyBvbmUgZGVjb2RlciB0byBvdXRwdXRzIGF0IGVuZAogICAgdmFyIG91dHB1dCA9IEcuYWRkKEcubXVsKG1vZGVsLldoZCwgaGlkZGVuW2hpZGRlbi5sZW5ndGggLSAxXSksIG1vZGVsLmJkKTsKCiAgICAvLyByZXR1cm4gY2VsbCBtZW1vcnksIGhpZGRlbiByZXByZXNlbnRhdGlvbiBhbmQgb3V0cHV0CiAgICByZXR1cm4gewogICAgICAnaCc6IGhpZGRlbiwKICAgICAgJ2MnOiBjZWxsLAogICAgICAnbyc6IG91dHB1dAogICAgfTsKICB9OwogIHZhciBpbml0Uk5OID0gZnVuY3Rpb24gKGlucHV0X3NpemUsIGhpZGRlbl9zaXplcywgb3V0cHV0X3NpemUpIHsKICAgIC8vIGhpZGRlbiBzaXplIHNob3VsZCBiZSBhIGxpc3QKCiAgICB2YXIgbW9kZWwgPSB7fTsKICAgIHZhciBoaWRkZW5fc2l6ZSwgcHJldl9zaXplOwogICAgZm9yICh2YXIgZCA9IDA7IGQgPCBoaWRkZW5fc2l6ZXMubGVuZ3RoOyBkKyspIHsKICAgICAgLy8gbG9vcCBvdmVyIGRlcHRocwogICAgICBwcmV2X3NpemUgPSBkID09PSAwID8gaW5wdXRfc2l6ZSA6IGhpZGRlbl9zaXplc1tkIC0gMV07CiAgICAgIGhpZGRlbl9zaXplID0gaGlkZGVuX3NpemVzW2RdOwogICAgICBtb2RlbFsnV3hoJyArIGRdID0gbmV3IFIuUmFuZE1hdChoaWRkZW5fc2l6ZSwgcHJldl9zaXplLCAwLCAwLjA4KTsKICAgICAgbW9kZWxbJ1doaCcgKyBkXSA9IG5ldyBSLlJhbmRNYXQoaGlkZGVuX3NpemUsIGhpZGRlbl9zaXplLCAwLCAwLjA4KTsKICAgICAgbW9kZWxbJ2JoaCcgKyBkXSA9IG5ldyBSLk1hdChoaWRkZW5fc2l6ZSwgMSk7CiAgICB9CiAgICAvLyBkZWNvZGVyIHBhcmFtcwogICAgbW9kZWwuV2hkID0gbmV3IFJhbmRNYXQob3V0cHV0X3NpemUsIGhpZGRlbl9zaXplLCAwLCAwLjA4KTsKICAgIG1vZGVsLmJkID0gbmV3IE1hdChvdXRwdXRfc2l6ZSwgMSk7CiAgICByZXR1cm4gbW9kZWw7CiAgfTsKICB2YXIgZm9yd2FyZFJOTiA9IGZ1bmN0aW9uIChHLCBtb2RlbCwgaGlkZGVuX3NpemVzLCB4LCBwcmV2KSB7CiAgICAvLyBmb3J3YXJkIHByb3AgZm9yIGEgc2luZ2xlIHRpY2sgb2YgUk5OCiAgICAvLyBHIGlzIGdyYXBoIHRvIGFwcGVuZCBvcHMgdG8KICAgIC8vIG1vZGVsIGNvbnRhaW5zIFJOTiBwYXJhbWV0ZXJzCiAgICAvLyB4IGlzIDFEIGNvbHVtbiB2ZWN0b3Igd2l0aCBvYnNlcnZhdGlvbgogICAgLy8gcHJldiBpcyBhIHN0cnVjdCBjb250YWluaW5nIGhpZGRlbiBhY3RpdmF0aW9ucyBmcm9tIGxhc3Qgc3RlcAoKICAgIHZhciBoaWRkZW5fcHJldnM7CiAgICB2YXIgZDsKICAgIGlmICh0eXBlb2YgcHJldi5oID09PSAndW5kZWZpbmVkJykgewogICAgICBoaWRkZW5fcHJldnMgPSBbXTsKICAgICAgZm9yIChkID0gMDsgZCA8IGhpZGRlbl9zaXplcy5sZW5ndGg7IGQrKykgewogICAgICAgIGhpZGRlbl9wcmV2cy5wdXNoKG5ldyBSLk1hdChoaWRkZW5fc2l6ZXNbZF0sIDEpKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaGlkZGVuX3ByZXZzID0gcHJldi5oOwogICAgfQogICAgdmFyIGhpZGRlbiA9IFtdOwogICAgZm9yIChkID0gMDsgZCA8IGhpZGRlbl9zaXplcy5sZW5ndGg7IGQrKykgewogICAgICB2YXIgaW5wdXRfdmVjdG9yID0gZCA9PT0gMCA/IHggOiBoaWRkZW5bZCAtIDFdOwogICAgICB2YXIgaGlkZGVuX3ByZXYgPSBoaWRkZW5fcHJldnNbZF07CiAgICAgIHZhciBoMCA9IEcubXVsKG1vZGVsWydXeGgnICsgZF0sIGlucHV0X3ZlY3Rvcik7CiAgICAgIHZhciBoMSA9IEcubXVsKG1vZGVsWydXaGgnICsgZF0sIGhpZGRlbl9wcmV2KTsKICAgICAgdmFyIGhpZGRlbl9kID0gRy5yZWx1KEcuYWRkKEcuYWRkKGgwLCBoMSksIG1vZGVsWydiaGgnICsgZF0pKTsKICAgICAgaGlkZGVuLnB1c2goaGlkZGVuX2QpOwogICAgfQoKICAgIC8vIG9uZSBkZWNvZGVyIHRvIG91dHB1dHMgYXQgZW5kCiAgICB2YXIgb3V0cHV0ID0gRy5hZGQoRy5tdWwobW9kZWwuV2hkLCBoaWRkZW5baGlkZGVuLmxlbmd0aCAtIDFdKSwgbW9kZWwuYmQpOwoKICAgIC8vIHJldHVybiBjZWxsIG1lbW9yeSwgaGlkZGVuIHJlcHJlc2VudGF0aW9uIGFuZCBvdXRwdXQKICAgIHJldHVybiB7CiAgICAgICdoJzogaGlkZGVuLAogICAgICAnbyc6IG91dHB1dAogICAgfTsKICB9OwogIHZhciBzaWcgPSBmdW5jdGlvbiAoeCkgewogICAgLy8gaGVscGVyIGZ1bmN0aW9uIGZvciBjb21wdXRpbmcgc2lnbW9pZAogICAgcmV0dXJuIDEuMCAvICgxICsgTWF0aC5leHAoLXgpKTsKICB9OwogIHZhciBtYXhpID0gZnVuY3Rpb24gKHcpIHsKICAgIC8vIGFyZ21heCBvZiBhcnJheSB3CiAgICB2YXIgbWF4diA9IHdbMF07CiAgICB2YXIgbWF4aXggPSAwOwogICAgZm9yICh2YXIgaSA9IDEsIG4gPSB3Lmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICB2YXIgdiA9IHdbaV07CiAgICAgIGlmICh2ID4gbWF4dikgewogICAgICAgIG1heGl4ID0gaTsKICAgICAgICBtYXh2ID0gdjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG1heGl4OwogIH07CiAgdmFyIHNhbXBsZWkgPSBmdW5jdGlvbiAodykgewogICAgLy8gc2FtcGxlIGFyZ21heCBmcm9tIHcsIGFzc3VtaW5nIHcgYXJlCiAgICAvLyBwcm9iYWJpbGl0aWVzIHRoYXQgc3VtIHRvIG9uZQogICAgdmFyIHIgPSByYW5kZigwLCAxKTsKICAgIHZhciB4ID0gMC4wOwogICAgdmFyIGkgPSAwOwogICAgd2hpbGUgKHRydWUpIHsKICAgICAgeCArPSB3W2ldOwogICAgICBpZiAoeCA+IHIpIHsKICAgICAgICByZXR1cm4gaTsKICAgICAgfQogICAgICBpKys7CiAgICB9CiAgICByZXR1cm4gdy5sZW5ndGggLSAxOyAvLyBwcmV0dHkgc3VyZSB3ZSBzaG91bGQgbmV2ZXIgZ2V0IGhlcmU/CiAgfTsKICB2YXIgZ2V0TW9kZWxTaXplID0gZnVuY3Rpb24gKG1vZGVsKSB7CiAgICAvLyByZXR1cm5zIHRoZSBzaXplIChpZSwgbnVtYmVyIG9mIGZsb2F0cykgdXNlZCBpbiBhIG1vZGVsCiAgICB2YXIgbGVuID0gMDsKICAgIHZhciBrOwogICAgdmFyIG07CiAgICBmb3IgKGsgaW4gbW9kZWwpIHsKICAgICAgaWYgKG1vZGVsLmhhc093blByb3BlcnR5KGspKSB7CiAgICAgICAgbSA9IG1vZGVsW2tdOwogICAgICAgIGxlbiArPSBtLncubGVuZ3RoOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbGVuOwogIH07CgogIC8vIG90aGVyIHV0aWxzCiAgdmFyIGZsYXR0ZW5Nb2RlbCA9IGZ1bmN0aW9uIChtb2RlbCwgZ3JhZGllbnRfKSB7CiAgICAvLyByZXR1cm5zIGFuIGZsb2F0IGFycmF5IGNvbnRhaW5pbmcgYSBkdW1wIG9mIG1vZGVsJ3MgcGFyYW1zIGluIG9yZGVyCiAgICAvLyBpZiBncmFkaWVudF8gaXMgdHJ1ZSwgdGhlIHRoZSBmbGF0dGVuIG1vZGVsIHJldHVybnMgdGhlIGR3J3MsIHJhdGhlciB3aGFuIHcncy4KICAgIHZhciBsZW4gPSAwOyAvLyBkZXRlcm1pbmUgbGVuZ3RoIG9mIGR1bXAKICAgIHZhciBpID0gMDsKICAgIHZhciBqOwogICAgdmFyIGs7CiAgICB2YXIgbTsKICAgIHZhciBncmFkaWVudE1vZGUgPSBmYWxzZSB8fCBncmFkaWVudF87CiAgICBsZW4gPSBnZXRNb2RlbFNpemUobW9kZWwpOwogICAgdmFyIHJlc3VsdCA9IFIuemVyb3MobGVuKTsKICAgIGZvciAoayBpbiBtb2RlbCkgewogICAgICBpZiAobW9kZWwuaGFzT3duUHJvcGVydHkoaykpIHsKICAgICAgICBtID0gbW9kZWxba107CiAgICAgICAgbGVuID0gbS53Lmxlbmd0aDsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGVuOyBqKyspIHsKICAgICAgICAgIGlmIChncmFkaWVudE1vZGUpIHsKICAgICAgICAgICAgcmVzdWx0W2ldID0gbS5kd1tqXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdFtpXSA9IG0ud1tqXTsKICAgICAgICAgIH0KICAgICAgICAgIGkrKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfTsKICB2YXIgcHVzaFRvTW9kZWwgPSBmdW5jdGlvbiAobW9kZWwsIGR1bXAsIGdyYWRpZW50XykgewogICAgLy8gcHVzaGVzIGEgZmxvYXQgYXJyYXkgY29udGFpbmluZyBhIGR1bXAgb2YgbW9kZWwncyBwYXJhbXMgaW50byBhIG1vZGVsCiAgICAvLyBpZiBncmFkaWVudF8gaXMgdHJ1ZSwgZHVtcCB3aWxsIGJlIHB1c2hlZCB0byBkdydzLCByYXRoZXIgd2hhbiB3J3MuCiAgICB2YXIgbGVuID0gMDsgLy8gZGV0ZXJtaW5lIGxlbmd0aCBvZiBkdW1wCiAgICB2YXIgaSA9IDA7CiAgICB2YXIgajsKICAgIHZhciBrOwogICAgdmFyIG07CiAgICB2YXIgZ3JhZGllbnRNb2RlID0gZmFsc2UgfHwgZ3JhZGllbnRfOwogICAgbGVuID0gZ2V0TW9kZWxTaXplKG1vZGVsKTsKICAgIGFzc2VydChkdW1wLmxlbmd0aCA9PT0gbGVuKTsgLy8gbWFrZSBzdXJlIHRoZSBhcnJheSBkdW1wIGhhcyBzYW1lIGxlbiBhcyBtb2RlbAogICAgZm9yIChrIGluIG1vZGVsKSB7CiAgICAgIGlmIChtb2RlbC5oYXNPd25Qcm9wZXJ0eShrKSkgewogICAgICAgIG0gPSBtb2RlbFtrXTsKICAgICAgICBsZW4gPSBtLncubGVuZ3RoOwogICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW47IGorKykgewogICAgICAgICAgaWYgKGdyYWRpZW50TW9kZSkgewogICAgICAgICAgICBtLmR3W2pdID0gZHVtcFtpXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG0ud1tqXSA9IGR1bXBbaV07CiAgICAgICAgICB9CiAgICAgICAgICBpKys7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICB2YXIgY29weU1vZGVsID0gZnVuY3Rpb24gKG1vZGVsKSB7CiAgICAvLyByZXR1cm5zIGFuIGV4YWN0IGNvcHkgb2YgYSBtb2RlbAogICAgdmFyIGs7CiAgICB2YXIgbTsKICAgIHZhciByZXN1bHQgPSBbXTsKICAgIGZvciAoayBpbiBtb2RlbCkgewogICAgICBpZiAobW9kZWwuaGFzT3duUHJvcGVydHkoaykpIHsKICAgICAgICBtID0gbW9kZWxba107CiAgICAgICAgcmVzdWx0W2tdID0gbS5jb3B5KCk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfTsKICB2YXIgemVyb091dE1vZGVsID0gZnVuY3Rpb24gKG1vZGVsLCBncmFkaWVudEFzV2VsbF8pIHsKICAgIC8vIHplcm9zIG91dCBldmVyeSBlbGVtZW50IChpbmNsdWRpbmcgZHcsIGlmIGdyYWRpZW50XyBpcyB0cnVlKSBvZiBtb2RlbAogICAgdmFyIGxlbiA9IDA7IC8vIGRldGVybWluZSBsZW5ndGggb2YgZHVtcAogICAgdmFyIGo7CiAgICB2YXIgazsKICAgIHZhciBtOwogICAgdmFyIGdyYWRpZW50TW9kZSA9IGZhbHNlIHx8IGdyYWRpZW50QXNXZWxsXzsKICAgIGZvciAoayBpbiBtb2RlbCkgewogICAgICBpZiAobW9kZWwuaGFzT3duUHJvcGVydHkoaykpIHsKICAgICAgICBtID0gbW9kZWxba107CiAgICAgICAgbGVuID0gbS53Lmxlbmd0aDsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGVuOyBqKyspIHsKICAgICAgICAgIGlmIChncmFkaWVudE1vZGUpIHsKICAgICAgICAgICAgbS5kd1tqXSA9IDA7CiAgICAgICAgICB9CiAgICAgICAgICBtLndbal0gPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CiAgdmFyIGNvbXByZXNzTW9kZWwgPSBmdW5jdGlvbiAobW9kZWwsIG5Db2VmKSB7CiAgICAvLyByZXR1cm5zIGEgY29tcHJlc3NlZCBtb2RlbCB1c2luZyAyZC1kY3QKICAgIC8vIGVhY2ggbW9kZWwgcGFyYW0gd2lsbCBiZSBjb21wcmVzc2VkIGRvd24gdG86CiAgICAvLyBtaW4oblJvdywgbkNvZWYpLCBtaW4obkNvbCwgbkNvZWYpCiAgICB2YXIgazsKICAgIHZhciBtOwogICAgdmFyIG5Sb3csIG5Db2w7CiAgICB2YXIgcmVzdWx0ID0gW107CiAgICB2YXIgejsgLy8gZGN0IHRyYW5zZm9ybWVkIG1hdHJpeAogICAgdmFyIGksIGo7CiAgICBmb3IgKGsgaW4gbW9kZWwpIHsKICAgICAgaWYgKG1vZGVsLmhhc093blByb3BlcnR5KGspKSB7CiAgICAgICAgbSA9IG1vZGVsW2tdOwogICAgICAgIHogPSBtLmRjdDIoKTsKICAgICAgICBuUm93ID0gTWF0aC5taW4oei5uLCBuQ29lZik7CiAgICAgICAgbkNvbCA9IE1hdGgubWluKHouZCwgbkNvZWYpOwogICAgICAgIHJlc3VsdFtrXSA9IG5ldyBNYXQoblJvdywgbkNvbCk7CiAgICAgICAgZm9yIChpID0gMDsgaSA8IG5Sb3c7IGkrKykgewogICAgICAgICAgZm9yIChqID0gMDsgaiA8IG5Db2w7IGorKykgewogICAgICAgICAgICByZXN1bHRba10uc2V0KGksIGosIHouZ2V0KGksIGopKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfTsKICB2YXIgZGVjb21wcmVzc01vZGVsID0gZnVuY3Rpb24gKHNtYWxsLCBtb2RlbCkgewogICAgLy8gZGVjb21wcmVzc2VzIHNtYWxsIChhIGNvbXByZXNzZWQgbW9kZWwpIGludG8gbW9kZWwgdXNpbmcgaWRjdAogICAgdmFyIGs7CiAgICB2YXIgbSwgczsKICAgIHZhciBuUm93LCBuQ29sOwogICAgdmFyIHo7IC8vIGlkY3QgdHJhbnNmb3JtZWQgbWF0cml4CiAgICB2YXIgaSwgajsKICAgIGZvciAoayBpbiBzbWFsbCkgewogICAgICBpZiAoc21hbGwuaGFzT3duUHJvcGVydHkoaykpIHsKICAgICAgICBzID0gc21hbGxba107CiAgICAgICAgbSA9IG1vZGVsW2tdOwogICAgICAgIG5Sb3cgPSBtLm47CiAgICAgICAgbkNvbCA9IG0uZDsKICAgICAgICB6ID0gbmV3IE1hdChuUm93LCBuQ29sKTsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcy5uOyBpKyspIHsKICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBzLmQ7IGorKykgewogICAgICAgICAgICB6LnNldChpLCBqLCBzLmdldChpLCBqKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIG1vZGVsW2tdID0gei5pZGN0MigpOwogICAgICB9CiAgICB9CiAgfTsKICB2YXIgbnVtR3JhZGllbnQgPSBmdW5jdGlvbiAoZiwgbW9kZWwsIGF2Z0RpZmZfLCBlcHNpbG9uXykgewogICAgLy8gY2FsY3VsYXRlcyBudW1lcmljYWwgZ3JhZGllbnQuICBmaXRuZXNzIGYgaXMgZm9yd2FyZCBwYXNzIGZ1bmN0aW9uIHBhc3NlZCBpbiBpcyBhIGZ1bmN0aW9uIG9mIG1vZGVsIG9ubHkuCiAgICAvLyBmIHdpbGwgYmUgcnVuIG1hbnkgdGltZXMgd2hlbiB0aGUgcGFyYW1zIG9mIGVhY2ggaW5kaXYgd2VpZ2h0IGNoYW5nZXMKICAgIC8vIG51bWVyaWNhbCBncmFkaWVudCBpcyBjb21wdXRlZCBvZmYgYXZlcmFnZSBvZiB1cHRpY2sgYW5kIGRvd250aWNrIGdyYWRpZW50LCBzbyBPKGVeMikgbm9pc2UuCiAgICAvLyByZXR1cm5zIGEgbWF0IG9iamVjdCwgd2hlcmUgLncgaG9sZHMgcGVyY2VudGFnZSBkaWZmZXJlbmNlcywgYW5kIC5kdyBob2xkcyBudW1lcmljYWwgZ3JhZGllbnQKICAgIC8vIGlmIGF2Z0RpZmZfIG1vZGUgaXMgc2V0IHRvIHRydWUsIHJldHVybnMgdGhlIGF2ZXJhZ2UgcGVyY2VudGFnZSBkaWZmIHJhdGhlciB0aGFuIHRoZSBhY3R1YWwgZ3JhZGllbnRzCiAgICB2YXIgZXBzaWxvbiA9IDFlLTEwIHx8IGVwc2lsb25fOwogICAgdmFyIGF2Z0RpZmYgPSBmYWxzZSB8fCBhdmdEaWZmXzsKICAgIHZhciBiYXNlID0gZihtb2RlbCk7CiAgICB2YXIgdXBCYXNlLCBkb3duQmFzZTsKICAgIHZhciB1cHRpY2sgPSBjb3B5TW9kZWwobW9kZWwpOyAvLyB1cHRpY2sudyBob2xkcyB0aGUgdGlja2VkIHdlaWdodCB2YWx1ZQogICAgdmFyIGRvd250aWNrID0gY29weU1vZGVsKG1vZGVsKTsgLy8gb3Bwb3NpdGUgb2YgdXB0aWNrLncKICAgIHZhciBudW1HcmFkID0gY29weU1vZGVsKG1vZGVsKTsgLy8gbnVtR3JhZC5kdyBob2xkcyB0aGUgbnVtZXJpY2FsIGdyYWRpZW50LgoKICAgIHZhciBhdmdQZXJjZW50RGlmZiA9IDAuMDsKICAgIHZhciBhdmdQZXJjZW50RGlmZkNvdW50ZXIgPSAwOwogICAgdmFyIGksIGxlbjsKICAgIHZhciBtOwogICAgdmFyIGs7CiAgICB2YXIgcmVzdWx0ID0gW107CiAgICBmb3IgKGsgaW4gbW9kZWwpIHsKICAgICAgaWYgKG1vZGVsLmhhc093blByb3BlcnR5KGspKSB7CiAgICAgICAgbSA9IG1vZGVsW2tdOwogICAgICAgIGxlbiA9IG0udy5sZW5ndGg7CiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAvLyBjaGFuZ2UgdGhlIHdlaWdodHMgYnkgYSBzbWFsbCBhbW91bnQgdG8gZmluZCBncmFkaWVudAogICAgICAgICAgdXB0aWNrW2tdLndbaV0gKz0gZXBzaWxvbjsKICAgICAgICAgIGRvd250aWNrW2tdLndbaV0gLT0gZXBzaWxvbjsKICAgICAgICAgIHVwQmFzZSA9IGYodXB0aWNrKTsKICAgICAgICAgIGRvd25CYXNlID0gZihkb3dudGljayk7CiAgICAgICAgICAvLyBzdG9yZSBudW1lcmljYWwgZ3JhZGllbnQKICAgICAgICAgIG51bUdyYWRba10uZHdbaV0gPSAodXBCYXNlIC0gZG93bkJhc2UpIC8gKDIgKiBlcHNpbG9uKTsKICAgICAgICAgIG51bUdyYWRba10ud1tpXSA9IChudW1HcmFkW2tdLmR3W2ldICsgZXBzaWxvbikgLyAobW9kZWxba10uZHdbaV0gKyBlcHNpbG9uKSAtIDE7CiAgICAgICAgICBhdmdQZXJjZW50RGlmZiArPSBudW1HcmFkW2tdLndbaV0gKiBudW1HcmFkW2tdLndbaV07CiAgICAgICAgICBhdmdQZXJjZW50RGlmZkNvdW50ZXIgKz0gMTsKICAgICAgICAgIC8vIHN0b3JlIHByZWNlbnRhZ2UgZGlmZiBpbiB3LgogICAgICAgICAgLy8gdW5kbyB0aGUgY2hhbmdlIG9mIHdlaWdodHMgYnkgYSBzbWFsbCBhbW91bnQKICAgICAgICAgIHVwdGlja1trXS53W2ldIC09IGVwc2lsb247CiAgICAgICAgICBkb3dudGlja1trXS53W2ldICs9IGVwc2lsb247CgogICAgICAgICAgLy8gc2V0IG1vZGVsJ3MgZHcgdG8gbnVtZXJpY2FsIGdyYWRpZW50ICh1c2VmdWwgZm9yIGRlYnVnZ2luZykKICAgICAgICAgIC8vbW9kZWxba10uZHdbaV0gPSBudW1HcmFkW2tdLmR3W2ldOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYgKGF2Z0RpZmYpIHsKICAgICAgcmV0dXJuIE1hdGguc3FydChhdmdQZXJjZW50RGlmZiAvIGF2Z1BlcmNlbnREaWZmQ291bnRlcik7CiAgICB9CiAgICByZXR1cm4gbnVtR3JhZDsKICB9OwoKICAvLyBuZXVyb2V2b2x1dGlvbiB0b29scwoKICAvLyBjaHJvbW9zb21lIGltcGxlbWVudGF0aW9uIHVzaW5nIGFuIGFycmF5IG9mIGZsb2F0cwogIHZhciBHZW5lID0gZnVuY3Rpb24gKGluaXRGbG9hdEFycmF5KSB7CiAgICB2YXIgaTsKICAgIHZhciBsZW4gPSBpbml0RmxvYXRBcnJheS5sZW5ndGg7CiAgICAvLyB0aGUgaW5wdXQgYXJyYXkgd2lsbCBiZSBjb3BpZWQKICAgIHRoaXMuZml0bmVzcyA9IC0xZTIwOyAvLyBkZWZhdWx0IGZpdG5lc3MgdmFsdWUgaXMgdmVyeSBuZWdhdGl2ZQogICAgdGhpcy5uVHJpYWwgPSAwOyAvLyBudW1iZXIgb2YgdHJpYWxzIHN1YmplY3RlZCB0byBzbyBmYXIuCiAgICB0aGlzLmdlbmUgPSB6ZXJvcyhsZW4pOwogICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIHRoaXMuZ2VuZVtpXSA9IGluaXRGbG9hdEFycmF5W2ldOwogICAgfQogIH07CiAgR2VuZS5wcm90b3R5cGUgPSB7CiAgICBidXJzdE11dGF0ZTogZnVuY3Rpb24gKGJ1cnN0X21hZ25pdHVkZV8pIHsKICAgICAgLy8gYWRkcyBhIG5vcm1hbCByYW5kb20gdmFyaWFibGUgb2Ygc3RkZXYgd2lkdGgsIHplcm8gbWVhbiB0byBlYWNoIGdlbmUuCiAgICAgIHZhciBidXJzdF9tYWduaXR1ZGUgPSBidXJzdF9tYWduaXR1ZGVfIHx8IDAuMTsKICAgICAgdmFyIGksIE47CiAgICAgIE4gPSB0aGlzLmdlbmUubGVuZ3RoOwogICAgICBmb3IgKGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZW5lW2ldICs9IHJhbmRuKDAuMCwgYnVyc3RfbWFnbml0dWRlKTsKICAgICAgfQogICAgfSwKICAgIHJhbmRvbWl6ZTogZnVuY3Rpb24gKGJ1cnN0X21hZ25pdHVkZV8pIHsKICAgICAgLy8gcmVzZXRzIGVhY2ggZ2VuZSB0byBhIHJhbmRvbSB2YWx1ZSB3aXRoIHplcm8gbWVhbiBhbmQgc3RkZXYKICAgICAgdmFyIGJ1cnN0X21hZ25pdHVkZSA9IGJ1cnN0X21hZ25pdHVkZV8gfHwgMC4xOwogICAgICB2YXIgaSwgTjsKICAgICAgTiA9IHRoaXMuZ2VuZS5sZW5ndGg7CiAgICAgIGZvciAoaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICB0aGlzLmdlbmVbaV0gPSByYW5kbigwLjAsIGJ1cnN0X21hZ25pdHVkZSk7CiAgICAgIH0KICAgIH0sCiAgICBtdXRhdGU6IGZ1bmN0aW9uIChtdXRhdGlvbl9yYXRlXywgYnVyc3RfbWFnbml0dWRlXykgewogICAgICAvLyBhZGRzIHJhbmRvbSBnYXVzc2lhbiAoMCxzdGRldikgdG8gZWFjaCBnZW5lIHdpdGggcHJvYiBtdXRhdGlvbl9yYXRlCiAgICAgIHZhciBtdXRhdGlvbl9yYXRlID0gbXV0YXRpb25fcmF0ZV8gfHwgMC4xOwogICAgICB2YXIgYnVyc3RfbWFnbml0dWRlID0gYnVyc3RfbWFnbml0dWRlXyB8fCAwLjE7CiAgICAgIHZhciBpLCBOOwogICAgICBOID0gdGhpcy5nZW5lLmxlbmd0aDsKICAgICAgZm9yIChpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIGlmIChyYW5kZigwLCAxKSA8IG11dGF0aW9uX3JhdGUpIHsKICAgICAgICAgIHRoaXMuZ2VuZVtpXSArPSByYW5kbigwLjAsIGJ1cnN0X21hZ25pdHVkZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY3Jvc3NvdmVyOiBmdW5jdGlvbiAocGFydG5lciwga2lkMSwga2lkMiwgb25lUG9pbnQpIHsKICAgICAgLy8gcGVyZm9ybXMgb25lLXBvaW50IGNyb3Nzb3ZlciB3aXRoIHBhcnRuZXIgdG8gcHJvZHVjZSAyIGtpZHMKICAgICAgLy8gZWRpdCAtPiBjaGFuZ2VkIHRvIHVuaWZvcm0gY3Jvc3NvdmVyIG1ldGhvZC4KICAgICAgLy8gYXNzdW1lcyBhbGwgY2hyb21vc29tZXMgYXJlIGluaXRpYWxpc2VkIHdpdGggc2FtZSBhcnJheSBzaXplLiBwbHMgbWFrZSBzdXJlIG9mIHRoaXMgYmVmb3JlIGNhbGxpbmcKICAgICAgYXNzZXJ0KHRoaXMuZ2VuZS5sZW5ndGggPT09IHBhcnRuZXIuZ2VuZS5sZW5ndGgpOwogICAgICBhc3NlcnQocGFydG5lci5nZW5lLmxlbmd0aCA9PT0ga2lkMS5nZW5lLmxlbmd0aCk7CiAgICAgIGFzc2VydChraWQxLmdlbmUubGVuZ3RoID09PSBraWQyLmdlbmUubGVuZ3RoKTsKICAgICAgdmFyIG9uZVBvaW50TW9kZSA9IGZhbHNlOwogICAgICBpZiAodHlwZW9mIG9uZVBvaW50ICE9PSAndW5kZWZpbmVkJykgb25lUG9pbnRNb2RlID0gb25lUG9pbnQ7CiAgICAgIHZhciBpLCBOOwogICAgICBOID0gdGhpcy5nZW5lLmxlbmd0aDsKICAgICAgdmFyIGNyb3NzID0gdHJ1ZTsKICAgICAgdmFyIGwgPSByYW5kaSgwLCBOKTsgLy8gY3Jvc3NvdmVyIHBvaW50IChmb3Igb25lIHBvaW50IHhvdmVyKQogICAgICBmb3IgKGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgaWYgKG9uZVBvaW50TW9kZSkgewogICAgICAgICAgY3Jvc3MgPSBpIDwgbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY3Jvc3MgPSBNYXRoLnJhbmRvbSgpIDwgMC41OwogICAgICAgIH0KICAgICAgICBpZiAoY3Jvc3MpIHsKICAgICAgICAgIGtpZDEuZ2VuZVtpXSA9IHRoaXMuZ2VuZVtpXTsKICAgICAgICAgIGtpZDIuZ2VuZVtpXSA9IHBhcnRuZXIuZ2VuZVtpXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAga2lkMS5nZW5lW2ldID0gcGFydG5lci5nZW5lW2ldOwogICAgICAgICAga2lkMi5nZW5lW2ldID0gdGhpcy5nZW5lW2ldOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNvcHlGcm9tOiBmdW5jdGlvbiAoZykgewogICAgICAvLyBjb3BpZXMgZydzIGdlbmUgaW50byBpdHNlbGYKICAgICAgdmFyIGksIE47CiAgICAgIHRoaXMuY29weUZyb21BcnJheShnLmdlbmUpOwogICAgfSwKICAgIGNvcHlGcm9tQXJyYXk6IGZ1bmN0aW9uIChzb3VyY2VGbG9hdEFycmF5KSB7CiAgICAgIC8vIGNvcHkgYW4gYXJyYXkgb3duJ3MgZ2VuZSAobXVzdCBiZSBzYW1lIHNpemUpCiAgICAgIGFzc2VydCh0aGlzLmdlbmUubGVuZ3RoID09PSBzb3VyY2VGbG9hdEFycmF5Lmxlbmd0aCk7CiAgICAgIHZhciBpLCBOOwogICAgICBOID0gdGhpcy5nZW5lLmxlbmd0aDsKICAgICAgZm9yIChpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIHRoaXMuZ2VuZVtpXSA9IHNvdXJjZUZsb2F0QXJyYXlbaV07CiAgICAgIH0KICAgIH0sCiAgICBjb3B5OiBmdW5jdGlvbiAocHJlY2lzaW9uXykgewogICAgICAvLyByZXR1cm5zIGEgcm91bmRlZCBleGFjdCBjb3B5IG9mIGl0c2VsZiAoaW50byBuZXcgbWVtb3J5LCBkb2Vzbid0IHJldHVybiByZWZlcmVuY2UpCiAgICAgIHZhciBwcmVjaXNpb24gPSAxMGUtNCB8fCBwcmVjaXNpb25fOwogICAgICBwcmVjaXNpb24gPSAxIC8gcHJlY2lzaW9uOwogICAgICB2YXIgbmV3RmxvYXRBcnJheSA9IHplcm9zKHRoaXMuZ2VuZS5sZW5ndGgpOwogICAgICB2YXIgaTsKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZ2VuZS5sZW5ndGg7IGkrKykgewogICAgICAgIG5ld0Zsb2F0QXJyYXlbaV0gPSBNYXRoLnJvdW5kKHByZWNpc2lvbiAqIHRoaXMuZ2VuZVtpXSkgLyBwcmVjaXNpb247CiAgICAgIH0KICAgICAgdmFyIGcgPSBuZXcgR2VuZShuZXdGbG9hdEFycmF5KTsKICAgICAgZy5maXRuZXNzID0gdGhpcy5maXRuZXNzOwogICAgICBnLm5UcmlhbCA9IHRoaXMublRyaWFsOwogICAgICByZXR1cm4gZzsKICAgIH0sCiAgICBwdXNoVG9Nb2RlbDogZnVuY3Rpb24gKG1vZGVsKSB7CiAgICAgIC8vIHB1c2hlcyB0aGlzIGNocm9tb3NvbWUgdG8gYSBzcGVjaWZpZWQgbmV0d29yawogICAgICBwdXNoVG9Nb2RlbChtb2RlbCwgdGhpcy5nZW5lKTsKICAgIH0KICB9OwoKICAvLyByYW5kb21pemUgbmV1cmFsIG5ldHdvcmsgbW9kZWwgd2l0aCByYW5kb20gd2VpZ2h0cyBhbmQgYmlhc2VzCiAgdmFyIHJhbmRvbWl6ZU1vZGVsID0gZnVuY3Rpb24gKG1vZGVsLCBtYWduaXR1ZGVfKSB7CiAgICB2YXIgbW9kZWxTaXplID0gZ2V0TW9kZWxTaXplKG1vZGVsKTsKICAgIHZhciBtYWduaXR1ZGUgPSAxLjAgfHwgbWFnbml0dWRlXzsKICAgIHZhciByID0gbmV3IFJhbmRNYXQoMSwgbW9kZWxTaXplLCAwLCBtYWduaXR1ZGUpOwogICAgdmFyIGcgPSBuZXcgR2VuZShyLncpOwogICAgZy5wdXNoVG9Nb2RlbChtb2RlbCk7CiAgfTsKICB2YXIgR0FUcmFpbmVyID0gZnVuY3Rpb24gKG1vZGVsLCBvcHRpb25zXywgaW5pdF9nZW5lX2FycmF5KSB7CiAgICAvLyBpbXBsZW1lbnRhdGlvbiBvZiBDb1N5TmUgbmV1cm9ldm9sdXRpb24gZnJhbWV3b3JrCiAgICAvLwogICAgLy8gb3B0aW9uczoKICAgIC8vIHBvcHVsYXRpb25fc2l6ZSA6IHBvc2l0aXZlIGludGVnZXIKICAgIC8vIGhhbGxfb2ZfZmFtZV9zaXplIDogcG9zaXRpdmUgaW50ZWdlciwgc3RvcmVzIGJlc3QgZ3V5cyBpbiBhbGwgb2YgaGlzdG9yeSBhbmQga2VlcHMgdGhlbS4KICAgIC8vIG11dGF0aW9uX3JhdGUgOiBbMCwgMV0sIHdoZW4gbXV0YXRpb24gaGFwcGVucywgY2hhbmNlIG9mIGVhY2ggZ2VuZSBnZXR0aW5nIG11dGF0ZWQKICAgIC8vIGVsaXRlX3BlcmNlbnRhZ2UgOiBbMCwgMC4zXSwgb25seSB0aGlzIGdyb3VwIG1hdGVzIGFuZCBwcm9kdWNlcyBvZmZzcHJpbmdzCiAgICAvLyBtdXRhdGlvbl9zaXplIDogcG9zaXRpdmUgZmxvYXRpbmcgcG9pbnQuICBzdGRldiBvZiBnYXVzaWFuIG5vaXNlIGFkZGVkIGZvciBtdXRhdGlvbnMKICAgIC8vIHRhcmdldF9maXRuZXNzIDogYWZ0ZXIgZml0bmVzcyBhY2hpZXZlZCBpcyBncmVhdGVyIHRoYW4gdGhpcyBmbG9hdCB2YWx1ZSwgbGVhcm5pbmcgc3RvcHMKICAgIC8vIGluaXRfd2VpZ2h0X21hZ25pdHVkZSA6IHN0ZGV2IG9mIGluaXRpYWwgcmFuZG9tIHdlaWdodCAoZGVmYXVsdCA9IDEuMCkKICAgIC8vIGJ1cnN0X2dlbmVyYXRpb25zIDogcG9zaXRpdmUgaW50ZWdlci4gIGlmIGJlc3QgZml0bmVzcyBkb2Vzbid0IGltcHJvdmUgYWZ0ZXIgdGhpcyBudW1iZXIgb2YgZ2VuZXJhdGlvbnMKICAgIC8vICAgICAgICAgICAgICAgICAgICB0aGVuIG11dGF0ZSBldmVyeXRoaW5nIQogICAgLy8gYmVzdF90cmlhbCA6IGRlZmF1bHQgMS4gIHNhdmUgYmVzdCBvZiBiZXN0X3RyaWFsJ3MgcmVzdWx0cyBmb3IgZWFjaCBjaHJvbW9zb21lLgogICAgLy8gbnVtX21hdGNoIDogZm9yIHVzZSBpbiBhcm1zIHJhY2UgbW9kZS4gIGhvdyBtYW55IHJhbmRvbSBtYXRjaGVzIHdlIHNldCBmb3IgZWFjaCBjaHJvbW9zb21lIHdoZW4gaXQgaXMgaXRzIHR1cm4uCiAgICAvLwogICAgLy8gaW5pdF9nZW5lX2FycmF5OiAgaW5pdCBmbG9hdCBhcnJheSB0byBpbml0aWFsaXplIHRoZSBjaHJvbW9zb21lcy4gIGNhbiBiZSByZXN1bHQgb2J0YWluZWQgZnJvbSBwcmV0cmFpbmVkIHNlc3Npb25zLgogICAgLy8gZGVidWdfbW9kZTogZmFsc2UgYnkgZGVmYXVsdC4gIGlmIHNldCB0byB0cnVlLCBjb25zb2xlLmxvZyBkZWJ1ZyBvdXRwdXQgb2NjdXJzLgoKICAgIHRoaXMubW9kZWwgPSBjb3B5TW9kZWwobW9kZWwpOyAvLyBtYWtlcyBhIGxvY2FsIHdvcmtpbmcgY29weSBvZiB0aGUgbW9kZWwuIGNvcGllcyBhcmNoaXRlY3R1cmUgYW5kIHdlaWdodHMKCiAgICB2YXIgb3B0aW9ucyA9IG9wdGlvbnNfIHx8IHt9OwogICAgdGhpcy5oYWxsX29mX2ZhbWVfc2l6ZSA9IHR5cGVvZiBvcHRpb25zLmhhbGxfb2ZfZmFtZV9zaXplICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaGFsbF9vZl9mYW1lX3NpemUgOiA1OwogICAgdGhpcy5wb3B1bGF0aW9uX3NpemUgPSB0eXBlb2Ygb3B0aW9ucy5wb3B1bGF0aW9uX3NpemUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5wb3B1bGF0aW9uX3NpemUgOiAzMDsKICAgIHRoaXMucG9wdWxhdGlvbl9zaXplICs9IHRoaXMuaGFsbF9vZl9mYW1lX3NpemU7IC8vIG1ha2Ugcm9vbSBmb3IgaGFsbCBvZiBmYW1lIGJleW9uZCBzcGVjaWZpZWQgcG9wdWxhdGlvbiBzaXplLgogICAgdGhpcy5wb3B1bGF0aW9uX3NpemUgPSBNYXRoLmZsb29yKHRoaXMucG9wdWxhdGlvbl9zaXplIC8gMikgKiAyOyAvLyBtYWtlIHN1cmUgZXZlbiBudW1iZXIKICAgIHRoaXMubGVuZ3RoID0gdGhpcy5wb3B1bGF0aW9uX3NpemU7IC8vIHVzZSB0aGUgdmFyaWFibGUgbGVuZ3RoIHRvIHN1aXQgYXJyYXkgcGF0dGVybi4KICAgIHRoaXMubXV0YXRpb25fcmF0ZSA9IHR5cGVvZiBvcHRpb25zLm11dGF0aW9uX3JhdGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tdXRhdGlvbl9yYXRlIDogMC4wMTsKICAgIHRoaXMuaW5pdF93ZWlnaHRfbWFnbml0dWRlID0gdHlwZW9mIG9wdGlvbnMuaW5pdF93ZWlnaHRfbWFnbml0dWRlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5pdF93ZWlnaHRfbWFnbml0dWRlIDogMS4wOwogICAgdGhpcy5lbGl0ZV9wZXJjZW50YWdlID0gdHlwZW9mIG9wdGlvbnMuZWxpdGVfcGVyY2VudGFnZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmVsaXRlX3BlcmNlbnRhZ2UgOiAwLjI7CiAgICB0aGlzLm11dGF0aW9uX3NpemUgPSB0eXBlb2Ygb3B0aW9ucy5tdXRhdGlvbl9zaXplICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubXV0YXRpb25fc2l6ZSA6IDAuNTsKICAgIHRoaXMuZGVidWdfbW9kZSA9IHR5cGVvZiBvcHRpb25zLmRlYnVnX21vZGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5kZWJ1Z19tb2RlIDogZmFsc2U7CiAgICB0aGlzLmdlbmVfc2l6ZSA9IGdldE1vZGVsU2l6ZSh0aGlzLm1vZGVsKTsgLy8gbnVtYmVyIG9mIGZsb2F0cyBpbiBlYWNoIGdlbmUKCiAgICB2YXIgaW5pdEdlbmU7CiAgICB2YXIgaTsKICAgIHZhciBnZW5lOwogICAgaWYgKGluaXRfZ2VuZV9hcnJheSkgewogICAgICBpbml0R2VuZSA9IG5ldyBHZW5lKGluaXRfZ2VuZV9hcnJheSk7CiAgICB9CiAgICB0aGlzLmdlbmVzID0gW107IC8vIHBvcHVsYXRpb24KICAgIHRoaXMuaGFsbE9mRmFtZSA9IFtdOyAvLyBzdG9yZXMgdGhlIGhhbGwgb2YgZmFtZSBoZXJlIQogICAgZm9yIChpID0gMDsgaSA8IHRoaXMucG9wdWxhdGlvbl9zaXplOyBpKyspIHsKICAgICAgZ2VuZSA9IG5ldyBHZW5lKHplcm9zKHRoaXMuZ2VuZV9zaXplKSk7CiAgICAgIGlmIChpbml0R2VuZSkgewogICAgICAgIC8vIGlmIGluaXRpYWwgZ2VuZSBzdXBwbGllZCwgYnVyc3QgbXV0YXRlIHBhcmFtLgogICAgICAgIGdlbmUuY29weUZyb20oaW5pdEdlbmUpOwogICAgICAgIGlmIChpID4gMCkgewogICAgICAgICAgLy8gZG9uJ3QgbXV0YXRlIHRoZSBmaXJzdCBndXkuCiAgICAgICAgICBnZW5lLmJ1cnN0TXV0YXRlKHRoaXMubXV0YXRpb25fc2l6ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGdlbmUucmFuZG9taXplKHRoaXMuaW5pdF93ZWlnaHRfbWFnbml0dWRlKTsKICAgICAgfQogICAgICB0aGlzLmdlbmVzLnB1c2goZ2VuZSk7CiAgICB9CiAgICAvLyBnZW5lcmF0ZXMgZmlyc3QgZmV3IGhhbGwgb2YgZmFtZSBnZW5lcyAoYnV0IGJ1cnN0IG11dGF0ZXMgc29tZSBvZiB0aGVtKQogICAgZm9yIChpID0gMDsgaSA8IHRoaXMuaGFsbF9vZl9mYW1lX3NpemU7IGkrKykgewogICAgICBnZW5lID0gbmV3IEdlbmUoemVyb3ModGhpcy5nZW5lX3NpemUpKTsKICAgICAgaWYgKGluaXRfZ2VuZV9hcnJheSkgewogICAgICAgIC8vIGlmIGluaXRpYWwgZ2VuZSBzdXBwbGllZCwgYnVyc3QgbXV0YXRlIHBhcmFtLgogICAgICAgIGdlbmUuY29weUZyb20oaW5pdEdlbmUpOwogICAgICB9IGVsc2UgewogICAgICAgIGdlbmUucmFuZG9taXplKHRoaXMuaW5pdF93ZWlnaHRfbWFnbml0dWRlKTsKICAgICAgICBpZiAoaSA+IDApIHsKICAgICAgICAgIC8vIGRvbid0IG11dGF0ZSB0aGUgZmlyc3QgZ3V5LgogICAgICAgICAgZ2VuZS5idXJzdE11dGF0ZSh0aGlzLm11dGF0aW9uX3NpemUpOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmhhbGxPZkZhbWUucHVzaChnZW5lKTsKICAgIH0KICAgIHB1c2hUb01vZGVsKHRoaXMubW9kZWwsIHRoaXMuZ2VuZXNbMF0uZ2VuZSk7IC8vIHB1c2ggZmlyc3QgY2hyb21vc29tZSB0byBuZXVyYWwgbmV0d29yay4gKHJlcGxhY2VkICoxIGFib3ZlKQogIH07CiAgR0FUcmFpbmVyLnByb3RvdHlwZSA9IHsKICAgIHNvcnRCeUZpdG5lc3M6IGZ1bmN0aW9uIChjKSB7CiAgICAgIGMgPSBjLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICBpZiAoYS5maXRuZXNzID4gYi5maXRuZXNzKSB7CiAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQogICAgICAgIGlmIChhLmZpdG5lc3MgPCBiLmZpdG5lc3MpIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KICAgICAgICByZXR1cm4gMDsKICAgICAgfSk7CiAgICB9LAogICAgcHVzaEdlbmVUb01vZGVsOiBmdW5jdGlvbiAobW9kZWwsIGkpIHsKICAgICAgLy8gcHVzaGVzIHRoZSBpIHRoIGdlbmUgb2YgdGhlIHNvcnRlZCBwb3B1bGF0aW9uIGludG8gYSBtb2RlbAogICAgICAvLyB0aGlzIGlnbm9yZXMgaGFsbCBvZiBmYW1lCiAgICAgIHZhciBnID0gdGhpcy5nZW5lc1tpXTsKICAgICAgZy5wdXNoVG9Nb2RlbChtb2RlbCk7CiAgICB9LAogICAgcHVzaEJlc3RHZW5lVG9Nb2RlbDogZnVuY3Rpb24gKG1vZGVsKSB7CiAgICAgIHRoaXMucHVzaEdlbmVUb01vZGVsKG1vZGVsLCAwKTsKICAgIH0sCiAgICBwdXNoSGlzdFRvTW9kZWw6IGZ1bmN0aW9uIChtb2RlbCwgaSkgewogICAgICAvLyBwdXNoZXMgdGhlIGkgdGggZ2VuZSBvZiB0aGUgc29ydGVkIHBvcHVsYXRpb24gaW50byBhIG1vZGVsIGZyb20gdGhlIGhhbGwtb2YtZmFtZQogICAgICAvLyB0aGlzIHJlcXVpcmVzIGhhbGwgb2YgZmFtZSBtb2RlbCB0byBiZSB1c2VkCiAgICAgIHZhciBOaCA9IHRoaXMuaGFsbF9vZl9mYW1lX3NpemU7CiAgICAgIGFzc2VydChOaCA+IDApOyAvLyBoYWxsIG9mIGZhbWUgbXVzdCBiZSB1c2VkLgogICAgICB2YXIgZyA9IHRoaXMuaGFsbE9mRmFtZVtpXTsKICAgICAgZy5wdXNoVG9Nb2RlbChtb2RlbCk7CiAgICB9LAogICAgcHVzaEJlc3RIaXN0VG9Nb2RlbDogZnVuY3Rpb24gKG1vZGVsKSB7CiAgICAgIHRoaXMucHVzaEhpc3RUb01vZGVsKG1vZGVsLCAwKTsKICAgIH0sCiAgICBmbHVzaEZpdG5lc3M6IGZ1bmN0aW9uICgpIHsKICAgICAgLy8gcmVzZXRzIGFsbCB0aGUgZml0bmVzcyBzY29yZXMgdG8gdmVyeSBuZWdhdGl2ZSBudW1iZXJzLCBpbmNsIGhhbGwtb2YtZmFtZQogICAgICB2YXIgaSwgTiwgTmg7CiAgICAgIHZhciBjID0gdGhpcy5nZW5lczsKICAgICAgdmFyIGggPSB0aGlzLmhhbGxPZkZhbWU7CiAgICAgIE4gPSB0aGlzLnBvcHVsYXRpb25fc2l6ZTsKICAgICAgTmggPSB0aGlzLmhhbGxfb2ZfZmFtZV9zaXplOwogICAgICBmb3IgKGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgY1tpXS5maXRuZXNzID0gLTFlMjA7CiAgICAgIH0KICAgICAgZm9yIChpID0gMDsgaSA8IE5oOyBpKyspIHsKICAgICAgICBoW2ldLmZpdG5lc3MgPSAtMWUyMDsKICAgICAgfQogICAgfSwKICAgIHNvcnRHZW5lczogZnVuY3Rpb24gKCkgewogICAgICAvLyB0aGlzIGZ1bmN0aW9ucyBqdXN0IHNvcnQgbGlzdCBvZiBnZW5lcyBieSBmaXRuZXNzIGFuZCBkb2VzIG5vdCBkbyBhbnkKICAgICAgLy8gY3Jvc3Mgb3ZlciBvciBtdXRhdGlvbnMuCiAgICAgIHZhciBjID0gdGhpcy5nZW5lczsKICAgICAgLy8gc29ydCB0aGUgY2hyb21vc29tZXMgYnkgZml0bmVzcwogICAgICB0aGlzLnNvcnRCeUZpdG5lc3MoYyk7CiAgICB9LAogICAgZXZvbHZlOiBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIHRoaXMgZnVuY3Rpb24gZG9lcyBiYXJlIG1pbmltdW0gc2ltdWxhdGlvbiBvZiBvbmUgZ2VuZXJhdGlvbgogICAgICAvLyBpdCBhc3N1bWVzIHRoZSBjb2RlIHByaW9yIHRvIGNhbGxpbmcgZXZvbHZlIHdvdWxkIGhhdmUgc2ltdWxhdGVkIHRoZSBzeXN0ZW0KICAgICAgLy8gaXQgYWxzbyBhc3N1bWVzIHRoYXQgdGhlIGZpdG5lc3MgaW4gZWFjaCBjaHJvbW9zb21lIG9mIHRoaXMgdHJhaW5lciB3aWxsIGhhdmUgYmVlbiBhc3NpZ25lZAogICAgICAvLyBpdCBqdXN0IGRvZXMgdGhlIHRhc2sgb2YgY3Jvc3NvdmVycyBhbmQgbXV0YXRpb25zIGFmdGVyd2FyZHMuCgogICAgICB2YXIgaSwgaiwgTiwgTmg7CiAgICAgIHZhciBjID0gdGhpcy5nZW5lczsKICAgICAgdmFyIGggPSB0aGlzLmhhbGxPZkZhbWU7CiAgICAgIE4gPSB0aGlzLnBvcHVsYXRpb25fc2l6ZTsKICAgICAgTmggPSB0aGlzLmhhbGxfb2ZfZmFtZV9zaXplOwoKICAgICAgLy8gc29ydCB0aGUgY2hyb21vc29tZXMgYnkgZml0bmVzcwogICAgICB0aGlzLnNvcnRCeUZpdG5lc3MoYyk7CiAgICAgIGlmICh0aGlzLmRlYnVnX21vZGUpIHsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhpICsgJzogJyArIE1hdGgucm91bmQoY1tpXS5maXRuZXNzICogMTAwKSAvIDEwMCk7CiAgICAgICAgfQogICAgICAgIGZvciAoaSA9IDU7IGkgPj0gMTsgaS0tKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhOIC0gaSArICc6ICcgKyBNYXRoLnJvdW5kKGNbTiAtIGldLmZpdG5lc3MgKiAxMDApIC8gMTAwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIGNvcGllcyBiZXN0IGZyb20gcG9wdWxhdGlvbiB0byBoYWxsIG9mIGZhbWU6CiAgICAgIGZvciAoaSA9IDA7IGkgPCBOaDsgaSsrKSB7CiAgICAgICAgaC5wdXNoKGNbaV0uY29weSgpKTsKICAgICAgfQoKICAgICAgLy8gc29ydHMgaGFsbCBvZiBmYW1lCiAgICAgIHRoaXMuc29ydEJ5Rml0bmVzcyhoKTsKICAgICAgLy8gY3V0cyBvZmYgaGFsbCBvZiBmYW1lIHRvIGtlZXAgb25seSBOaCBlbGVtZW50cwogICAgICBoID0gaC5zbGljZSgwLCBOaCk7CiAgICAgIGlmICh0aGlzLmRlYnVnX21vZGUpIHsKICAgICAgICBjb25zb2xlLmxvZygnaGFsbCBvZiBmYW1lOicpOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBNYXRoLm1pbihOaCwgMyk7IGkrKykgewogICAgICAgICAgY29uc29sZS5sb2coaSArICc6ICcgKyBNYXRoLnJvdW5kKGhbaV0uZml0bmVzcyAqIDEwMCkgLyAxMDApOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gYWx0ZXJzIHBvcHVsYXRpb246CgogICAgICB2YXIgTmVsaXRlID0gTWF0aC5mbG9vcihNYXRoLmZsb29yKHRoaXMuZWxpdGVfcGVyY2VudGFnZSAqIE4pIC8gMikgKiAyOyAvLyBldmVuIG51bWJlcgogICAgICBmb3IgKGkgPSBOZWxpdGU7IGkgPCBOOyBpICs9IDIpIHsKICAgICAgICB2YXIgcDEgPSByYW5kaSgwLCBOZWxpdGUpOwogICAgICAgIHZhciBwMiA9IHJhbmRpKDAsIE5lbGl0ZSk7CiAgICAgICAgY1twMV0uY3Jvc3NvdmVyKGNbcDJdLCBjW2ldLCBjW2kgKyAxXSk7CiAgICAgIH0KCiAgICAgIC8vIGxlYXZlcyB0aGUgbGFzdCBOaCBzbG90cyBmb3IgaGFsbCBvZiBmYW1lIGd1eXMuCiAgICAgIGZvciAoaSA9IDA7IGkgPCBOIC0gTmg7IGkrKykgewogICAgICAgIGNbaV0ubXV0YXRlKHRoaXMubXV0YXRpb25fcmF0ZSwgdGhpcy5tdXRhdGlvbl9zaXplKTsKICAgICAgfQoKICAgICAgLy8gc25lYWtpbHkgcHV0cyBpbiB0aGUgaGFsbCBvZiBmYW1lcnMgYmFjayBpbnRvIHRoZSBwb3B1bGF0aW9uIGF0IHRoZSBlbmQ6CiAgICAgIGZvciAoaSA9IDA7IGkgPCBOaDsgaSsrKSB7CiAgICAgICAgY1tOIC0gTmggKyBpXSA9IGhbaV0uY29weSgpOwogICAgICB9CgogICAgICAvLyBwZXJtdXRhdGlvbiBzdGVwIGluIENvU3lOZQogICAgICAvLyB3ZSBwZXJtdXRlIGFsbCB3ZWlnaHRzIGluIGVsaXRlIHNldCwgYW5kIGRvbid0IHByb2Itd2VpZ2h0IGFzIGluIEdvbWV6IDIwMDguCgogICAgICB2YXIgTnBlcm0gPSBOZWxpdGU7IC8vIHBlcm11dGUgdGhlIHdlaWdodHMgdXAgdG8gTnBlcm0uCiAgICAgIHZhciBwZXJtRGF0YSA9IHplcm9zKE5wZXJtKTsKICAgICAgdmFyIGxlbiA9IGNbMF0uZ2VuZS5sZW5ndGg7IC8vIG51bWJlciBvZiBlbGVtZW50cyBpbiBlYWNoIGdlbmUKICAgICAgZm9yIChqID0gMDsgaiA8IGxlbjsgaisrKSB7CiAgICAgICAgLy8gcG9wdWxhdGUgdGhlIGRhdGEgdG8gYmUgc2h1ZmZsZWQKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgTnBlcm07IGkrKykgewogICAgICAgICAgcGVybURhdGFbaV0gPSBjW2ldLmdlbmVbal07CiAgICAgICAgfQogICAgICAgIHBlcm1EYXRhID0gc2h1ZmZsZShwZXJtRGF0YSk7IC8vIHRoZSBtYWdpYyBpcyBzdXBwb3NlZCB0byBoYXBwZW4gaGVyZS4KICAgICAgICAvLyBwdXQgYmFjayB0aGUgc2h1ZmZsZWQgZGF0YSBiYWNrOgogICAgICAgIGZvciAoaSA9IDA7IGkgPCBOcGVybTsgaSsrKSB7CiAgICAgICAgICBjW2ldLmdlbmVbal0gPSBwZXJtRGF0YVtpXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyB2YXJpb3VzIHV0aWxzCiAgZ2xvYmFsLm1heGkgPSBtYXhpOwogIGdsb2JhbC5zYW1wbGVpID0gc2FtcGxlaTsKICBnbG9iYWwucmFuZGkgPSByYW5kaTsKICBnbG9iYWwucmFuZGYgPSByYW5kZjsKICBnbG9iYWwucmFuZG4gPSByYW5kbjsKICBnbG9iYWwuemVyb3MgPSB6ZXJvczsKICBnbG9iYWwuY29weSA9IGNvcHk7CiAgZ2xvYmFsLnNodWZmbGUgPSBzaHVmZmxlOwogIGdsb2JhbC5zb2Z0bWF4ID0gc29mdG1heDsKICBnbG9iYWwuYXNzZXJ0ID0gYXNzZXJ0OwoKICAvLyBjbGFzc2VzCiAgZ2xvYmFsLk1hdCA9IE1hdDsKICBnbG9iYWwuUmFuZE1hdCA9IFJhbmRNYXQ7CiAgZ2xvYmFsLmZvcndhcmRMU1RNID0gZm9yd2FyZExTVE07CiAgZ2xvYmFsLmluaXRMU1RNID0gaW5pdExTVE07CiAgZ2xvYmFsLmZvcndhcmRSTk4gPSBmb3J3YXJkUk5OOwogIGdsb2JhbC5pbml0Uk5OID0gaW5pdFJOTjsKCiAgLy8gb3B0aW1pemF0aW9uCiAgZ2xvYmFsLlNvbHZlciA9IFNvbHZlcjsKICBnbG9iYWwuR3JhcGggPSBHcmFwaDsKCiAgLy8gb3RoZXIgdXRpbHMKICBnbG9iYWwuZmxhdHRlbk1vZGVsID0gZmxhdHRlbk1vZGVsOwogIGdsb2JhbC5nZXRNb2RlbFNpemUgPSBnZXRNb2RlbFNpemU7CiAgZ2xvYmFsLmNvcHlNb2RlbCA9IGNvcHlNb2RlbDsKICBnbG9iYWwuemVyb091dE1vZGVsID0gemVyb091dE1vZGVsOwogIGdsb2JhbC5udW1HcmFkaWVudCA9IG51bUdyYWRpZW50OwogIGdsb2JhbC5wdXNoVG9Nb2RlbCA9IHB1c2hUb01vZGVsOwogIGdsb2JhbC5yYW5kb21pemVNb2RlbCA9IHJhbmRvbWl6ZU1vZGVsOwoKICAvLyBtb2RlbCBjb21wcmVzc2lvbgogIGdsb2JhbC5jb21wcmVzc01vZGVsID0gY29tcHJlc3NNb2RlbDsKICBnbG9iYWwuZGVjb21wcmVzc01vZGVsID0gZGVjb21wcmVzc01vZGVsOwoKICAvLyBnYQogIGdsb2JhbC5HQVRyYWluZXIgPSBHQVRyYWluZXI7CiAgZ2xvYmFsLkdlbmUgPSBHZW5lOwp9KShSKTsKKGZ1bmN0aW9uIChsaWIpIHsKICAidXNlIHN0cmljdCI7CgogIGlmICh0eXBlb2YgbW9kdWxlID09PSAidW5kZWZpbmVkIiB8fCB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICJ1bmRlZmluZWQiKSB7CiAgICB3aW5kb3cuanNmZWF0ID0gbGliOyAvLyBpbiBvcmRpbmFyeSBicm93c2VyIGF0dGFjaCBsaWJyYXJ5IHRvIHdpbmRvdwogIH0gZWxzZSB7CiAgICBtb2R1bGUuZXhwb3J0cyA9IGxpYjsgLy8gaW4gbm9kZWpzCiAgfQp9KShSKTsKLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyAqLw=="},{"version":3,"names":["R","global","assert","condition","message","Error","return_v","v_val","gaussRandom","u","Math","random","v","r","c","sqrt","log","randf","a","b","randi","floor","randn","mu","std","zeros","n","isNaN","ArrayBuffer","arr","Array","i","console","Float32Array","copy","floatArray","length","result","shuffle","origArray","randomIndex","temp","N","Mat","d","w","dw","prototype","get","row","col","ix","set","setFromArray","j","len","toString","precision_","result_w","precision","round","print","dct2","B","k","l","cos","PI","SQRT2","idct2","A","toJSON","json","fromJSON","RandMat","m","fillRandn","fillRand","lo","hi","Graph","needs_backprop","backprop","backward","rowPluck","out","push","sin","mwi","gaussian","exp","tanh","sigmoid","sig","relu","max","abs","mul","m1","m2","dot","add","eltmul","softmax","maxval","s","Solver","decay_rate","smooth_eps","step_cache","step","model","step_size","regc","clipval","solver_stats","num_clipped","num_tot","hasOwnProperty","mdwi","ratio_clipped","initLSTM","input_size","hidden_sizes","output_size","hidden_size","prev_size","Whd","bd","forwardLSTM","G","x","prev","hidden_prevs","cell_prevs","h","hidden","cell","input_vector","hidden_prev","cell_prev","h0","h1","input_gate","h2","h3","forget_gate","h4","h5","output_gate","h6","h7","cell_write","retain_cell","write_cell","cell_d","hidden_d","output","initRNN","forwardRNN","maxi","maxv","maxix","samplei","getModelSize","flattenModel","gradient_","gradientMode","pushToModel","dump","copyModel","zeroOutModel","gradientAsWell_","compressModel","nCoef","nRow","nCol","z","min","decompressModel","small","numGradient","f","avgDiff_","epsilon_","epsilon","avgDiff","base","upBase","downBase","uptick","downtick","numGrad","avgPercentDiff","avgPercentDiffCounter","Gene","initFloatArray","fitness","nTrial","gene","burstMutate","burst_magnitude_","burst_magnitude","randomize","mutate","mutation_rate_","mutation_rate","crossover","partner","kid1","kid2","onePoint","onePointMode","cross","copyFrom","g","copyFromArray","sourceFloatArray","newFloatArray","randomizeModel","magnitude_","modelSize","magnitude","GATrainer","options_","init_gene_array","options","hall_of_fame_size","population_size","init_weight_magnitude","elite_percentage","mutation_size","debug_mode","gene_size","initGene","genes","hallOfFame","sortByFitness","sort","pushGeneToModel","pushBestGeneToModel","pushHistToModel","Nh","pushBestHistToModel","flushFitness","sortGenes","evolve","slice","Nelite","p1","p2","Nperm","permData","lib","module","exports","window","jsfeat"],"sources":["/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/src/lib/recurrent.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\n// MIT License\r\n\r\n// heavily modified recurrent.js library for use in genetic art\r\n// with DCT compression, CoSyNe neuroevolution\r\n// sin, cos, gaussian, abs activations\r\nvar R = {};\r\n\r\n(function(global) {\r\n  \"use strict\";\r\n\r\n  // Utility fun\r\n  function assert(condition, message) {\r\n    // from http://stackoverflow.com/questions/15313418/javascript-assert\r\n    if (!condition) {\r\n      message = message || \"Assertion failed\";\r\n      if (typeof Error !== \"undefined\") {\r\n        throw new Error(message);\r\n      }\r\n      throw message; // Fallback\r\n    }\r\n  }\r\n\r\n  // Random numbers utils\r\n  var return_v = false;\r\n  var v_val = 0.0;\r\n  var gaussRandom = function() {\r\n    if(return_v) {\r\n      return_v = false;\r\n      return v_val;\r\n    }\r\n    var u = 2*Math.random()-1;\r\n    var v = 2*Math.random()-1;\r\n    var r = u*u + v*v;\r\n    if(r === 0 || r > 1) return gaussRandom();\r\n    var c = Math.sqrt(-2*Math.log(r)/r);\r\n    v_val = v*c; // cache this\r\n    return_v = true;\r\n    return u*c;\r\n  };\r\n  var randf = function(a, b) { return Math.random()*(b-a)+a; };\r\n  var randi = function(a, b) { return Math.floor(Math.random()*(b-a)+a); };\r\n  var randn = function(mu, std){ return mu+gaussRandom()*std; };\r\n\r\n  // helper function returns array of zeros of length n\r\n  // and uses typed arrays if available\r\n  var zeros = function(n) {\r\n    if(typeof(n)==='undefined' || isNaN(n)) { return []; }\r\n    if(typeof ArrayBuffer === 'undefined') {\r\n      // lacking browser support\r\n      var arr = new Array(n);\r\n      for(var i=0;i<n;i++) { arr[i] = 0; }\r\n      return arr;\r\n    } else {\r\n      if (n > 150000) console.log('creating a float array of length = '+n);\r\n      //return new Float64Array(n);\r\n      return new Float32Array(n);\r\n    }\r\n  };\r\n\r\n  var copy = function(floatArray) {\r\n    // returns a copy of floatArray\r\n    var n = floatArray.length;\r\n    var result = zeros(n);\r\n    for (var i=0;i<n;i++) {\r\n      result[i]=floatArray[i];\r\n    }\r\n    return result;\r\n  };\r\n\r\n  var shuffle = function(origArray) {\r\n    // returns a newArray which is a shuffled version of origArray\r\n    var i, randomIndex;\r\n    var temp;\r\n    var N = origArray.length;\r\n    var result = zeros(N);\r\n    for (i=0;i<N;i++) {\r\n      result[i] = origArray[i];\r\n    }\r\n    for (i=0;i<N;i++) {\r\n      // swaps i with randomIndex\r\n      randomIndex = randi(0, N);\r\n      temp = result[randomIndex];\r\n      result[randomIndex] = result[i];\r\n      result[i] = temp;\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Mat holds a matrix\r\n  var Mat = function(n,d) {\r\n    // n is number of rows d is number of columns\r\n    this.n = n;\r\n    this.d = d;\r\n    this.w = zeros(n * d);\r\n    this.dw = zeros(n * d);\r\n  };\r\n  Mat.prototype = {\r\n    get: function(row, col) {\r\n      // slow but careful accessor function\r\n      // we want row-major order\r\n      var ix = (this.d * row) + col;\r\n      assert(ix >= 0 && ix < this.w.length);\r\n      return this.w[ix];\r\n    },\r\n    set: function(row, col, v) {\r\n      // slow but careful accessor function\r\n      var ix = (this.d * row) + col;\r\n      assert(ix >= 0 && ix < this.w.length);\r\n      this.w[ix] = v;\r\n    },\r\n    setFromArray: function(a) {\r\n      var i, j;\r\n      assert(this.n === a.length && this.d === a[0].length);\r\n      for (i=0;i<this.n;i++) {\r\n        for (j=0;j<this.d;j++) {\r\n          this.set(i, j, a[i][j]);\r\n        }\r\n      }\r\n    },\r\n    copy: function() {\r\n      // return a copy of Mat\r\n      var result = new Mat(this.n, this.d);\r\n      var i, len;\r\n      len = this.n*this.d;\r\n      for (i = 0; i < len; i++) {\r\n        result.w[i] = this.w[i];\r\n        result.dw[i] = this.dw[i];\r\n      }\r\n      return result;\r\n    },\r\n    toString: function(precision_) {\r\n      var result_w = '[';\r\n      var i, j;\r\n      var n, d;\r\n      var ix;\r\n      var precision = 10e-4 || precision_;\r\n      precision = 1/precision;\r\n      n = this.n;\r\n      d = this.d;\r\n      for (i=0;i<n;i++) {\r\n        for (j=0;j<d;j++) {\r\n          ix = i*d+j;\r\n          assert(ix >= 0 && ix < this.w.length);\r\n          result_w+=''+Math.round(precision*this.w[ix])/precision+',\\t';\r\n        }\r\n        result_w+='\\n';\r\n      }\r\n      result_w+=']';\r\n      return result_w;\r\n    },\r\n    print: function() {\r\n      console.log(this.toString());\r\n    },\r\n    dct2: function() {\r\n      // inefficient implementation of discrete cosine transform (2d)\r\n      // ref: http://www.mathworks.com/help/images/ref/dct2.html\r\n      var n = this.n;\r\n      var d = this.d;\r\n      var B = new Mat(n, d); // resulting matrix\r\n      var i, j, k, l;\r\n      var temp;\r\n      for (i=0;i<n;i++) {\r\n        for (j=0;j<d;j++) {\r\n          temp=0;\r\n          for (k=0;k<n;k++) {\r\n            for (l=0;l<d;l++) {\r\n              temp=temp+this.w[k*d+l]*Math.cos(i*Math.PI*((2*k)+1)/(2*n))*Math.cos(j*Math.PI*((2*l)+1)/(2*d));\r\n            }\r\n          }\r\n          if ((i===0)&&(j!==0)) temp*=1/Math.SQRT2;\r\n          if ((j===0)&&(i!==0)) temp*=1/Math.SQRT2;\r\n          if ((j===0)&&(i===0)) temp*=0.5;\r\n          B.w[i*d+j]=temp*2/Math.sqrt(n*d);\r\n        }\r\n      }\r\n      return B;\r\n    },\r\n    idct2: function() {\r\n      // inefficient implementation of inverse discrete cosine transform (2d)\r\n      // ref: http://www.mathworks.com/help/images/ref/idct2.html\r\n      var n = this.n;\r\n      var d = this.d;\r\n      var A = new Mat(n, d); // resulting matrix\r\n      var i, j, k, l;\r\n      var temp;\r\n      for (i=0;i<n;i++) {\r\n        for (j=0;j<d;j++) {\r\n          A.w[i*d+j]=0;\r\n          for (k=0;k<n;k++) {\r\n            for (l=0;l<d;l++) {\r\n              temp=this.w[k*d+l]*Math.cos((((2*i)+1)*k*Math.PI)/(2*n))*Math.cos((((2*j)+1)*l*Math.PI)/(2*d));\r\n\r\n              if ((k===0)&&(l===0)) temp*=0.5;\r\n              if ((k!==0)&&(l===0)) temp*=1/Math.SQRT2;\r\n              if ((k===0)&&(l!==0)) temp*=1/Math.SQRT2;\r\n\r\n              A.w[i*d+j]+=temp*2/Math.sqrt(n*d);\r\n\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return A;\r\n    },\r\n    toJSON: function() {\r\n      var json = {};\r\n      json.n = this.n;\r\n      json.d = this.d;\r\n      json.w = this.w;\r\n      return json;\r\n    },\r\n    fromJSON: function(json) {\r\n      this.n = json.n;\r\n      this.d = json.d;\r\n      this.w = zeros(this.n * this.d);\r\n      this.dw = zeros(this.n * this.d);\r\n      for(var i=0,n=this.n * this.d;i<n;i++) {\r\n        this.w[i] = json.w[i]; // copy over weights\r\n      }\r\n    }\r\n  };\r\n\r\n  // return Mat but filled with random numbers from gaussian\r\n  var RandMat = function(n,d,mu,std) {\r\n    var m = new Mat(n, d);\r\n    fillRandn(m,mu || 0,std || 0.08); // kind of :P\r\n    return m;\r\n  };\r\n\r\n  // Mat utils\r\n  // fill matrix with random gaussian numbers\r\n  var fillRandn = function(m, mu, std) { for(var i=0,n=m.w.length;i<n;i++) { m.w[i] = randn(mu, std); } };\r\n  var fillRand = function(m, lo, hi) { for(var i=0,n=m.w.length;i<n;i++) { m.w[i] = randf(lo, hi); } };\r\n\r\n  // Transformer definitions\r\n  var Graph = function(needs_backprop) {\r\n    if(typeof needs_backprop === 'undefined') { needs_backprop = true; }\r\n    this.needs_backprop = needs_backprop;\r\n\r\n    // this will store a list of functions that perform backprop,\r\n    // in their forward pass order. So in backprop we will go\r\n    // backwards and evoke each one\r\n    this.backprop = [];\r\n  };\r\n  Graph.prototype = {\r\n    backward: function() {\r\n      for(var i=this.backprop.length-1;i>=0;i--) {\r\n        this.backprop[i](); // tick!\r\n      }\r\n    },\r\n    rowPluck: function(m, ix) {\r\n      // pluck a row of m with index ix and return it as col vector\r\n      assert(ix >= 0 && ix < m.n);\r\n      var d = m.d;\r\n      var out = new Mat(d, 1);\r\n      for(var i=0,n=d;i<n;i++){ out.w[i] = m.w[d * ix + i]; } // copy over the data\r\n\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0,n=d;i<n;i++){ m.dw[d * ix + i] += out.dw[i]; }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n    sin: function(m) {\r\n      // tanh nonlinearity\r\n      var out = new Mat(m.n, m.d);\r\n      var n = m.w.length;\r\n      for(var i=0;i<n;i++) {\r\n        out.w[i] = Math.sin(m.w[i]);\r\n      }\r\n\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0;i<n;i++) {\r\n            // grad for z = sin(x) is cos(x)\r\n            var mwi = out.w[i];\r\n            m.dw[i] += Math.cos(m.w[i]) * out.dw[i];\r\n          }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n    cos: function(m) {\r\n      // tanh nonlinearity\r\n      var out = new Mat(m.n, m.d);\r\n      var n = m.w.length;\r\n      for(var i=0;i<n;i++) {\r\n        out.w[i] = Math.cos(m.w[i]);\r\n      }\r\n\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0;i<n;i++) {\r\n            // grad for z = sin(x) is cos(x)\r\n            var mwi = out.w[i];\r\n            m.dw[i] += -Math.sin(m.w[i]) * out.dw[i];\r\n          }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n    gaussian: function(m) {\r\n      // tanh nonlinearity\r\n      var out = new Mat(m.n, m.d);\r\n      var n = m.w.length;\r\n      //var c = (1.0/Math.sqrt(2*Math.PI)); // constant of 1 / sqrt(2*pi)\r\n      var c = 1.0; // make amplitude bigger than normal gaussian\r\n      for(var i=0;i<n;i++) {\r\n        out.w[i] = c*Math.exp(-m.w[i]*m.w[i]/2);\r\n      }\r\n\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0;i<n;i++) {\r\n            // grad for z = sin(x) is cos(x)\r\n            var mwi = out.w[i];\r\n            m.dw[i] += -m.w[i] * mwi * out.dw[i];\r\n          }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n    tanh: function(m) {\r\n      // tanh nonlinearity\r\n      var out = new Mat(m.n, m.d);\r\n      var n = m.w.length;\r\n      for(var i=0;i<n;i++) {\r\n        out.w[i] = Math.tanh(m.w[i]);\r\n      }\r\n\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0;i<n;i++) {\r\n            // grad for z = tanh(x) is (1 - z^2)\r\n            var mwi = out.w[i];\r\n            m.dw[i] += (1.0 - mwi * mwi) * out.dw[i];\r\n          }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n    sigmoid: function(m) {\r\n      // sigmoid nonlinearity\r\n      var out = new Mat(m.n, m.d);\r\n      var n = m.w.length;\r\n      for(var i=0;i<n;i++) {\r\n        out.w[i] = sig(m.w[i]);\r\n      }\r\n\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0;i<n;i++) {\r\n            // grad for z = sigmoid(x) is z(1 - z)\r\n            var mwi = out.w[i];\r\n            m.dw[i] += mwi * (1.0 - mwi) * out.dw[i];\r\n          }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n    relu: function(m) {\r\n      var out = new Mat(m.n, m.d);\r\n      var n = m.w.length;\r\n      for(var i=0;i<n;i++) {\r\n        out.w[i] = Math.max(0, m.w[i]); // relu\r\n      }\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0;i<n;i++) {\r\n            m.dw[i] += m.w[i] > 0 ? out.dw[i] : 0.0;\r\n          }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n    abs: function(m) {\r\n      var out = new Mat(m.n, m.d);\r\n      var n = m.w.length;\r\n      for(var i=0;i<n;i++) {\r\n        out.w[i] = Math.abs(m.w[i]); // relu\r\n      }\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0;i<n;i++) {\r\n            m.dw[i] += m.w[i] > 0 ? out.dw[i] : -out.dw[i];\r\n          }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n    mul: function(m1, m2) {\r\n      // multiply matrices m1 * m2\r\n      assert(m1.d === m2.n, 'matmul dimensions misaligned');\r\n\r\n      var n = m1.n;\r\n      var d = m2.d;\r\n      var out = new Mat(n,d);\r\n      for(var i=0;i<m1.n;i++) { // loop over rows of m1\r\n        for(var j=0;j<m2.d;j++) { // loop over cols of m2\r\n          var dot = 0.0;\r\n          for(var k=0;k<m1.d;k++) { // dot product loop\r\n            dot += m1.w[m1.d*i+k] * m2.w[m2.d*k+j];\r\n          }\r\n          out.w[d*i+j] = dot;\r\n        }\r\n      }\r\n\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0;i<m1.n;i++) { // loop over rows of m1\r\n            for(var j=0;j<m2.d;j++) { // loop over cols of m2\r\n              for(var k=0;k<m1.d;k++) { // dot product loop\r\n                var b = out.dw[d*i+j];\r\n                m1.dw[m1.d*i+k] += m2.w[m2.d*k+j] * b;\r\n                m2.dw[m2.d*k+j] += m1.w[m1.d*i+k] * b;\r\n              }\r\n            }\r\n          }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n    add: function(m1, m2) {\r\n      assert(m1.w.length === m2.w.length);\r\n\r\n      var out = new Mat(m1.n, m1.d);\r\n      for(var i=0,n=m1.w.length;i<n;i++) {\r\n        out.w[i] = m1.w[i] + m2.w[i];\r\n      }\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0,n=m1.w.length;i<n;i++) {\r\n            m1.dw[i] += out.dw[i];\r\n            m2.dw[i] += out.dw[i];\r\n          }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n    eltmul: function(m1, m2) {\r\n      assert(m1.w.length === m2.w.length);\r\n\r\n      var out = new Mat(m1.n, m1.d);\r\n      for(var i=0,n=m1.w.length;i<n;i++) {\r\n        out.w[i] = m1.w[i] * m2.w[i];\r\n      }\r\n      if(this.needs_backprop) {\r\n        var backward = function() {\r\n          for(var i=0,n=m1.w.length;i<n;i++) {\r\n            m1.dw[i] += m2.w[i] * out.dw[i];\r\n            m2.dw[i] += m1.w[i] * out.dw[i];\r\n          }\r\n        };\r\n        this.backprop.push(backward);\r\n      }\r\n      return out;\r\n    },\r\n  };\r\n\r\n  var softmax = function(m) {\r\n      var out = new Mat(m.n, m.d); // probability volume\r\n      var maxval = -999999;\r\n      var i, n;\r\n      for(i=0,n=m.w.length;i<n;i++) { if(m.w[i] > maxval) maxval = m.w[i]; }\r\n\r\n      var s = 0.0;\r\n      for(i=0,n=m.w.length;i<n;i++) {\r\n        out.w[i] = Math.exp(m.w[i] - maxval);\r\n        s += out.w[i];\r\n      }\r\n      for(i=0,n=m.w.length;i<n;i++) { out.w[i] /= s; }\r\n\r\n      // no backward pass here needed\r\n      // since we will use the computed probabilities outside\r\n      // to set gradients directly on m\r\n      return out;\r\n  };\r\n\r\n  var Solver = function() {\r\n    this.decay_rate = 0.999;\r\n    this.smooth_eps = 1e-8;\r\n    this.step_cache = {};\r\n  };\r\n  Solver.prototype = {\r\n    step: function(model, step_size, regc, clipval) {\r\n      // perform parameter update\r\n      var solver_stats = {};\r\n      var num_clipped = 0;\r\n      var num_tot = 0;\r\n      for(var k in model) {\r\n        if(model.hasOwnProperty(k)) {\r\n          var m = model[k]; // mat ref\r\n          if(!(k in this.step_cache)) { this.step_cache[k] = new Mat(m.n, m.d); }\r\n          var s = this.step_cache[k];\r\n          for(var i=0,n=m.w.length;i<n;i++) {\r\n\r\n            // rmsprop adaptive learning rate\r\n            var mdwi = m.dw[i];\r\n            s.w[i] = s.w[i] * this.decay_rate + (1.0 - this.decay_rate) * mdwi * mdwi;\r\n\r\n            // gradient clip\r\n            if(mdwi > clipval) {\r\n              mdwi = clipval;\r\n              num_clipped++;\r\n            }\r\n            if(mdwi < -clipval) {\r\n              mdwi = -clipval;\r\n              num_clipped++;\r\n            }\r\n            num_tot++;\r\n\r\n            // update (and regularize)\r\n            m.w[i] += - step_size * mdwi / Math.sqrt(s.w[i] + this.smooth_eps) - regc * m.w[i];\r\n            m.dw[i] = 0; // reset gradients for next iteration\r\n          }\r\n        }\r\n      }\r\n      solver_stats.ratio_clipped = num_clipped*1.0/num_tot;\r\n      return solver_stats;\r\n    }\r\n  };\r\n\r\n  var initLSTM = function(input_size, hidden_sizes, output_size) {\r\n    // hidden size should be a list\r\n\r\n    var model = {};\r\n    var hidden_size;\r\n    var prev_size;\r\n    for(var d=0;d<hidden_sizes.length;d++) { // loop over depths\r\n      prev_size = d === 0 ? input_size : hidden_sizes[d - 1];\r\n      hidden_size = hidden_sizes[d];\r\n\r\n      // gates parameters\r\n      model['Wix'+d] = new RandMat(hidden_size, prev_size , 0, 0.08);\r\n      model['Wih'+d] = new RandMat(hidden_size, hidden_size , 0, 0.08);\r\n      model['bi'+d] = new Mat(hidden_size, 1);\r\n      model['Wfx'+d] = new RandMat(hidden_size, prev_size , 0, 0.08);\r\n      model['Wfh'+d] = new RandMat(hidden_size, hidden_size , 0, 0.08);\r\n      model['bf'+d] = new Mat(hidden_size, 1);\r\n      model['Wox'+d] = new RandMat(hidden_size, prev_size , 0, 0.08);\r\n      model['Woh'+d] = new RandMat(hidden_size, hidden_size , 0, 0.08);\r\n      model['bo'+d] = new Mat(hidden_size, 1);\r\n      // cell write params\r\n      model['Wcx'+d] = new RandMat(hidden_size, prev_size , 0, 0.08);\r\n      model['Wch'+d] = new RandMat(hidden_size, hidden_size , 0, 0.08);\r\n      model['bc'+d] = new Mat(hidden_size, 1);\r\n    }\r\n    // decoder params\r\n    model.Whd = new RandMat(output_size, hidden_size, 0, 0.08);\r\n    model.bd = new Mat(output_size, 1);\r\n    return model;\r\n  };\r\n\r\n  var forwardLSTM = function(G, model, hidden_sizes, x, prev) {\r\n    // forward prop for a single tick of LSTM\r\n    // G is graph to append ops to\r\n    // model contains LSTM parameters\r\n    // x is 1D column vector with observation\r\n    // prev is a struct containing hidden and cell\r\n    // from previous iteration\r\n\r\n    var hidden_prevs;\r\n    var cell_prevs;\r\n    var d;\r\n\r\n    if(typeof prev.h === 'undefined') {\r\n      hidden_prevs = [];\r\n      cell_prevs = [];\r\n      for(d=0;d<hidden_sizes.length;d++) {\r\n        hidden_prevs.push(new R.Mat(hidden_sizes[d],1));\r\n        cell_prevs.push(new R.Mat(hidden_sizes[d],1));\r\n      }\r\n    } else {\r\n      hidden_prevs = prev.h;\r\n      cell_prevs = prev.c;\r\n    }\r\n\r\n    var hidden = [];\r\n    var cell = [];\r\n    for(d=0;d<hidden_sizes.length;d++) {\r\n\r\n      var input_vector = d === 0 ? x : hidden[d-1];\r\n      var hidden_prev = hidden_prevs[d];\r\n      var cell_prev = cell_prevs[d];\r\n\r\n      // input gate\r\n      var h0 = G.mul(model['Wix'+d], input_vector);\r\n      var h1 = G.mul(model['Wih'+d], hidden_prev);\r\n      var input_gate = G.sigmoid(G.add(G.add(h0,h1),model['bi'+d]));\r\n\r\n      // forget gate\r\n      var h2 = G.mul(model['Wfx'+d], input_vector);\r\n      var h3 = G.mul(model['Wfh'+d], hidden_prev);\r\n      var forget_gate = G.sigmoid(G.add(G.add(h2, h3),model['bf'+d]));\r\n\r\n      // output gate\r\n      var h4 = G.mul(model['Wox'+d], input_vector);\r\n      var h5 = G.mul(model['Woh'+d], hidden_prev);\r\n      var output_gate = G.sigmoid(G.add(G.add(h4, h5),model['bo'+d]));\r\n\r\n      // write operation on cells\r\n      var h6 = G.mul(model['Wcx'+d], input_vector);\r\n      var h7 = G.mul(model['Wch'+d], hidden_prev);\r\n      var cell_write = G.tanh(G.add(G.add(h6, h7),model['bc'+d]));\r\n\r\n      // compute new cell activation\r\n      var retain_cell = G.eltmul(forget_gate, cell_prev); // what do we keep from cell\r\n      var write_cell = G.eltmul(input_gate, cell_write); // what do we write to cell\r\n      var cell_d = G.add(retain_cell, write_cell); // new cell contents\r\n\r\n      // compute hidden state as gated, saturated cell activations\r\n      var hidden_d = G.eltmul(output_gate, G.tanh(cell_d));\r\n\r\n      hidden.push(hidden_d);\r\n      cell.push(cell_d);\r\n    }\r\n\r\n    // one decoder to outputs at end\r\n    var output = G.add(G.mul(model.Whd, hidden[hidden.length - 1]),model.bd);\r\n\r\n    // return cell memory, hidden representation and output\r\n    return {'h':hidden, 'c':cell, 'o' : output};\r\n  };\r\n\r\n  var initRNN = function(input_size, hidden_sizes, output_size) {\r\n    // hidden size should be a list\r\n\r\n    var model = {};\r\n    var hidden_size, prev_size;\r\n    for(var d=0;d<hidden_sizes.length;d++) { // loop over depths\r\n      prev_size = d === 0 ? input_size : hidden_sizes[d - 1];\r\n      hidden_size = hidden_sizes[d];\r\n      model['Wxh'+d] = new R.RandMat(hidden_size, prev_size , 0, 0.08);\r\n      model['Whh'+d] = new R.RandMat(hidden_size, hidden_size, 0, 0.08);\r\n      model['bhh'+d] = new R.Mat(hidden_size, 1);\r\n    }\r\n    // decoder params\r\n    model.Whd = new RandMat(output_size, hidden_size, 0, 0.08);\r\n    model.bd = new Mat(output_size, 1);\r\n    return model;\r\n  };\r\n\r\n  var forwardRNN = function(G, model, hidden_sizes, x, prev) {\r\n    // forward prop for a single tick of RNN\r\n    // G is graph to append ops to\r\n    // model contains RNN parameters\r\n    // x is 1D column vector with observation\r\n    // prev is a struct containing hidden activations from last step\r\n\r\n    var hidden_prevs;\r\n    var d;\r\n    if(typeof prev.h === 'undefined') {\r\n      hidden_prevs = [];\r\n      for(d=0;d<hidden_sizes.length;d++) {\r\n        hidden_prevs.push(new R.Mat(hidden_sizes[d],1));\r\n      }\r\n    } else {\r\n      hidden_prevs = prev.h;\r\n    }\r\n\r\n    var hidden = [];\r\n    for(d=0;d<hidden_sizes.length;d++) {\r\n\r\n      var input_vector = d === 0 ? x : hidden[d-1];\r\n      var hidden_prev = hidden_prevs[d];\r\n\r\n      var h0 = G.mul(model['Wxh'+d], input_vector);\r\n      var h1 = G.mul(model['Whh'+d], hidden_prev);\r\n      var hidden_d = G.relu(G.add(G.add(h0, h1), model['bhh'+d]));\r\n\r\n      hidden.push(hidden_d);\r\n    }\r\n\r\n    // one decoder to outputs at end\r\n    var output = G.add(G.mul(model.Whd, hidden[hidden.length - 1]),model.bd);\r\n\r\n    // return cell memory, hidden representation and output\r\n    return {'h':hidden, 'o' : output};\r\n  };\r\n\r\n  var sig = function(x) {\r\n    // helper function for computing sigmoid\r\n    return 1.0/(1+Math.exp(-x));\r\n  };\r\n\r\n  var maxi = function(w) {\r\n    // argmax of array w\r\n    var maxv = w[0];\r\n    var maxix = 0;\r\n    for(var i=1,n=w.length;i<n;i++) {\r\n      var v = w[i];\r\n      if(v > maxv) {\r\n        maxix = i;\r\n        maxv = v;\r\n      }\r\n    }\r\n    return maxix;\r\n  };\r\n\r\n  var samplei = function(w) {\r\n    // sample argmax from w, assuming w are\r\n    // probabilities that sum to one\r\n    var r = randf(0,1);\r\n    var x = 0.0;\r\n    var i = 0;\r\n    while(true) {\r\n      x += w[i];\r\n      if(x > r) { return i; }\r\n      i++;\r\n    }\r\n    return w.length - 1; // pretty sure we should never get here?\r\n  };\r\n\r\n  var getModelSize = function(model) {\r\n    // returns the size (ie, number of floats) used in a model\r\n    var len = 0;\r\n    var k;\r\n    var m;\r\n    for(k in model) {\r\n      if(model.hasOwnProperty(k)) {\r\n        m = model[k];\r\n        len += m.w.length;\r\n      }\r\n    }\r\n    return len;\r\n  };\r\n\r\n  // other utils\r\n  var flattenModel = function(model, gradient_) {\r\n    // returns an float array containing a dump of model's params in order\r\n    // if gradient_ is true, the the flatten model returns the dw's, rather whan w's.\r\n    var len = 0; // determine length of dump\r\n    var i = 0;\r\n    var j;\r\n    var k;\r\n    var m;\r\n    var gradientMode = false || gradient_;\r\n    len = getModelSize(model);\r\n    var result = R.zeros(len);\r\n    for(k in model) {\r\n      if(model.hasOwnProperty(k)) {\r\n        m = model[k];\r\n        len = m.w.length;\r\n        for (j = 0; j < len; j++) {\r\n          if (gradientMode) {\r\n            result[i] = m.dw[j];\r\n          } else {\r\n            result[i] = m.w[j];\r\n          }\r\n          i++;\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n  var pushToModel = function(model, dump, gradient_) {\r\n    // pushes a float array containing a dump of model's params into a model\r\n    // if gradient_ is true, dump will be pushed to dw's, rather whan w's.\r\n    var len = 0; // determine length of dump\r\n    var i = 0;\r\n    var j;\r\n    var k;\r\n    var m;\r\n    var gradientMode = false || gradient_;\r\n    len = getModelSize(model);\r\n    assert(dump.length === len); // make sure the array dump has same len as model\r\n    for(k in model) {\r\n      if(model.hasOwnProperty(k)) {\r\n        m = model[k];\r\n        len = m.w.length;\r\n        for (j = 0; j < len; j++) {\r\n          if (gradientMode) {\r\n            m.dw[j] = dump[i];\r\n          } else {\r\n            m.w[j] = dump[i];\r\n          }\r\n          i++;\r\n        }\r\n      }\r\n    }\r\n  };\r\n  var copyModel = function(model) {\r\n    // returns an exact copy of a model\r\n    var k;\r\n    var m;\r\n    var result = [];\r\n    for(k in model) {\r\n      if(model.hasOwnProperty(k)) {\r\n        m = model[k];\r\n        result[k] = m.copy();\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n  var zeroOutModel = function(model, gradientAsWell_) {\r\n    // zeros out every element (including dw, if gradient_ is true) of model\r\n    var len = 0; // determine length of dump\r\n    var j;\r\n    var k;\r\n    var m;\r\n    var gradientMode = false || gradientAsWell_;\r\n\r\n    for(k in model) {\r\n      if(model.hasOwnProperty(k)) {\r\n        m = model[k];\r\n        len = m.w.length;\r\n        for (j = 0; j < len; j++) {\r\n          if (gradientMode) {\r\n            m.dw[j] = 0;\r\n          }\r\n          m.w[j] = 0;\r\n        }\r\n      }\r\n    }\r\n  };\r\n  var compressModel = function(model, nCoef) {\r\n    // returns a compressed model using 2d-dct\r\n    // each model param will be compressed down to:\r\n    // min(nRow, nCoef), min(nCol, nCoef)\r\n    var k;\r\n    var m;\r\n    var nRow, nCol;\r\n    var result = [];\r\n    var z; // dct transformed matrix\r\n    var i, j;\r\n    for(k in model) {\r\n      if(model.hasOwnProperty(k)) {\r\n        m = model[k];\r\n        z = m.dct2();\r\n        nRow = Math.min(z.n, nCoef);\r\n        nCol = Math.min(z.d, nCoef);\r\n        result[k] = new Mat(nRow, nCol);\r\n        for (i=0;i<nRow;i++) {\r\n          for (j=0;j<nCol;j++) {\r\n            result[k].set(i, j, z.get(i, j));\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n  var decompressModel = function(small, model) {\r\n    // decompresses small (a compressed model) into model using idct\r\n    var k;\r\n    var m, s;\r\n    var nRow, nCol;\r\n    var z; // idct transformed matrix\r\n    var i, j;\r\n    for(k in small) {\r\n      if(small.hasOwnProperty(k)) {\r\n        s = small[k];\r\n        m = model[k];\r\n        nRow = m.n;\r\n        nCol = m.d;\r\n        z = new Mat(nRow, nCol);\r\n        for (i=0;i<s.n;i++) {\r\n          for (j=0;j<s.d;j++) {\r\n            z.set(i, j, s.get(i, j));\r\n          }\r\n        }\r\n        model[k] = z.idct2();\r\n      }\r\n    }\r\n  };\r\n  var numGradient = function(f, model, avgDiff_, epsilon_) {\r\n    // calculates numerical gradient.  fitness f is forward pass function passed in is a function of model only.\r\n    // f will be run many times when the params of each indiv weight changes\r\n    // numerical gradient is computed off average of uptick and downtick gradient, so O(e^2) noise.\r\n    // returns a mat object, where .w holds percentage differences, and .dw holds numerical gradient\r\n    // if avgDiff_ mode is set to true, returns the average percentage diff rather than the actual gradients\r\n    var epsilon = 1e-10 || epsilon_;\r\n    var avgDiff = false || avgDiff_;\r\n    var base = f(model);\r\n    var upBase, downBase;\r\n    var uptick = copyModel(model); // uptick.w holds the ticked weight value\r\n    var downtick = copyModel(model); // opposite of uptick.w\r\n    var numGrad = copyModel(model); // numGrad.dw holds the numerical gradient.\r\n\r\n    var avgPercentDiff = 0.0;\r\n    var avgPercentDiffCounter = 0;\r\n\r\n    var i, len;\r\n    var m;\r\n    var k;\r\n    var result = [];\r\n    for(k in model) {\r\n      if(model.hasOwnProperty(k)) {\r\n        m = model[k];\r\n        len = m.w.length;\r\n        for (i = 0; i < len; i++) {\r\n          // change the weights by a small amount to find gradient\r\n          uptick[k].w[i] += epsilon;\r\n          downtick[k].w[i] -= epsilon;\r\n          upBase = f(uptick);\r\n          downBase = f(downtick);\r\n          // store numerical gradient\r\n          numGrad[k].dw[i] = (upBase - downBase) / (2 * epsilon);\r\n          numGrad[k].w[i] = ((numGrad[k].dw[i] + epsilon) / (model[k].dw[i] + epsilon) - 1);\r\n          avgPercentDiff += numGrad[k].w[i] * numGrad[k].w[i];\r\n          avgPercentDiffCounter += 1;\r\n          // store precentage diff in w.\r\n          // undo the change of weights by a small amount\r\n          uptick[k].w[i] -= epsilon;\r\n          downtick[k].w[i] += epsilon;\r\n\r\n          // set model's dw to numerical gradient (useful for debugging)\r\n          //model[k].dw[i] = numGrad[k].dw[i];\r\n        }\r\n      }\r\n    }\r\n\r\n    if (avgDiff) {\r\n      return Math.sqrt(avgPercentDiff / avgPercentDiffCounter);\r\n    }\r\n    return numGrad;\r\n  };\r\n\r\n  // neuroevolution tools\r\n\r\n  // chromosome implementation using an array of floats\r\n  var Gene = function(initFloatArray) {\r\n    var i;\r\n    var len = initFloatArray.length;\r\n    // the input array will be copied\r\n    this.fitness = -1e20; // default fitness value is very negative\r\n    this.nTrial = 0; // number of trials subjected to so far.\r\n    this.gene = zeros(len);\r\n    for (i=0;i<len;i++) {\r\n      this.gene[i] = initFloatArray[i];\r\n    }\r\n  };\r\n\r\n  Gene.prototype = {\r\n    burstMutate: function(burst_magnitude_) { // adds a normal random variable of stdev width, zero mean to each gene.\r\n      var burst_magnitude = burst_magnitude_ || 0.1;\r\n      var i, N;\r\n      N = this.gene.length;\r\n      for (i = 0; i < N; i++) {\r\n        this.gene[i] += randn(0.0, burst_magnitude);\r\n      }\r\n    },\r\n    randomize: function(burst_magnitude_) { // resets each gene to a random value with zero mean and stdev\r\n      var burst_magnitude = burst_magnitude_ || 0.1;\r\n      var i, N;\r\n      N = this.gene.length;\r\n      for (i = 0; i < N; i++) {\r\n        this.gene[i] = randn(0.0, burst_magnitude);\r\n      }\r\n    },\r\n    mutate: function(mutation_rate_, burst_magnitude_) { // adds random gaussian (0,stdev) to each gene with prob mutation_rate\r\n      var mutation_rate = mutation_rate_ || 0.1;\r\n      var burst_magnitude = burst_magnitude_ || 0.1;\r\n      var i, N;\r\n      N = this.gene.length;\r\n      for (i = 0; i < N; i++) {\r\n        if (randf(0,1) < mutation_rate) {\r\n          this.gene[i] += randn(0.0, burst_magnitude);\r\n        }\r\n      }\r\n    },\r\n    crossover: function(partner, kid1, kid2, onePoint) {\r\n      // performs one-point crossover with partner to produce 2 kids\r\n      // edit -> changed to uniform crossover method.\r\n      // assumes all chromosomes are initialised with same array size. pls make sure of this before calling\r\n      assert(this.gene.length === partner.gene.length);\r\n      assert(partner.gene.length === kid1.gene.length);\r\n      assert(kid1.gene.length === kid2.gene.length);\r\n      var onePointMode = false;\r\n      if (typeof onePoint !== 'undefined') onePointMode = onePoint;\r\n      var i, N;\r\n      N = this.gene.length;\r\n      var cross = true;\r\n      var l = randi(0, N); // crossover point (for one point xover)\r\n      for (i = 0; i < N; i++) {\r\n        if (onePointMode) {\r\n          cross = (i < l);\r\n        } else {\r\n          cross = (Math.random() < 0.5);\r\n        }\r\n        if (cross) {\r\n          kid1.gene[i] = this.gene[i];\r\n          kid2.gene[i] = partner.gene[i];\r\n        } else {\r\n          kid1.gene[i] = partner.gene[i];\r\n          kid2.gene[i] = this.gene[i];\r\n        }\r\n      }\r\n    },\r\n    copyFrom: function(g) { // copies g's gene into itself\r\n      var i, N;\r\n      this.copyFromArray(g.gene);\r\n    },\r\n    copyFromArray: function(sourceFloatArray) {\r\n      // copy an array own's gene (must be same size)\r\n      assert(this.gene.length === sourceFloatArray.length);\r\n      var i, N;\r\n      N = this.gene.length;\r\n      for (i = 0; i < N; i++) {\r\n        this.gene[i] = sourceFloatArray[i];\r\n      }\r\n    },\r\n    copy: function(precision_) { // returns a rounded exact copy of itself (into new memory, doesn't return reference)\r\n      var precision = 10e-4 || precision_; precision = 1/precision;\r\n      var newFloatArray = zeros(this.gene.length);\r\n      var i;\r\n      for (i = 0; i < this.gene.length; i++) {\r\n        newFloatArray[i] = Math.round(precision*this.gene[i])/precision;\r\n      }\r\n      var g = new Gene(newFloatArray);\r\n      g.fitness = this.fitness;\r\n      g.nTrial = this.nTrial;\r\n      return g;\r\n    },\r\n    pushToModel: function(model) { // pushes this chromosome to a specified network\r\n      pushToModel(model, this.gene);\r\n    }\r\n  };\r\n\r\n  // randomize neural network model with random weights and biases\r\n  var randomizeModel = function(model, magnitude_) {\r\n    var modelSize = getModelSize(model);\r\n    var magnitude = 1.0 || magnitude_;\r\n    var r = new RandMat(1, modelSize, 0, magnitude);\r\n    var g = new Gene(r.w);\r\n    g.pushToModel(model);\r\n  };\r\n\r\n  var GATrainer = function(model, options_, init_gene_array) {\r\n    // implementation of CoSyNe neuroevolution framework\r\n    //\r\n    // options:\r\n    // population_size : positive integer\r\n    // hall_of_fame_size : positive integer, stores best guys in all of history and keeps them.\r\n    // mutation_rate : [0, 1], when mutation happens, chance of each gene getting mutated\r\n    // elite_percentage : [0, 0.3], only this group mates and produces offsprings\r\n    // mutation_size : positive floating point.  stdev of gausian noise added for mutations\r\n    // target_fitness : after fitness achieved is greater than this float value, learning stops\r\n    // init_weight_magnitude : stdev of initial random weight (default = 1.0)\r\n    // burst_generations : positive integer.  if best fitness doesn't improve after this number of generations\r\n    //                    then mutate everything!\r\n    // best_trial : default 1.  save best of best_trial's results for each chromosome.\r\n    // num_match : for use in arms race mode.  how many random matches we set for each chromosome when it is its turn.\r\n    //\r\n    // init_gene_array:  init float array to initialize the chromosomes.  can be result obtained from pretrained sessions.\r\n    // debug_mode: false by default.  if set to true, console.log debug output occurs.\r\n\r\n    this.model = copyModel(model); // makes a local working copy of the model. copies architecture and weights\r\n\r\n    var options = options_ || {};\r\n    this.hall_of_fame_size = typeof options.hall_of_fame_size !== 'undefined' ? options.hall_of_fame_size : 5;\r\n    this.population_size = typeof options.population_size !== 'undefined' ? options.population_size : 30;\r\n    this.population_size += this.hall_of_fame_size; // make room for hall of fame beyond specified population size.\r\n    this.population_size = Math.floor(this.population_size/2)*2; // make sure even number\r\n    this.length = this.population_size; // use the variable length to suit array pattern.\r\n    this.mutation_rate = typeof options.mutation_rate !== 'undefined' ? options.mutation_rate : 0.01;\r\n    this.init_weight_magnitude = typeof options.init_weight_magnitude !== 'undefined' ? options.init_weight_magnitude : 1.0;\r\n    this.elite_percentage = typeof options.elite_percentage !== 'undefined' ? options.elite_percentage : 0.2;\r\n    this.mutation_size = typeof options.mutation_size !== 'undefined' ? options.mutation_size : 0.5;\r\n    this.debug_mode = typeof options.debug_mode !== 'undefined' ? options.debug_mode : false;\r\n    this.gene_size = getModelSize(this.model); // number of floats in each gene\r\n\r\n    var initGene;\r\n    var i;\r\n    var gene;\r\n    if (init_gene_array) {\r\n      initGene = new Gene(init_gene_array);\r\n    }\r\n\r\n    this.genes = []; // population\r\n    this.hallOfFame = []; // stores the hall of fame here!\r\n    for (i = 0; i < this.population_size; i++) {\r\n      gene = new Gene(zeros(this.gene_size));\r\n      if (initGene) { // if initial gene supplied, burst mutate param.\r\n        gene.copyFrom(initGene);\r\n        if (i > 0) { // don't mutate the first guy.\r\n          gene.burstMutate(this.mutation_size);\r\n        }\r\n      } else {\r\n        gene.randomize(this.init_weight_magnitude);\r\n      }\r\n      this.genes.push(gene);\r\n    }\r\n    // generates first few hall of fame genes (but burst mutates some of them)\r\n    for (i = 0; i < this.hall_of_fame_size; i++) {\r\n      gene = new Gene(zeros(this.gene_size));\r\n      if (init_gene_array) { // if initial gene supplied, burst mutate param.\r\n        gene.copyFrom(initGene);\r\n      } else {\r\n        gene.randomize(this.init_weight_magnitude);\r\n        if (i > 0) { // don't mutate the first guy.\r\n          gene.burstMutate(this.mutation_size);\r\n        }\r\n      }\r\n      this.hallOfFame.push(gene);\r\n    }\r\n\r\n    pushToModel(this.model, this.genes[0].gene); // push first chromosome to neural network. (replaced *1 above)\r\n\r\n  };\r\n\r\n  GATrainer.prototype = {\r\n    sortByFitness: function(c) {\r\n      c = c.sort(function (a, b) {\r\n        if (a.fitness > b.fitness) { return -1; }\r\n        if (a.fitness < b.fitness) { return 1; }\r\n        return 0;\r\n      });\r\n    },\r\n    pushGeneToModel: function(model, i) {\r\n      // pushes the i th gene of the sorted population into a model\r\n      // this ignores hall of fame\r\n      var g = this.genes[i];\r\n      g.pushToModel(model);\r\n    },\r\n    pushBestGeneToModel: function(model) {\r\n      this.pushGeneToModel(model, 0);\r\n    },\r\n    pushHistToModel: function(model, i) {\r\n      // pushes the i th gene of the sorted population into a model from the hall-of-fame\r\n      // this requires hall of fame model to be used\r\n      var Nh = this.hall_of_fame_size;\r\n      assert(Nh > 0); // hall of fame must be used.\r\n      var g = this.hallOfFame[i];\r\n      g.pushToModel(model);\r\n    },\r\n    pushBestHistToModel: function(model) {\r\n      this.pushHistToModel(model, 0);\r\n    },\r\n    flushFitness: function() {\r\n      // resets all the fitness scores to very negative numbers, incl hall-of-fame\r\n      var i, N, Nh;\r\n      var c = this.genes;\r\n      var h = this.hallOfFame;\r\n      N = this.population_size;\r\n      Nh = this.hall_of_fame_size;\r\n      for (i=0;i<N;i++) {\r\n        c[i].fitness = -1e20;\r\n      }\r\n      for (i=0;i<Nh;i++) {\r\n        h[i].fitness = -1e20;\r\n      }\r\n\r\n    },\r\n    sortGenes: function() {\r\n      // this functions just sort list of genes by fitness and does not do any\r\n      // cross over or mutations.\r\n      var c = this.genes;\r\n      // sort the chromosomes by fitness\r\n      this.sortByFitness(c);\r\n    },\r\n    evolve: function() {\r\n      // this function does bare minimum simulation of one generation\r\n      // it assumes the code prior to calling evolve would have simulated the system\r\n      // it also assumes that the fitness in each chromosome of this trainer will have been assigned\r\n      // it just does the task of crossovers and mutations afterwards.\r\n\r\n      var i, j, N, Nh;\r\n      var c = this.genes;\r\n      var h = this.hallOfFame;\r\n\r\n      N = this.population_size;\r\n      Nh = this.hall_of_fame_size;\r\n\r\n      // sort the chromosomes by fitness\r\n      this.sortByFitness(c);\r\n\r\n      if (this.debug_mode) {\r\n        for (i = 0; i < 5; i++) {\r\n          console.log(i+': '+Math.round(c[i].fitness*100)/100);\r\n        }\r\n        for (i = 5; i >= 1; i--) {\r\n          console.log((N-i)+': '+Math.round(c[N-i].fitness*100)/100);\r\n        }\r\n      }\r\n\r\n      // copies best from population to hall of fame:\r\n      for (i = 0; i < Nh; i++) {\r\n        h.push(c[i].copy());\r\n      }\r\n\r\n      // sorts hall of fame\r\n      this.sortByFitness(h);\r\n      // cuts off hall of fame to keep only Nh elements\r\n      h = h.slice(0, Nh);\r\n\r\n      if (this.debug_mode) {\r\n        console.log('hall of fame:');\r\n        for (i = 0; i < Math.min(Nh, 3); i++) {\r\n          console.log(i+': '+Math.round(h[i].fitness*100)/100);\r\n        }\r\n      }\r\n\r\n      // alters population:\r\n\r\n      var Nelite = Math.floor(Math.floor(this.elite_percentage*N)/2)*2; // even number\r\n      for (i = Nelite; i < N; i+=2) {\r\n        var p1 = randi(0, Nelite);\r\n        var p2 = randi(0, Nelite);\r\n        c[p1].crossover(c[p2], c[i], c[i+1]);\r\n      }\r\n\r\n      // leaves the last Nh slots for hall of fame guys.\r\n      for (i = 0; i < N-Nh; i++) {\r\n        c[i].mutate(this.mutation_rate, this.mutation_size);\r\n      }\r\n\r\n      // sneakily puts in the hall of famers back into the population at the end:\r\n      for (i = 0; i < Nh; i++) {\r\n        c[N-Nh+i] = h[i].copy();\r\n      }\r\n\r\n\r\n      // permutation step in CoSyNe\r\n      // we permute all weights in elite set, and don't prob-weight as in Gomez 2008.\r\n\r\n      var Nperm = Nelite; // permute the weights up to Nperm.\r\n      var permData = zeros(Nperm);\r\n      var len = c[0].gene.length; // number of elements in each gene\r\n      for (j=0;j<len;j++) {\r\n        // populate the data to be shuffled\r\n        for (i=0;i<Nperm;i++) {\r\n          permData[i] = c[i].gene[j];\r\n        }\r\n        permData = shuffle(permData); // the magic is supposed to happen here.\r\n        // put back the shuffled data back:\r\n        for (i=0;i<Nperm;i++) {\r\n          c[i].gene[j] = permData[i];\r\n        }\r\n      }\r\n\r\n    }\r\n  };\r\n\r\n  // various utils\r\n  global.maxi = maxi;\r\n  global.samplei = samplei;\r\n  global.randi = randi;\r\n  global.randf = randf;\r\n  global.randn = randn;\r\n  global.zeros = zeros;\r\n  global.copy = copy;\r\n  global.shuffle = shuffle;\r\n  global.softmax = softmax;\r\n  global.assert = assert;\r\n\r\n  // classes\r\n  global.Mat = Mat;\r\n  global.RandMat = RandMat;\r\n\r\n  global.forwardLSTM = forwardLSTM;\r\n  global.initLSTM = initLSTM;\r\n  global.forwardRNN = forwardRNN;\r\n  global.initRNN = initRNN;\r\n\r\n  // optimization\r\n  global.Solver = Solver;\r\n  global.Graph = Graph;\r\n\r\n  // other utils\r\n  global.flattenModel = flattenModel;\r\n  global.getModelSize = getModelSize;\r\n  global.copyModel = copyModel;\r\n  global.zeroOutModel = zeroOutModel;\r\n  global.numGradient = numGradient;\r\n  global.pushToModel = pushToModel;\r\n  global.randomizeModel = randomizeModel;\r\n\r\n  // model compression\r\n  global.compressModel = compressModel;\r\n  global.decompressModel = decompressModel;\r\n\r\n  // ga\r\n  global.GATrainer = GATrainer;\r\n  global.Gene = Gene;\r\n\r\n})(R);\r\n(function(lib) {\r\n  \"use strict\";\r\n  if (typeof module === \"undefined\" || typeof module.exports === \"undefined\") {\r\n    window.jsfeat = lib; // in ordinary browser attach library to window\r\n  } else {\r\n    module.exports = lib; // in nodejs\r\n  }\r\n})(R);\r\n/* eslint-enable no-unused-vars */"],"mappings":"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","ignoreList":[]}]}