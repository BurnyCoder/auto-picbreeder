{"remainingRequest":"/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/node_modules/babel-loader/lib/index.js!/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/src/lib/netart.js","dependencies":[{"path":"/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/src/lib/netart.js","mtime":1766857470851},{"path":"/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/babel.config.js","mtime":1766857498915},{"path":"/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/node_modules/cache-loader/dist/cjs.js","mtime":1766857611540},{"path":"/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/node_modules/babel-loader/lib/index.js","mtime":1766857611782}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi8KLypnbG9iYWxzIHBhcGVyLCAkICovCi8qanNsaW50IG5vbWVuOiB0cnVlLCB1bmRlZjogdHJ1ZSwgc2xvcHB5OiB0cnVlICovCgovLyBuZXR3b3JrIGFydCBsaWJyYXJ5CgovKg0KDQpAbGljc3RhcnQgIFRoZSBmb2xsb3dpbmcgaXMgdGhlIGVudGlyZSBsaWNlbnNlIG5vdGljZSBmb3IgdGhlDQpKYXZhU2NyaXB0IGNvZGUgaW4gdGhpcyBwYWdlLg0KDQpDb3B5cmlnaHQgKEMpIDIwMTUgZGF2aWQgaGEsIG90b3JvLm5ldCwgb3Rvcm8gbGFicw0KDQpUaGUgSmF2YVNjcmlwdCBjb2RlIGluIHRoaXMgcGFnZSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuDQpyZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVQ0KR2VuZXJhbCBQdWJsaWMgTGljZW5zZSAoR05VIEdQTCkgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlDQpGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pDQphbnkgbGF0ZXIgdmVyc2lvbi4gIFRoZSBjb2RlIGlzIGRpc3RyaWJ1dGVkIFdJVEhPVVQgQU5ZIFdBUlJBTlRZOw0Kd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTDQpGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlIEdOVSBHUEwgZm9yIG1vcmUgZGV0YWlscy4NCg0KQXMgYWRkaXRpb25hbCBwZXJtaXNzaW9uIHVuZGVyIEdOVSBHUEwgdmVyc2lvbiAzIHNlY3Rpb24gNywgeW91DQptYXkgZGlzdHJpYnV0ZSBub24tc291cmNlIChlLmcuLCBtaW5pbWl6ZWQgb3IgY29tcGFjdGVkKSBmb3JtcyBvZg0KdGhhdCBjb2RlIHdpdGhvdXQgdGhlIGNvcHkgb2YgdGhlIEdOVSBHUEwgbm9ybWFsbHkgcmVxdWlyZWQgYnkNCnNlY3Rpb24gNCwgcHJvdmlkZWQgeW91IGluY2x1ZGUgdGhpcyBsaWNlbnNlIG5vdGljZSBhbmQgYSBVUkwNCnRocm91Z2ggd2hpY2ggcmVjaXBpZW50cyBjYW4gYWNjZXNzIHRoZSBDb3JyZXNwb25kaW5nIFNvdXJjZS4NCg0KDQpAbGljZW5kICBUaGUgYWJvdmUgaXMgdGhlIGVudGlyZSBsaWNlbnNlIG5vdGljZQ0KZm9yIHRoZSBKYXZhU2NyaXB0IGNvZGUgaW4gdGhpcyBwYWdlLg0KKi8KCi8vIG5ldXJhbCBuZXR3b3JrIHJhbmRvbSBhcnQgZ2VuZXJhdG9yCmlmICh0eXBlb2YgbW9kdWxlICE9ICJ1bmRlZmluZWQiKSB7CiAgdmFyIFIgPSByZXF1aXJlKCcuL3JlY3VycmVudC5qcycpOwogIHZhciBjb252bmV0anMgPSByZXF1aXJlKCcuL2NvbnZuZXQuanMnKTsKICB2YXIgTiA9IHJlcXVpcmUoJy4vbmVhdC5qcycpOwp9CnZhciBOZXRBcnQgPSB7fTsKKGZ1bmN0aW9uIChnbG9iYWwpIHsKICAidXNlIHN0cmljdCI7CgogIC8vIHNldHRpbmdzIG9mIG5uZXQ6CiAgdmFyIG5ldHdvcmtTaXplID0gMTYgKiAxLjA7CiAgdmFyIG5IaWRkZW4gPSA4ICogMS4wOwogIHZhciBuT3V0ID0gMzsgLy8gciwgZywgYiBsYXllcnMKCiAgdmFyIEcwID0gbmV3IFIuR3JhcGgoZmFsc2UpOwoKICAvLyBpbnRlcm5hbCBpbWFnZSBjbGFzcwogIHZhciBJbWFnZSA9IGZ1bmN0aW9uIChuXywgZF8pIHsKICAgIHRoaXMubiA9IG5fIHx8IDMyOyAvLyBtYXhyb3cKICAgIHRoaXMuZCA9IGRfIHx8IDMyOyAvLyBtYXhjb2wKICAgIHZhciBsID0gdGhpcy5uICogdGhpcy5kOwogICAgdGhpcy5yID0gUi56ZXJvcyhsKTsgLy8gYmV0d2VlbiAwIC0+IDEKICAgIHRoaXMuZyA9IFIuemVyb3MobCk7CiAgICB0aGlzLmIgPSBSLnplcm9zKGwpOwogICAgdGhpcy5sYWJlbCA9IC0xOwogIH07CiAgSW1hZ2UucHJvdG90eXBlID0gewogICAgY2hlY2tCb3VuZDogZnVuY3Rpb24gKGksIGopIHsKICAgICAgLy8gcmV0dXJucyB0cnVlIGlmIChpLCBqKSB3aXRoaW4gYm91bmRhcnkgb2YgaW1hZ2UKICAgICAgaWYgKGkgPj0gMCAmJiBqID49IDAgJiYgaSA8IHRoaXMubiAmJiBqIDwgdGhpcy5kKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGdldDogZnVuY3Rpb24gKHZlYywgcm93LCBjb2wpIHsKICAgICAgLy8gcmV0dXJucyBwaXhlbCBhdCAocm93LCBjb2wpIG9mIDFkIHVucm9sbGVkIHZlY3RvciB2ZWMKICAgICAgcmV0dXJuIHZlY1tyb3cgKiB0aGlzLm4gKyBjb2xdOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gKHZlYywgcm93LCBjb2wsIHZhbHVlKSB7CiAgICAgIC8vIHNldHMgKHJvdywgY29sKSB0byB2YWx1ZSBmb3IgYSAxZCB1bnJvbGxlZCB2ZWMKICAgICAgdmVjW3JvdyAqIHRoaXMubiArIGNvbF0gPSB2YWx1ZTsKICAgIH0sCiAgICBnZXRDb2xvcjogZnVuY3Rpb24gKHJvdywgY29sKSB7CiAgICAgIC8vIHJldHVybnMgcGl4ZWwgYXQgKHJvdywgY29sKSBvZiAxZCB1bnJvbGxlZCB2ZWN0b3IgdmVjCiAgICAgIHJldHVybiBbdGhpcy5yW3JvdyAqIHRoaXMubiArIGNvbF0sIHRoaXMuZ1tyb3cgKiB0aGlzLm4gKyBjb2xdLCB0aGlzLmJbcm93ICogdGhpcy5uICsgY29sXV07CiAgICB9LAogICAgc2V0Q29sb3I6IGZ1bmN0aW9uIChyb3csIGNvbCwgYykgewogICAgICAvLyBzZXRzIChyb3csIGNvbCkgdG8gdmFsdWUgZm9yIGEgMWQgdW5yb2xsZWQgdmVjCiAgICAgIHRoaXMucltyb3cgKiB0aGlzLm4gKyBjb2xdID0gY1swXTsKICAgICAgdGhpcy5nW3JvdyAqIHRoaXMubiArIGNvbF0gPSBjWzFdOwogICAgICB0aGlzLmJbcm93ICogdGhpcy5uICsgY29sXSA9IGNbMl07CiAgICB9LAogICAgY29weTogZnVuY3Rpb24gKCkgewogICAgICAvLyByZXR1cm5zIGV4YWN0IGNvcHkgb2YgaW1hZ2UKICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKHRoaXMubiwgdGhpcy5kKTsKICAgICAgaW1hZ2UuciA9IFIuY29weSh0aGlzLnIpOwogICAgICBpbWFnZS5nID0gUi5jb3B5KHRoaXMuZyk7CiAgICAgIGltYWdlLmIgPSBSLmNvcHkodGhpcy5iKTsKICAgICAgaW1hZ2UubGFiZWwgPSB0aGlzLmxhYmVsOwogICAgICByZXR1cm4gaW1hZ2U7CiAgICB9LAogICAgZmxpcDogZnVuY3Rpb24gKCkgewogICAgICAvLyByZXR1cm4gYSBjb3B5IG9mIHRoZSBob3Jpem9udGFsbHkgZmxpcHBlZCBpbWFnZQogICAgICB2YXIgaW1hZ2UgPSB0aGlzLmNvcHkoKTsKICAgICAgdmFyIHRlbXBDb2xvcjsKICAgICAgdmFyIG1pZGRsZSA9IE1hdGguZmxvb3IodGhpcy5kIC8gMik7CiAgICAgIHZhciBtYXhjb2wgPSB0aGlzLmQ7CiAgICAgIGZvciAodmFyIGkgPSAwLCBtYXhyb3cgPSB0aGlzLm47IGkgPCBtYXhyb3c7IGkrKykgewogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWlkZGxlOyBqKyspIHsKICAgICAgICAgIHRlbXBDb2xvciA9IGltYWdlLmdldENvbG9yKGksIGopOwogICAgICAgICAgaW1hZ2Uuc2V0Q29sb3IoaSwgaiwgaW1hZ2UuZ2V0Q29sb3IoaSwgbWF4Y29sIC0gaiAtIDEpKTsKICAgICAgICAgIGltYWdlLnNldENvbG9yKGksIG1heGNvbCAtIGogLSAxLCB0ZW1wQ29sb3IpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gaW1hZ2U7CiAgICB9LAogICAgYXVnbWVudDogZnVuY3Rpb24gKGRyb3csIGRjb2wsIGZsaXBfKSB7CiAgICAgIC8vIHJldHVybiBhIGNvcHkgb2YgdGhlIGF1Z21lbnRlZCBpbWFnZS4KICAgICAgdmFyIGZsaXAgPSB0eXBlb2YgZmxpcF8gPT09ICd1bmRlZmluZWQnID8gZmFsc2UgOiBmbGlwXzsKICAgICAgdmFyIGltYWdlID0gdGhpcy5jb3B5KCk7CiAgICAgIGZvciAodmFyIGkgPSAwLCBtYXhyb3cgPSB0aGlzLm47IGkgPCBtYXhyb3c7IGkrKykgewogICAgICAgIGZvciAodmFyIGogPSAwLCBtYXhjb2wgPSB0aGlzLmQ7IGogPCBtYXhjb2w7IGorKykgewogICAgICAgICAgaWYgKHRoaXMuY2hlY2tCb3VuZChpIC0gZHJvdywgaiAtIGRjb2wpKSB7CiAgICAgICAgICAgIGltYWdlLnNldENvbG9yKGksIGosIHRoaXMuZ2V0Q29sb3IoaSAtIGRyb3csIGogLSBkY29sKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChmbGlwKSB7CiAgICAgICAgaW1hZ2UgPSBpbWFnZS5mbGlwKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGltYWdlOwogICAgfSwKICAgIHJhbmRvbUF1Z21lbnQ6IGZ1bmN0aW9uIChzaGlmdFNpemUpIHsKICAgICAgLy8gcmV0dXJucyBhIHJhbmRvbWlzZWQgYXVnbWVudGVkIHZlcnNpb24gb2YgdGhlIGltYWdlIHdpdGggNTAlIHByb2IgZmxpcAogICAgICByZXR1cm4gdGhpcy5hdWdtZW50KFIucmFuZGkoLXNoaWZ0U2l6ZSwgc2hpZnRTaXplKSwgUi5yYW5kaSgtc2hpZnRTaXplLCBzaGlmdFNpemUpLCBNYXRoLnJhbmRvbSgpIDwgMC41KTsKICAgIH0sCiAgICBnZXRDb252bmV0Vm9sOiBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIHJldHVybiBhbiBvYmplY3QgY29tcGF0aWJsZSB3aXRoIHRoZSBpbnB1dCBpbnRvIGEgY29udm5ldC5qcyBuZXR3b3JrCiAgICAgIHZhciBtYXhyb3cgPSB0aGlzLm47CiAgICAgIHZhciBtYXhjb2wgPSB0aGlzLmQ7CiAgICAgIHZhciB4ID0gbmV3IGNvbnZuZXRqcy5Wb2wobWF4cm93LCBtYXhjb2wsIDMsIDAuMCk7CiAgICAgIHZhciBpLCBqOwogICAgICB2YXIgYzsKICAgICAgZm9yIChpID0gMDsgaSA8IG1heGNvbDsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IG1heHJvdzsgaisrKSB7CiAgICAgICAgICBjID0gdGhpcy5nZXRDb2xvcihpLCBqKTsKICAgICAgICAgIHguc2V0KGosIGksIDAsIGNbMF0gLSAwLjUpOwogICAgICAgICAgeC5zZXQoaiwgaSwgMSwgY1sxXSAtIDAuNSk7CiAgICAgICAgICB4LnNldChqLCBpLCAyLCBjWzJdIC0gMC41KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHg7CiAgICB9LAogICAgZ2V0Q2FudmFzSW1hZ2U6IGZ1bmN0aW9uIChjdHgpIHsKICAgICAgLy8gaW5wdXQgaXMgYSBOZXRBcnQuSW1hZ2UKCiAgICAgIHZhciBzaXplaCA9IHRoaXMuZDsKICAgICAgdmFyIHNpemV3ID0gdGhpcy5uOwogICAgICB2YXIgaW1nRGF0YSA9IGN0eC5jcmVhdGVJbWFnZURhdGEoc2l6ZWgsIHNpemV3KTsKICAgICAgdmFyIGsgPSAwOwogICAgICB2YXIgaSwgajsKICAgICAgdmFyIG9mZnNldDsKICAgICAgZm9yIChpID0gMDsgaSA8IHNpemVoOyBpKyspIHsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgc2l6ZXc7IGorKykgewogICAgICAgICAgb2Zmc2V0ID0gaSAqIHNpemV3OwogICAgICAgICAgaW1nRGF0YS5kYXRhW2sgKyAwXSA9IHRoaXMucltvZmZzZXQgKyBqXSAqIDI1NS4wOwogICAgICAgICAgaW1nRGF0YS5kYXRhW2sgKyAxXSA9IHRoaXMuZ1tvZmZzZXQgKyBqXSAqIDI1NS4wOwogICAgICAgICAgaW1nRGF0YS5kYXRhW2sgKyAyXSA9IHRoaXMuYltvZmZzZXQgKyBqXSAqIDI1NS4wOwogICAgICAgICAgaW1nRGF0YS5kYXRhW2sgKyAzXSA9IDI1NTsKICAgICAgICAgIGsgKz0gNDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGltZ0RhdGE7CiAgICB9CiAgfTsKICB2YXIgY3JlYXRlTW9kZWwgPSBmdW5jdGlvbiAoKSB7CiAgICAvLyByZXR1cm5zIGEgcmVjdXJyZW50LmpzIG1vZGVsIHVzZWQgdG8gZ2VuZXJhdGUgaW1hZ2VzCgogICAgdmFyIG1vZGVsID0gW107CiAgICB2YXIgaTsKICAgIHZhciByYW5kb21TaXplID0gMS4wOwoKICAgIC8vIGRlZmluZSB0aGUgbW9kZWwgYmVsb3c6CiAgICBtb2RlbC53X2luID0gUi5SYW5kTWF0KG5ldHdvcmtTaXplLCAzLCAwLCByYW5kb21TaXplKTsgLy8geCwgeSwgYW5kIGJpYXMKCiAgICBmb3IgKGkgPSAwOyBpIDwgbkhpZGRlbjsgaSsrKSB7CiAgICAgIG1vZGVsWyd3XycgKyBpXSA9IFIuUmFuZE1hdChuZXR3b3JrU2l6ZSwgbmV0d29ya1NpemUsIDAsIHJhbmRvbVNpemUpOwogICAgfQogICAgbW9kZWwud19vdXQgPSBSLlJhbmRNYXQobk91dCwgbmV0d29ya1NpemUsIDAsIHJhbmRvbVNpemUpOyAvLyBvdXRwdXQgbGF5ZXIKCiAgICByZXR1cm4gbW9kZWw7CiAgfTsKICB2YXIgZm9yd2FyZE5ldHdvcmsgPSBmdW5jdGlvbiAobW9kZWwsIHhfLCB5XywgZ3JhcGhfKSB7CiAgICAvLyB4XywgeV8gaXMgYSBub3JtYWwgamF2YXNjcmlwdCBmbG9hdCwgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBtYXQgb2JqZWN0IGJlbG93CiAgICAvLyBjYW4gcGFzcyBpbiBncmFwaCBvYmplY3QgaWYgb25lIG5lZWRzIGJhY2twcm9wIGxhdGVyLgogICAgdmFyIHggPSBuZXcgUi5NYXQoMywgMSk7IC8vIGlucHV0CiAgICB2YXIgaTsKICAgIHguc2V0KDAsIDAsIHhfKTsKICAgIHguc2V0KDEsIDAsIHlfKTsKICAgIHguc2V0KDIsIDAsIDEuMCk7IC8vIGJpYXMuCiAgICB2YXIgb3V0OwogICAgdmFyIEcgPSB0eXBlb2YgZ3JhcGhfID09PSAndW5kZWZpbmVkJyA/IEcwIDogZ3JhcGhfOwogICAgb3V0ID0gRy50YW5oKEcubXVsKG1vZGVsLndfaW4sIHgpKTsKICAgIGZvciAoaSA9IDA7IGkgPCBuSGlkZGVuOyBpKyspIHsKICAgICAgaWYgKGkgJSAzID09PSAwKSB7CiAgICAgICAgb3V0ID0gRy50YW5oKEcubXVsKG1vZGVsWyd3XycgKyBpXSwgb3V0KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3V0ID0gRy50YW5oKEcubXVsKG1vZGVsWyd3XycgKyBpXSwgb3V0KSk7CiAgICAgIH0KICAgIH0KICAgIG91dCA9IEcuc2lnbW9pZChHLm11bChtb2RlbC53X291dCwgb3V0KSk7CiAgICByZXR1cm4gb3V0OwogIH07CiAgZnVuY3Rpb24gZ2V0Q29sb3JBdChtb2RlbCwgeCwgeSkgewogICAgLy8gZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgY29sb3IgZ2l2ZW4gY29vcmRpbnRlcyAoeCwgeSkKICAgIC8vICh4LCB5KSBhcmUgc2NhbGVkIHRvIC0wLjUgLT4gMC41IGZvciBpbWFnZSByZWNvZ25pdGlvbiBsYXRlcgogICAgLy8gYnV0IGl0IGNhbiBiZSBiZWhvbmQgdGhlICsvLSAwLjUgZm9yIGdlbmVyYXRpb24gYWJvdmUgYW5kIGJleW9uZAogICAgLy8gcmVjb2duaXRpb24gbGltaXRzCiAgICB2YXIgciwgZywgYjsKICAgIHZhciBvdXQgPSBmb3J3YXJkTmV0d29yayhtb2RlbCwgeCwgeSk7CiAgICByID0gb3V0LndbMF07CiAgICBnID0gb3V0LndbMV07CiAgICBiID0gb3V0LndbMl07CiAgICByZXR1cm4gW3IsIGcsIGJdOwogIH0KCiAgLy8gZnJvbQogIC8vIGh0dHBzOi8vYmdyaW5zLmdpdGh1Yi5pby9UaW55Q29sb3IvZG9jcy90aW55Y29sb3IuaHRtbAogIGZ1bmN0aW9uIGhzdlRvUmdiKGgsIHMsIHYpIHsKICAgIC8vIGhzdiBhcmUgYmV0d2VlbiAwIGFuZCAxCiAgICAvLyByZXR1cm5zIHJnYiBiZXR3ZWVuIDAgYW5kIDEKCiAgICBoICo9IDY7CiAgICB2YXIgaSA9IE1hdGguZmxvb3IoaCksCiAgICAgIGYgPSBoIC0gaSwKICAgICAgcCA9IHYgKiAoMSAtIHMpLAogICAgICBxID0gdiAqICgxIC0gZiAqIHMpLAogICAgICB0ID0gdiAqICgxIC0gKDEgLSBmKSAqIHMpLAogICAgICBtb2QgPSBpICUgNiwKICAgICAgciA9IFt2LCBxLCBwLCBwLCB0LCB2XVttb2RdLAogICAgICBnID0gW3QsIHYsIHYsIHEsIHAsIHBdW21vZF0sCiAgICAgIGIgPSBbcCwgcCwgdCwgdiwgdiwgcV1bbW9kXTsKICAgIHJldHVybiBbciwgZywgYl07CiAgfQogIGZ1bmN0aW9uIGdlbkdlbm9tZUltYWdlKGdlbm9tZSwgc2l6ZWgsIHNpemV3KSB7CiAgICAvLyByZXR1cm5zIGEgTmV0QXJ0LkltYWdlIG9mIHRoaXMgZ2Vub21lIGdpdmVuIHNvbWUgc2l6ZSBwYXJhbXMKCiAgICB2YXIgaSwgaiwgazsKICAgIHZhciBpbnB1dERlcHRoID0gc2l6ZXc7IC8vIHNpemVoKnNpemV3OyAvLyB0cnkgMS1kIGxpbmUKICAgIHZhciBpbWcgPSBuZXcgSW1hZ2Uoc2l6ZWgsIHNpemV3KTsKICAgIHZhciBpbnB1dCA9IG5ldyBSLk1hdChpbnB1dERlcHRoLCAzKTsgLy8geCwgeSwgZGlzdGFuY2UgZnJvbSBjZW50ZXIKICAgIHZhciBvdXRwdXQ7CiAgICB2YXIgc2NhbGUgPSAyNDsKICAgIHZhciBmYWN0b3IgPSBNYXRoLm1pbihzaXplaCwgc2l6ZXcpIC8gc2NhbGU7CiAgICB2YXIgb2Zmc2V0OwogICAgdmFyIGNvdW50ZXI7CiAgICB2YXIgeCwgeTsKICAgIHZhciByLCBnLCBiOwogICAgdmFyIHJlbmRlck1vZGUgPSBOLmdldFJlbmRlck1vZGUoKTsKICAgIHZhciBHID0gbmV3IFIuR3JhcGgoZmFsc2UpOwoKICAgIC8vIHNldHVwIG1vZGVsCiAgICBnZW5vbWUuc2V0dXBNb2RlbChpbnB1dERlcHRoKTsKICAgIGZvciAoaSA9IDA7IGkgPCBzaXplaDsgaSsrKSB7CiAgICAgIC8vIHRyeSBvbmUgbGluZSBhdCBhIHRpbWUgdG8gc2F2ZSBtZW1vcnkuCgogICAgICAvLyBwb3B1bGF0ZSBpbnB1dCB2ZWN0b3Igd2l0aCAoeCwgeSkgaW5wdXRzCgogICAgICBmb3IgKGogPSAwOyBqIDwgc2l6ZXc7IGorKykgewogICAgICAgIHggPSBpIC8gZmFjdG9yIC0gMC41ICogc2NhbGU7CiAgICAgICAgeSA9IGogLyBmYWN0b3IgLSAwLjUgKiBzY2FsZTsKICAgICAgICBpbnB1dC5zZXQoaiwgMCwgeCk7CiAgICAgICAgaW5wdXQuc2V0KGosIDEsIHkpOwogICAgICAgIGlucHV0LnNldChqLCAyLCBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSkpOwogICAgICB9CgogICAgICAvLyBzZXR1cCBpbnB1dHMKICAgICAgZ2Vub21lLnNldElucHV0KGlucHV0KTsKICAgICAgZ2Vub21lLmZvcndhcmQoRyk7CiAgICAgIG91dHB1dCA9IGdlbm9tZS5nZXRPdXRwdXQoKTsKCiAgICAgIC8vIHB1dCB0aHJ1IDIgbW9yZSBsYXllcnMsIHRhbmgsIGFuZCBhYnMsIHNvIGFsbCB2YWx1ZXMgYmV0d2VlbiAwIGFuZCAxLgogICAgICBmb3IgKGsgPSAwOyBrIDwgMzsgaysrKSB7CiAgICAgICAgaWYgKHJlbmRlck1vZGUgPT09IDApIHsKICAgICAgICAgIG91dHB1dFtrXSA9IEcuc2lnbW9pZChvdXRwdXRba10pOwogICAgICAgIH0gZWxzZSBpZiAocmVuZGVyTW9kZSA9PT0gMSkgewogICAgICAgICAgb3V0cHV0W2tdID0gRy5nYXVzc2lhbihvdXRwdXRba10pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvdXRwdXRba10gPSBHLnRhbmgob3V0cHV0W2tdKTsKICAgICAgICAgIG91dHB1dFtrXSA9IEcuYWJzKG91dHB1dFtrXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBjb25zdHJ1Y3QgdGhlIGltYWdlIGJhY2sgZnJvbSBvdXRwdXRzCiAgICAgIG9mZnNldCA9IGkgKiBzaXpldzsKICAgICAgZm9yIChqID0gMDsgaiA8IHNpemV3OyBqKyspIHsKICAgICAgICByID0gb3V0cHV0WzBdLndbal07CiAgICAgICAgZyA9IG91dHB1dFsxXS53W2pdOwogICAgICAgIGIgPSBvdXRwdXRbMl0ud1tqXTsKICAgICAgICBpbWcucltvZmZzZXQgKyBqXSA9IHI7CiAgICAgICAgaW1nLmdbb2Zmc2V0ICsgal0gPSBnOwogICAgICAgIGltZy5iW29mZnNldCArIGpdID0gYjsKICAgICAgfQogICAgICBnZW5vbWUuemVyb091dE5vZGVzKCk7IC8vIHdpcGUgb3V0IHByZXZpb3VzIHZhbHVlcy4KICAgIH0KICAgIHJldHVybiBpbWc7CiAgfQogIGZ1bmN0aW9uIGdlbkltYWdlKG1vZGVsLCBzaXplaCwgc2l6ZXcpIHsKICAgIHZhciBpbWcgPSBuZXcgSW1hZ2Uoc2l6ZWgsIHNpemV3KTsKICAgIHZhciBvZmZzZXQ7CiAgICB2YXIgaSwgajsKICAgIHZhciBmYWN0b3IgPSBNYXRoLm1pbihzaXplaCwgc2l6ZXcpOwogICAgdmFyIGM7CiAgICBmb3IgKGkgPSAwOyBpIDwgc2l6ZWg7IGkrKykgewogICAgICBmb3IgKGogPSAwOyBqIDwgc2l6ZXc7IGorKykgewogICAgICAgIG9mZnNldCA9IGkgKiBzaXpldzsKICAgICAgICBjID0gZ2V0Q29sb3JBdChtb2RlbCwgaSAvIGZhY3RvciAtIDAuNSwgaiAvIGZhY3RvciAtIDAuNSk7CiAgICAgICAgaW1nLnJbb2Zmc2V0ICsgal0gPSBjWzBdOwogICAgICAgIGltZy5nW29mZnNldCArIGpdID0gY1sxXTsKICAgICAgICBpbWcuYltvZmZzZXQgKyBqXSA9IGNbMl07CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBpbWc7CiAgfQogIGZ1bmN0aW9uIGJhY2tQcm9wSW1hZ2UobW9kZWwsIHNpemVoLCBzaXpldywgaW5wdXQpIHsKICAgIC8vIGlucHV0IGlzIHByZXZpb3VzIGlucHV0IG9mIGltYWdlLgoKICAgIHZhciBpbWcgPSBuZXcgSW1hZ2Uoc2l6ZWgsIHNpemV3KTsKICAgIHZhciBvZmZzZXQ7CiAgICB2YXIgaSwgajsKICAgIHZhciBmYWN0b3IgPSBNYXRoLm1pbihzaXplaCwgc2l6ZXcpOwogICAgdmFyIG91dDsKICAgIHZhciB4LCB5OwogICAgdmFyIGdyYXBoOwogICAgZm9yIChpID0gMDsgaSA8IHNpemVoOyBpKyspIHsKICAgICAgZm9yIChqID0gMDsgaiA8IHNpemV3OyBqKyspIHsKICAgICAgICBvZmZzZXQgPSBpICogc2l6ZXc7CiAgICAgICAgeCA9IGkgLyBmYWN0b3IgLSAwLjU7CiAgICAgICAgeSA9IGogLyBmYWN0b3IgLSAwLjU7CiAgICAgICAgZ3JhcGggPSBuZXcgUi5HcmFwaCgpOwogICAgICAgIG91dCA9IGZvcndhcmROZXR3b3JrKG1vZGVsLCB4LCB5LCBncmFwaCk7CiAgICAgICAgaW1nLnJbb2Zmc2V0ICsgal0gPSBvdXQud1swXTsKICAgICAgICBpbWcuZ1tvZmZzZXQgKyBqXSA9IG91dC53WzFdOwogICAgICAgIGltZy5iW29mZnNldCArIGpdID0gb3V0LndbMl07CiAgICAgICAgb3V0LmR3WzBdID0gaW5wdXQuZ2V0X2dyYWQoaiwgaSwgMCk7CiAgICAgICAgb3V0LmR3WzFdID0gaW5wdXQuZ2V0X2dyYWQoaiwgaSwgMSk7CiAgICAgICAgb3V0LmR3WzJdID0gaW5wdXQuZ2V0X2dyYWQoaiwgaSwgMik7CiAgICAgICAgZ3JhcGguYmFja3dhcmQoKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGltZzsKICB9CgogIC8vIGV2b2x2ZSBhcnR3b3JrIHRvIGFkYXB0IHRvIGRpc2NyaW1pbmlhdGUgbmV0d29yawogIGZ1bmN0aW9uIGV2b2x2ZUFkYXB0aXZlTW9kZWwobmV0LCBkZXNpcmVkRml0bmVzc18sIG1heEF0dGVtcHRfKSB7CiAgICB2YXIgbW9kZWwgPSBjcmVhdGVNb2RlbCgpOwogICAgdmFyIGltZzsKICAgIHZhciBpbWdEYXRhOwogICAgdmFyIGRlc2lyZWRGaXRuZXNzID0gZGVzaXJlZEZpdG5lc3NfIHx8IDAuNzsKICAgIHZhciBtYXhBdHRlbXB0ID0gbWF4QXR0ZW1wdF8gfHwgNTsKICAgIHZhciB0YXJnZXQgPSAxOwoKICAgIC8vIG5ldXJvZXZvbHV0aW9uIHN0dWZmOgogICAgdmFyIHRyYWluZXJfc2V0dGluZ3MgPSB7CiAgICAgIHBvcHVsYXRpb25fc2l6ZTogNDUsCiAgICAgIGhhbGxfb2ZfZmFtZV9zaXplOiA1LAogICAgICBtdXRhdGlvbl9zaXplOiAwLjEsCiAgICAgIG11dGF0aW9uX3JhdGU6IDAuNiwKICAgICAgaW5pdF93ZWlnaHRfbWFnbml0dWRlOiAxLjAsCiAgICAgIGVsaXRlX3BlcmNlbnRhZ2U6IDAuMzAsCiAgICAgIGRlYnVnX21vZGU6IGZhbHNlCiAgICB9OwogICAgdmFyIHRyYWluZXIgPSBuZXcgUi5HQVRyYWluZXIobW9kZWwsIHRyYWluZXJfc2V0dGluZ3MpOwogICAgdmFyIHByZWRpY3QgPSBmdW5jdGlvbiAoeCkgewogICAgICAvLyBzZWUgcHJlZGljdGlvbnMgaGVyZQogICAgICB2YXIgb3V0cHV0ID0gbmV0LmZvcndhcmQoeCk7CiAgICAgIHJldHVybiBvdXRwdXQudzsKICAgIH07CiAgICBmdW5jdGlvbiBmaXRGdW5jKG1vZGVsKSB7CiAgICAgIHZhciBpbWcgPSBnZW5JbWFnZShtb2RlbCwgMzIsIDMyKTsKICAgICAgdmFyIHByZWQgPSBwcmVkaWN0KGltZy5nZXRDb252bmV0Vm9sKCkpOwogICAgICByZXR1cm4gcHJlZFt0YXJnZXRdOwogICAgfQogICAgZnVuY3Rpb24gZXZvbHZlKCkgewogICAgICB2YXIgaTsKICAgICAgdmFyIG4gPSB0cmFpbmVyLmxlbmd0aDsKICAgICAgZm9yIChpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgIHRyYWluZXIucHVzaEdlbmVUb01vZGVsKG1vZGVsLCBpKTsKICAgICAgICB0cmFpbmVyLmdlbmVzW2ldLmZpdG5lc3MgPSBmaXRGdW5jKG1vZGVsKTsKICAgICAgfQogICAgICB0cmFpbmVyLnNvcnRHZW5lcygpOwogICAgfQoKICAgIC8vIHBhZ2UgcmVxdWVzdDoKICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgZXZvbHZlKCk7CiAgICAgIHZhciBiZXN0Rml0bmVzcyA9IHRyYWluZXIuZ2VuZXNbMF0uZml0bmVzczsKICAgICAgaWYgKHRyYWluZXIuZGVidWdfbW9kZSkgewogICAgICAgIGNvbnNvbGUubG9nKCdiZXN0Rml0bmVzcyA9ICcgKyBiZXN0Rml0bmVzcyk7CiAgICAgIH0KICAgICAgdHJhaW5lci5wdXNoR2VuZVRvTW9kZWwobW9kZWwsIDApOwogICAgICB0cmFpbmVyLmV2b2x2ZSgpOyAvLyBtdXRhdGlvbgogICAgICByZXR1cm4gYmVzdEZpdG5lc3M7CiAgICB9CiAgICB2YXIgZml0bmVzcyA9IC0xZTI0OwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhBdHRlbXB0OyBpKyspIHsKICAgICAgZml0bmVzcyA9IHVwZGF0ZSgpOwogICAgICBpZiAoZml0bmVzcyA+IGRlc2lyZWRGaXRuZXNzKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIGNvbnNvbGUubG9nKCdldm9sdmVkIGZpdG5lc3MgPSAnICsgZml0bmVzcyk7CiAgICByZXR1cm4gbW9kZWw7CiAgfQoKICAvLyBjcmVhdGUgYXJ0d29yayB0aGF0IHBhc3NlcyBhIHRyYWluZWQgZGlzY3JpbWluYXRpdmUgbmV0d29yawogIGZ1bmN0aW9uIGNyZWF0ZUFkYXB0aXZlTW9kZWwobmV0LCBpbml0TW9kZWxfLCBkZXNpcmVkRml0bmVzc18sIG1heEF0dGVtcHRfKSB7CiAgICAvLyBob2xkIGltYWdlIHZhcmlhYmxlcyBvdXRzaWRlIG9mIGxvb3AuCiAgICAvLyBpbml0OgogICAgdmFyIG1vZGVsID0gaW5pdE1vZGVsXyB8fCBjcmVhdGVNb2RlbCgpOwogICAgdmFyIGltZzsKICAgIHZhciBzb2x2ZXIgPSBuZXcgUi5Tb2x2ZXIoKTsgLy8gdGhlIFNvbHZlciB1c2VzIFJNU1Byb3AKICAgIHZhciBsZWFyblJhdGUgPSAwLjAwMTsKICAgIHZhciBpbWdEYXRhOwogICAgdmFyIGRlc2lyZWRGaXRuZXNzID0gZGVzaXJlZEZpdG5lc3NfIHx8IDAuNjU7CiAgICB2YXIgbWF4QXR0ZW1wdCA9IG1heEF0dGVtcHRfIHx8IDIwMDsKICAgIHZhciB0YXJnZXQgPSAxOwogICAgdmFyIGZpdG5lc3MgPSAwOwogICAgdmFyIGlucHV0LCBvdXRwdXQ7CiAgICB2YXIgY29zdF9sb3NzOwoKICAgIC8qIGRlYnVnDQogICAgICAgICAgaW1nID0gZ2VuSW1hZ2UobW9kZWwsIDMyLCAzMik7IC8vIGZvcndhcmQgcHJvcCB0byBnZW5lcmF0ZSBpbWFnZQ0KICAgICAgICAgIGlucHV0ID0gaW1nLmdldENvbnZuZXRWb2woKTsgLy8gY29udmVydCBpbWFnZSB0byBjb252bmV0LmpzIHZvbA0KICAgICAgICAgIG91dHB1dCA9IG5ldC5mb3J3YXJkKGlucHV0LCBmYWxzZSk7IC8vIGZvcndhcmQgcHJvcCB0byBnZXQgY2xhc3NpZmljYXRpb24NCiAgICAgICAgICBmaXRuZXNzID0gb3V0cHV0LndbdGFyZ2V0XTsgLy8gc2VlIHRoZSBwcm9iYWJpbGl0eSBvZiBpbWFnZSBmb29saW5nIG5ldHdvcmsNCiAgICAgICAgICBjb25zb2xlLmxvZygnaW5pdGlhbCBmaXRuZXNzID0gJytmaXRuZXNzKTsNCiAgICAqLwogICAgLy8gZWFjaCBzdGVwIGluIHRoZSBvcHRpbWlzYXRpb24gYmVmb3JlIGdyYWRpZW50IGRlc2NlbnQKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heEF0dGVtcHQ7IGkrKykgewogICAgICBpbWcgPSBnZW5JbWFnZShtb2RlbCwgMzIsIDMyKTsgLy8gZm9yd2FyZCBwcm9wIHRvIGdlbmVyYXRlIGltYWdlCiAgICAgIGlucHV0ID0gaW1nLmdldENvbnZuZXRWb2woKTsgLy8gY29udmVydCBpbWFnZSB0byBjb252bmV0LmpzIHZvbAogICAgICBvdXRwdXQgPSBuZXQuZm9yd2FyZChpbnB1dCwgZmFsc2UpOyAvLyBmb3J3YXJkIHByb3AgdG8gZ2V0IGNsYXNzaWZpY2F0aW9uCgogICAgICBmaXRuZXNzID0gb3V0cHV0LndbdGFyZ2V0XTsgLy8gc2VlIHRoZSBwcm9iYWJpbGl0eSBvZiBpbWFnZSBmb29saW5nIG5ldHdvcmsKCiAgICAgIGlmIChpICUgMTAgPT09IDApIHsKICAgICAgICBjb25zb2xlLmxvZygnZml0bmVzcyAjJyArIChpICsgMSkgKyAnID0gJyArIGZpdG5lc3MpOwogICAgICB9CiAgICAgIGlmIChmaXRuZXNzID4gZGVzaXJlZEZpdG5lc3MpIHsKICAgICAgICAvLyBmb3VuZCBzb2x1dGlvbiwgcmV0dXJuIGltZyBhbmQgcXVpdC4KICAgICAgICBjb25zb2xlLmxvZyhpICsgMCArICcgYXR0ZW1wdHMgbWFkZScpOwogICAgICAgIHJldHVybiBtb2RlbDsKICAgICAgfQogICAgICBjb3N0X2xvc3MgPSBuZXQuYmFja3dhcmQodGFyZ2V0KTsgLy8gYmFja3Byb3AgdG8gZ2V0IGRDbGFzcyAvIGRQaXhlbAogICAgICBpbWcgPSBiYWNrUHJvcEltYWdlKG1vZGVsLCAzMiwgMzIsIGlucHV0KTsgLy8gYmFja3Byb3AgdG8gZ2V0IGRDbGFzcy9kV2VpZ2h0CiAgICAgIHNvbHZlci5zdGVwKG1vZGVsLCBSLnJhbmRmKGxlYXJuUmF0ZSwgMSAqIGxlYXJuUmF0ZSksIDFlLTgsIDUuMCk7CiAgICB9CiAgICBjb25zb2xlLmxvZygnY2Fubm90IGdlbmVyYXRlIGltYWdlIGFmdGVyICcgKyBtYXhBdHRlbXB0ICsgJyBhdHRlbXB0cycpOwogICAgcmV0dXJuIG51bGw7IC8vIHRhcmdldCBub3QgYWNoaWV2ZWQsIHJldHVybiBudWxsLgogIH0KCiAgLy8gZXhwb3J0czoKCiAgZ2xvYmFsLkltYWdlID0gSW1hZ2U7CiAgZ2xvYmFsLmdlbkdlbm9tZUltYWdlID0gZ2VuR2Vub21lSW1hZ2U7CiAgZ2xvYmFsLmNyZWF0ZU1vZGVsID0gY3JlYXRlTW9kZWw7CiAgZ2xvYmFsLmNyZWF0ZUFkYXB0aXZlTW9kZWwgPSBjcmVhdGVBZGFwdGl2ZU1vZGVsOwogIGdsb2JhbC5ldm9sdmVBZGFwdGl2ZU1vZGVsID0gZXZvbHZlQWRhcHRpdmVNb2RlbDsKICBnbG9iYWwuZ2VuSW1hZ2UgPSBnZW5JbWFnZTsKICBnbG9iYWwuYmFja1Byb3BJbWFnZSA9IGJhY2tQcm9wSW1hZ2U7Cn0pKE5ldEFydCk7CihmdW5jdGlvbiAobGliKSB7CiAgInVzZSBzdHJpY3QiOwoKICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gInVuZGVmaW5lZCIgfHwgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSAidW5kZWZpbmVkIikgewogICAgd2luZG93LmpzZmVhdCA9IGxpYjsgLy8gaW4gb3JkaW5hcnkgYnJvd3NlciBhdHRhY2ggbGlicmFyeSB0byB3aW5kb3cKICB9IGVsc2UgewogICAgbW9kdWxlLmV4cG9ydHMgPSBsaWI7IC8vIGluIG5vZGVqcwogIH0KfSkoTmV0QXJ0KTsKCi8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMgKi8="},{"version":3,"names":["module","R","require","convnetjs","N","NetArt","global","networkSize","nHidden","nOut","G0","Graph","Image","n_","d_","n","d","l","r","zeros","g","b","label","prototype","checkBound","i","j","get","vec","row","col","set","value","getColor","setColor","c","copy","image","flip","tempColor","middle","Math","floor","maxcol","maxrow","augment","drow","dcol","flip_","randomAugment","shiftSize","randi","random","getConvnetVol","x","Vol","getCanvasImage","ctx","sizeh","sizew","imgData","createImageData","k","offset","data","createModel","model","randomSize","w_in","RandMat","w_out","forwardNetwork","x_","y_","graph_","Mat","out","G","tanh","mul","sigmoid","getColorAt","y","w","hsvToRgb","h","s","v","f","p","q","t","mod","genGenomeImage","genome","inputDepth","img","input","output","scale","factor","min","counter","renderMode","getRenderMode","setupModel","sqrt","setInput","forward","getOutput","gaussian","abs","zeroOutNodes","genImage","backPropImage","graph","dw","get_grad","backward","evolveAdaptiveModel","net","desiredFitness_","maxAttempt_","desiredFitness","maxAttempt","target","trainer_settings","population_size","hall_of_fame_size","mutation_size","mutation_rate","init_weight_magnitude","elite_percentage","debug_mode","trainer","GATrainer","predict","fitFunc","pred","evolve","length","pushGeneToModel","genes","fitness","sortGenes","update","bestFitness","console","log","createAdaptiveModel","initModel_","solver","Solver","learnRate","cost_loss","step","randf","lib","exports","window","jsfeat"],"sources":["/home/burny/projects/ml-playground/auto-picbreeder/nbenko1/nbenko1.github.io/picbreeder-dev/src/lib/netart.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\n/*globals paper, $ */\r\n/*jslint nomen: true, undef: true, sloppy: true */\r\n\r\n// network art library\r\n\r\n/*\r\n\r\n@licstart  The following is the entire license notice for the\r\nJavaScript code in this page.\r\n\r\nCopyright (C) 2015 david ha, otoro.net, otoro labs\r\n\r\nThe JavaScript code in this page is free software: you can\r\nredistribute it and/or modify it under the terms of the GNU\r\nGeneral Public License (GNU GPL) as published by the Free Software\r\nFoundation, either version 3 of the License, or (at your option)\r\nany later version.  The code is distributed WITHOUT ANY WARRANTY;\r\nwithout even the implied warranty of MERCHANTABILITY or FITNESS\r\nFOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.\r\n\r\nAs additional permission under GNU GPL version 3 section 7, you\r\nmay distribute non-source (e.g., minimized or compacted) forms of\r\nthat code without the copy of the GNU GPL normally required by\r\nsection 4, provided you include this license notice and a URL\r\nthrough which recipients can access the Corresponding Source.\r\n\r\n\r\n@licend  The above is the entire license notice\r\nfor the JavaScript code in this page.\r\n*/\r\n\r\n// neural network random art generator\r\nif (typeof module != \"undefined\") {\r\n  var R = require('./recurrent.js');\r\n  var convnetjs = require('./convnet.js');\r\n  var N = require('./neat.js');\r\n}\r\n\r\nvar NetArt = {};\r\n(function(global) {\r\n  \"use strict\";\r\n\r\n  // settings of nnet:\r\n  var networkSize = 16*1.0;\r\n  var nHidden = 8*1.0;\r\n  var nOut = 3; // r, g, b layers\r\n\r\n  var G0 = new R.Graph(false);\r\n\r\n  // internal image class\r\n  var Image = function(n_, d_) {\r\n    this.n = n_ || 32; // maxrow\r\n    this.d = d_ || 32; // maxcol\r\n    var l = this.n*this.d;\r\n    this.r = R.zeros(l); // between 0 -> 1\r\n    this.g = R.zeros(l);\r\n    this.b = R.zeros(l);\r\n    this.label = -1;\r\n  };\r\n\r\n  Image.prototype = {\r\n    checkBound: function(i, j) {\r\n      // returns true if (i, j) within boundary of image\r\n      if (i >= 0 && j >= 0 && i < this.n && j < this.d) {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    get: function(vec, row, col) {\r\n      // returns pixel at (row, col) of 1d unrolled vector vec\r\n      return vec[row*this.n+col];\r\n    },\r\n    set: function(vec, row, col, value) {\r\n      // sets (row, col) to value for a 1d unrolled vec\r\n      vec[row*this.n+col] = value;\r\n    },\r\n    getColor: function(row, col) {\r\n      // returns pixel at (row, col) of 1d unrolled vector vec\r\n      return [this.r[row*this.n+col], this.g[row*this.n+col], this.b[row*this.n+col]];\r\n    },\r\n    setColor: function(row, col, c) {\r\n      // sets (row, col) to value for a 1d unrolled vec\r\n      this.r[row*this.n+col] = c[0];\r\n      this.g[row*this.n+col] = c[1];\r\n      this.b[row*this.n+col] = c[2];\r\n    },\r\n    copy: function() {\r\n      // returns exact copy of image\r\n      var image = new Image(this.n, this.d);\r\n      image.r = R.copy(this.r);\r\n      image.g = R.copy(this.g);\r\n      image.b = R.copy(this.b);\r\n      image.label = this.label;\r\n      return image;\r\n    },\r\n    flip: function() {\r\n      // return a copy of the horizontally flipped image\r\n      var image = this.copy();\r\n      var tempColor;\r\n      var middle = Math.floor(this.d/2);\r\n      var maxcol = this.d;\r\n      for (var i=0,maxrow=this.n;i<maxrow;i++) {\r\n        for (var j=0;j<middle;j++) {\r\n          tempColor = image.getColor(i, j);\r\n          image.setColor(i, j, image.getColor(i, maxcol-j-1));\r\n          image.setColor(i, maxcol-j-1, tempColor);\r\n        }\r\n      }\r\n      return image;\r\n    },\r\n    augment: function(drow, dcol, flip_) {\r\n      // return a copy of the augmented image.\r\n      var flip = typeof flip_ === 'undefined' ? false : flip_;\r\n      var image = this.copy();\r\n      for (var i=0,maxrow=this.n;i<maxrow;i++) {\r\n        for (var j=0,maxcol=this.d;j<maxcol;j++) {\r\n          if (this.checkBound(i-drow,j-dcol)) {\r\n            image.setColor(i, j, this.getColor(i-drow,j-dcol));\r\n          }\r\n        }\r\n      }\r\n      if (flip) {\r\n        image = image.flip();\r\n      }\r\n      return image;\r\n    },\r\n    randomAugment: function(shiftSize) {\r\n      // returns a randomised augmented version of the image with 50% prob flip\r\n      return this.augment(R.randi(-shiftSize,shiftSize),R.randi(-shiftSize,shiftSize),(Math.random()<0.5));\r\n    },\r\n    getConvnetVol: function() {\r\n      // return an object compatible with the input into a convnet.js network\r\n      var maxrow = this.n;\r\n      var maxcol = this.d;\r\n      var x = new convnetjs.Vol(maxrow,maxcol,3,0.0);\r\n\r\n      var i, j;\r\n      var c;\r\n\r\n      for( i=0;i<maxcol;i++) {\r\n        for( j=0;j<maxrow;j++) {\r\n          c = this.getColor(i, j);\r\n          x.set(j,i,0,c[0]-0.5);\r\n          x.set(j,i,1,c[1]-0.5);\r\n          x.set(j,i,2,c[2]-0.5);\r\n        }\r\n      }\r\n\r\n      return x;\r\n    },\r\n    getCanvasImage: function (ctx) { // input is a NetArt.Image\r\n\r\n      var sizeh = this.d;\r\n      var sizew = this.n;\r\n      var imgData=ctx.createImageData(sizeh, sizew);\r\n\r\n      var k = 0;\r\n      var i, j;\r\n      var offset;\r\n\r\n      for (i = 0; i < sizeh; i++) {\r\n        for (j = 0; j < sizew; j++) {\r\n          offset = i*sizew;\r\n          imgData.data[k+0]=this.r[offset+j]*255.0;\r\n          imgData.data[k+1]=this.g[offset+j]*255.0;\r\n          imgData.data[k+2]=this.b[offset+j]*255.0;\r\n          imgData.data[k+3]=255;\r\n          k+=4;\r\n        }\r\n      }\r\n      return imgData;\r\n    }\r\n\r\n  };\r\n\r\n  var createModel = function() {\r\n    // returns a recurrent.js model used to generate images\r\n\r\n    var model = [];\r\n    var i;\r\n\r\n    var randomSize = 1.0;\r\n\r\n    // define the model below:\r\n    model.w_in = R.RandMat(networkSize, 3, 0, randomSize); // x, y, and bias\r\n\r\n    for (i = 0; i < nHidden; i++) {\r\n      model['w_'+i] = R.RandMat(networkSize, networkSize, 0, randomSize);\r\n    }\r\n\r\n    model.w_out = R.RandMat(nOut, networkSize, 0, randomSize); // output layer\r\n\r\n    return model;\r\n  };\r\n\r\n  var forwardNetwork = function(model, x_, y_, graph_) {\r\n    // x_, y_ is a normal javascript float, will be converted to a mat object below\r\n    // can pass in graph object if one needs backprop later.\r\n    var x = new R.Mat(3, 1); // input\r\n    var i;\r\n    x.set(0, 0, x_);\r\n    x.set(1, 0, y_);\r\n    x.set(2, 0, 1.0); // bias.\r\n    var out;\r\n    var G = typeof graph_ === 'undefined'? G0 : graph_;\r\n    out = G.tanh(G.mul(model.w_in, x));\r\n    for (i = 0; i < nHidden; i++) {\r\n      if (i % 3 === 0) {\r\n        out = G.tanh(G.mul(model['w_'+i], out));\r\n      } else {\r\n        out = G.tanh(G.mul(model['w_'+i], out));\r\n      }\r\n    }\r\n    out = G.sigmoid(G.mul(model.w_out, out));\r\n    return out;\r\n  };\r\n\r\n  function getColorAt(model, x, y) {\r\n    // function that returns a color given coordintes (x, y)\r\n    // (x, y) are scaled to -0.5 -> 0.5 for image recognition later\r\n    // but it can be behond the +/- 0.5 for generation above and beyond\r\n    // recognition limits\r\n    var r, g, b;\r\n    var out = forwardNetwork(model, x, y);\r\n\r\n    r = out.w[0];\r\n    g = out.w[1];\r\n    b = out.w[2];\r\n\r\n    return [r, g, b];\r\n  }\r\n\r\n  // from\r\n  // https://bgrins.github.io/TinyColor/docs/tinycolor.html\r\n  function hsvToRgb(h, s, v) {\r\n      // hsv are between 0 and 1\r\n      // returns rgb between 0 and 1\r\n\r\n      h *= 6;\r\n\r\n      var i = Math.floor(h),\r\n          f = h - i,\r\n          p = v * (1 - s),\r\n          q = v * (1 - f * s),\r\n          t = v * (1 - (1 - f) * s),\r\n          mod = i % 6,\r\n          r = [v, q, p, p, t, v][mod],\r\n          g = [t, v, v, q, p, p][mod],\r\n          b = [p, p, t, v, v, q][mod];\r\n\r\n      return [r, g, b];\r\n  }\r\n\r\n  function genGenomeImage(genome, sizeh, sizew) {\r\n    // returns a NetArt.Image of this genome given some size params\r\n\r\n    var i, j, k;\r\n    var inputDepth = sizew; // sizeh*sizew; // try 1-d line\r\n    var img = new Image(sizeh, sizew);\r\n    var input = new R.Mat(inputDepth, 3); // x, y, distance from center\r\n    var output;\r\n    var scale = 24;\r\n    var factor = Math.min(sizeh, sizew)/scale;\r\n    var offset;\r\n    var counter;\r\n    var x, y;\r\n\r\n    var r, g, b;\r\n\r\n    var renderMode = N.getRenderMode();\r\n\r\n    var G = new R.Graph(false);\r\n\r\n    // setup model\r\n    genome.setupModel(inputDepth);\r\n\r\n    for (i = 0; i < sizeh; i++) { // try one line at a time to save memory.\r\n\r\n      // populate input vector with (x, y) inputs\r\n\r\n      for (j = 0; j < sizew; j++) {\r\n        x = i/factor-0.5*scale;\r\n        y = j/factor-0.5*scale;\r\n        input.set(j, 0, x);\r\n        input.set(j, 1, y);\r\n        input.set(j, 2, Math.sqrt((x*x+y*y)));\r\n      }\r\n\r\n      // setup inputs\r\n      genome.setInput(input);\r\n      genome.forward(G);\r\n      output = genome.getOutput();\r\n\r\n      // put thru 2 more layers, tanh, and abs, so all values between 0 and 1.\r\n      for (k=0;k<3;k++) {\r\n\r\n        if (renderMode === 0) {\r\n          output[k] = G.sigmoid(output[k]);\r\n        } else if (renderMode === 1) {\r\n          output[k] = G.gaussian(output[k]);\r\n        } else {\r\n          output[k] = G.tanh(output[k]);\r\n          output[k] = G.abs(output[k]);\r\n        }\r\n\r\n      }\r\n\r\n      // construct the image back from outputs\r\n      offset = i*sizew;\r\n      for (j = 0; j < sizew; j++) {\r\n\r\n        r = output[0].w[j];\r\n        g = output[1].w[j];\r\n        b = output[2].w[j];\r\n        img.r[offset+j]=r;\r\n        img.g[offset+j]=g;\r\n        img.b[offset+j]=b;\r\n\r\n      }\r\n\r\n      genome.zeroOutNodes(); // wipe out previous values.\r\n\r\n    }\r\n\r\n    return img;\r\n\r\n  }\r\n\r\n  function genImage(model, sizeh, sizew) {\r\n\r\n    var img = new Image(sizeh, sizew);\r\n    var offset;\r\n    var i, j;\r\n    var factor = Math.min(sizeh, sizew);\r\n    var c;\r\n\r\n    for (i = 0; i < sizeh; i++) {\r\n      for (j = 0; j < sizew; j++) {\r\n        offset = i*sizew;\r\n        c = getColorAt(model, i/factor-0.5,j/factor-0.5);\r\n        img.r[offset+j]=c[0];\r\n        img.g[offset+j]=c[1];\r\n        img.b[offset+j]=c[2];\r\n      }\r\n    }\r\n\r\n    return img;\r\n\r\n  }\r\n\r\n  function backPropImage(model, sizeh, sizew, input) {\r\n    // input is previous input of image.\r\n\r\n    var img = new Image(sizeh, sizew);\r\n    var offset;\r\n    var i, j;\r\n    var factor = Math.min(sizeh, sizew);\r\n    var out;\r\n    var x, y;\r\n    var graph;\r\n\r\n    for (i = 0; i < sizeh; i++) {\r\n      for (j = 0; j < sizew; j++) {\r\n        offset = i*sizew;\r\n        x = i/factor-0.5;\r\n        y = j/factor-0.5;\r\n        graph = new R.Graph();\r\n        out = forwardNetwork(model, x, y, graph);\r\n        img.r[offset+j]=out.w[0];\r\n        img.g[offset+j]=out.w[1];\r\n        img.b[offset+j]=out.w[2];\r\n        out.dw[0] = input.get_grad(j, i, 0);\r\n        out.dw[1] = input.get_grad(j, i, 1);\r\n        out.dw[2] = input.get_grad(j, i, 2);\r\n        graph.backward();\r\n      }\r\n    }\r\n\r\n    return img;\r\n\r\n  }\r\n\r\n  // evolve artwork to adapt to discriminiate network\r\n  function evolveAdaptiveModel(net, desiredFitness_, maxAttempt_) {\r\n    var model = createModel();\r\n    var img;\r\n    var imgData;\r\n    var desiredFitness = desiredFitness_ || 0.7;\r\n    var maxAttempt = maxAttempt_ || 5;\r\n    var target = 1;\r\n\r\n    // neuroevolution stuff:\r\n    var trainer_settings = {\r\n          population_size: 45,\r\n          hall_of_fame_size: 5,\r\n          mutation_size: 0.1,\r\n          mutation_rate: 0.6,\r\n          init_weight_magnitude: 1.0,\r\n          elite_percentage: 0.30,\r\n          debug_mode: false\r\n        };\r\n\r\n    var trainer = new R.GATrainer(model, trainer_settings);\r\n\r\n    var predict = function(x) {\r\n      // see predictions here\r\n      var output = net.forward(x);\r\n      return output.w;\r\n    };\r\n\r\n    function fitFunc(model) {\r\n      var img = genImage(model, 32, 32);\r\n      var pred = predict(img.getConvnetVol());\r\n      return pred[target];\r\n    }\r\n\r\n    function evolve() {\r\n      var i;\r\n      var n = trainer.length;\r\n      for (i=0;i<n;i++) {\r\n        trainer.pushGeneToModel(model, i);\r\n        trainer.genes[i].fitness = fitFunc(model);\r\n      }\r\n      trainer.sortGenes();\r\n    }\r\n\r\n    // page request:\r\n    function update() {\r\n      evolve();\r\n      var bestFitness = trainer.genes[0].fitness;\r\n      if (trainer.debug_mode) {\r\n        console.log('bestFitness = '+bestFitness);\r\n      }\r\n      trainer.pushGeneToModel(model, 0);\r\n      trainer.evolve(); // mutation\r\n      return bestFitness;\r\n    }\r\n\r\n    var fitness = -1e24;\r\n    for (var i = 0; i < maxAttempt; i++) {\r\n      fitness = update();\r\n      if (fitness > desiredFitness) {\r\n        break;\r\n      }\r\n    }\r\n    console.log('evolved fitness = '+fitness);\r\n    return model;\r\n\r\n  }\r\n\r\n  // create artwork that passes a trained discriminative network\r\n  function createAdaptiveModel(net, initModel_, desiredFitness_, maxAttempt_) {\r\n    // hold image variables outside of loop.\r\n    // init:\r\n    var model = initModel_ || createModel();\r\n    var img;\r\n    var solver = new R.Solver(); // the Solver uses RMSProp\r\n    var learnRate = 0.001;\r\n    var imgData;\r\n    var desiredFitness = desiredFitness_ || 0.65;\r\n    var maxAttempt = maxAttempt_ || 200;\r\n    var target = 1;\r\n    var fitness = 0;\r\n    var input, output;\r\n    var cost_loss;\r\n\r\n/* debug\r\n      img = genImage(model, 32, 32); // forward prop to generate image\r\n      input = img.getConvnetVol(); // convert image to convnet.js vol\r\n      output = net.forward(input, false); // forward prop to get classification\r\n      fitness = output.w[target]; // see the probability of image fooling network\r\n      console.log('initial fitness = '+fitness);\r\n*/\r\n    // each step in the optimisation before gradient descent\r\n\r\n    for (var i = 0; i < maxAttempt; i++) {\r\n\r\n      img = genImage(model, 32, 32); // forward prop to generate image\r\n      input = img.getConvnetVol(); // convert image to convnet.js vol\r\n      output = net.forward(input, false); // forward prop to get classification\r\n\r\n      fitness = output.w[target]; // see the probability of image fooling network\r\n\r\n      if (i % 10 === 0) {\r\n        console.log('fitness #'+(i+1)+' = '+fitness);\r\n      }\r\n\r\n      if (fitness > desiredFitness) { // found solution, return img and quit.\r\n        console.log((i+0)+' attempts made');\r\n        return model;\r\n      }\r\n\r\n      cost_loss = net.backward(target); // backprop to get dClass / dPixel\r\n      img = backPropImage(model, 32, 32, input); // backprop to get dClass/dWeight\r\n      solver.step(model, R.randf(learnRate, 1*learnRate), 1e-8, 5.0);\r\n\r\n    }\r\n\r\n    console.log('cannot generate image after '+maxAttempt+' attempts');\r\n    return null; // target not achieved, return null.\r\n\r\n  }\r\n\r\n\r\n  // exports:\r\n\r\n  global.Image = Image;\r\n  global.genGenomeImage = genGenomeImage;\r\n  global.createModel = createModel;\r\n  global.createAdaptiveModel = createAdaptiveModel;\r\n  global.evolveAdaptiveModel = evolveAdaptiveModel;\r\n  global.genImage = genImage;\r\n  global.backPropImage = backPropImage;\r\n\r\n\r\n})(NetArt);\r\n(function(lib) {\r\n  \"use strict\";\r\n  if (typeof module === \"undefined\" || typeof module.exports === \"undefined\") {\r\n    window.jsfeat = lib; // in ordinary browser attach library to window\r\n  } else {\r\n    module.exports = lib; // in nodejs\r\n  }\r\n})(NetArt);\r\n\r\n/* eslint-enable no-unused-vars */"],"mappings":"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","ignoreList":[]}]}